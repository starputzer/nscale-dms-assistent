{"version":3,"file":"DocConverterView-DLZo__zO.js","sources":["../../src/views/DocConverterView.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useFeatureToggleStore } from '../stores/featureToggleStore'\n\nconst featureToggleStore = useFeatureToggleStore()\nconst isVueVersion = ref(featureToggleStore.isDocConverterEnabled)\nconst files = ref([])\nconst results = ref([])\nconst isUploading = ref(false)\nconst uploadProgress = ref(0)\nconst dragActive = ref(false)\n\n// Datei-Upload-Handler\nconst handleFileUpload = (event) => {\n  files.value = event.target.files\n  if (files.value.length > 0) {\n    uploadFiles()\n  }\n}\n\n// Drag-and-Drop-Funktionen\nconst handleDragEnter = (e) => {\n  e.preventDefault()\n  e.stopPropagation()\n  dragActive.value = true\n}\n\nconst handleDragLeave = (e) => {\n  e.preventDefault()\n  e.stopPropagation()\n  dragActive.value = false\n}\n\nconst handleDragOver = (e) => {\n  e.preventDefault()\n  e.stopPropagation()\n}\n\nconst handleDrop = (e) => {\n  e.preventDefault()\n  e.stopPropagation()\n  dragActive.value = false\n  \n  if (e.dataTransfer.files.length > 0) {\n    files.value = e.dataTransfer.files\n    uploadFiles()\n  }\n}\n\n// Dateien hochladen und konvertieren\nconst uploadFiles = async () => {\n  if (!files.value || files.value.length === 0) return\n  \n  isUploading.value = true\n  uploadProgress.value = 0\n  \n  // Für jede Datei ein Ergebnis-Element erstellen\n  results.value = Array.from(files.value).map(file => ({\n    name: file.name,\n    status: 'uploading',\n    message: 'Wird hochgeladen...',\n    downloadUrl: null,\n    previewUrl: null,\n    error: null\n  }))\n  \n  // Fortschrittsbalken simulieren\n  const progressInterval = setInterval(() => {\n    if (uploadProgress.value < 90) {\n      uploadProgress.value += Math.random() * 10\n    }\n  }, 200)\n  \n  try {\n    // FormData erstellen und Dateien anhängen\n    const formData = new FormData()\n    Array.from(files.value).forEach((file, index) => {\n      formData.append('files', file)\n    })\n    \n    // API-Aufruf simulieren (kann später durch echten Aufruf ersetzt werden)\n    await new Promise(resolve => setTimeout(resolve, 2000 + Math.random() * 1000))\n    \n    // Erfolgsfall simulieren\n    Array.from(files.value).forEach((file, index) => {\n      results.value[index].status = 'success'\n      results.value[index].message = 'Konvertierung erfolgreich'\n      results.value[index].downloadUrl = '#' // Hier später echte URL einfügen\n      results.value[index].previewUrl = '#' // Hier später echte URL einfügen\n    })\n    \n    uploadProgress.value = 100\n  } catch (error) {\n    console.error('Fehler beim Hochladen:', error)\n    \n    // Fehlerfall für alle Dateien setzen\n    results.value.forEach((result, index) => {\n      result.status = 'error'\n      result.message = 'Fehler bei der Konvertierung'\n      result.error = error.message || 'Unbekannter Fehler'\n    })\n  } finally {\n    clearInterval(progressInterval)\n    setTimeout(() => {\n      isUploading.value = false\n    }, 500)\n  }\n}\n\n// Beim Laden prüfen, ob Vue-Version aktiviert werden soll\nonMounted(() => {\n  isVueVersion.value = featureToggleStore.isDocConverterEnabled\n  \n  // Feature-Toggle-Änderungen beobachten\n  featureToggleStore.$subscribe((_mutation, state) => {\n    isVueVersion.value = state.features.vueDocConverter\n  })\n})\n</script>\n\n<template>\n  <div class=\"doc-converter-container\">\n    <div class=\"doc-converter-header\">\n      <h1 class=\"doc-converter-title\">Dokumentenkonverter</h1>\n      <p class=\"doc-converter-description\">\n        Laden Sie Dokumente hoch, um sie in durchsuchbaren Text zu konvertieren.\n      </p>\n    </div>\n    \n    <div class=\"doc-converter-card\">\n      <div \n        class=\"upload-zone\"\n        :class=\"{ 'active': dragActive }\"\n        @dragenter=\"handleDragEnter\"\n        @dragleave=\"handleDragLeave\"\n        @dragover=\"handleDragOver\"\n        @drop=\"handleDrop\"\n      >\n        <div class=\"upload-icon\">\n          <i class=\"fas fa-cloud-upload-alt\"></i>\n        </div>\n        <p class=\"upload-text\">Dateien hierher ziehen oder</p>\n        <input \n          type=\"file\" \n          id=\"file-upload\" \n          class=\"file-input\" \n          multiple\n          @change=\"handleFileUpload\"\n        />\n        <label for=\"file-upload\" class=\"upload-button\">\n          Dateien auswählen\n        </label>\n        <p class=\"upload-hint\">\n          Unterstützte Formate: PDF, DOCX, XLSX, PPTX, HTML\n        </p>\n      </div>\n      \n      <!-- Fortschrittsanzeige -->\n      <div class=\"progress-container\" v-if=\"isUploading\">\n        <p class=\"progress-label\">Konvertierung läuft...</p>\n        <div class=\"progress-bar-container\">\n          <div \n            class=\"progress-bar\" \n            :style=\"{ width: `${uploadProgress}%` }\"\n          ></div>\n        </div>\n      </div>\n      \n      <!-- Ergebnisse -->\n      <div class=\"results-container\" v-if=\"results.length > 0\">\n        <h3 class=\"results-title\">Konvertierte Dokumente</h3>\n        <div class=\"results-list\">\n          <div \n            v-for=\"(result, index) in results\" \n            :key=\"index\"\n            class=\"result-item\"\n            :class=\"result.status\"\n          >\n            <div class=\"result-icon\">\n              <i v-if=\"result.status === 'uploading'\" class=\"fas fa-spinner fa-spin\"></i>\n              <i v-else-if=\"result.status === 'success'\" class=\"fas fa-check-circle\"></i>\n              <i v-else-if=\"result.status === 'error'\" class=\"fas fa-times-circle\"></i>\n              <i v-else class=\"fas fa-file-alt\"></i>\n            </div>\n            <div class=\"result-content\">\n              <h4 class=\"result-name\">{{ result.name }}</h4>\n              <p class=\"result-message\">{{ result.message }}</p>\n              <div class=\"result-actions\" v-if=\"result.status === 'success'\">\n                <a \n                  :href=\"result.downloadUrl\" \n                  class=\"result-action download\"\n                  target=\"_blank\"\n                >\n                  <i class=\"fas fa-download\"></i> Herunterladen\n                </a>\n                <a \n                  :href=\"result.previewUrl\" \n                  class=\"result-action preview\"\n                  target=\"_blank\"\n                >\n                  <i class=\"fas fa-eye\"></i> Vorschau\n                </a>\n              </div>\n              <p class=\"result-error\" v-if=\"result.error\">\n                {{ result.error }}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.doc-converter-container {\n  padding: 2rem;\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n.doc-converter-header {\n  margin-bottom: 2rem;\n  text-align: center;\n}\n\n.doc-converter-title {\n  font-size: 2rem;\n  font-weight: 700;\n  color: #333;\n  margin-bottom: 0.5rem;\n}\n\n.doc-converter-description {\n  color: #666;\n  font-size: 1.1rem;\n}\n\n.doc-converter-card {\n  background-color: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  padding: 2rem;\n}\n\n.upload-zone {\n  border: 2px dashed #ccc;\n  border-radius: 8px;\n  padding: 3rem 2rem;\n  text-align: center;\n  transition: all 0.3s ease;\n}\n\n.upload-zone.active {\n  border-color: #38a169;\n  background-color: rgba(56, 161, 105, 0.05);\n}\n\n.upload-icon {\n  font-size: 3rem;\n  color: #a0aec0;\n  margin-bottom: 1rem;\n}\n\n.upload-text {\n  margin-bottom: 1rem;\n  color: #4a5568;\n}\n\n.file-input {\n  display: none;\n}\n\n.upload-button {\n  display: inline-block;\n  background-color: #38a169;\n  color: white;\n  padding: 0.75rem 1.5rem;\n  border-radius: 4px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: background-color 0.2s;\n}\n\n.upload-button:hover {\n  background-color: #2f855a;\n}\n\n.upload-hint {\n  margin-top: 1rem;\n  font-size: 0.875rem;\n  color: #718096;\n}\n\n.progress-container {\n  margin-top: 2rem;\n}\n\n.progress-label {\n  margin-bottom: 0.5rem;\n  font-weight: 500;\n}\n\n.progress-bar-container {\n  height: 8px;\n  background-color: #e2e8f0;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.progress-bar {\n  height: 100%;\n  background-color: #38a169;\n  border-radius: 4px;\n  transition: width 0.3s ease;\n}\n\n.results-container {\n  margin-top: 2rem;\n}\n\n.results-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin-bottom: 1rem;\n}\n\n.results-list {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.result-item {\n  display: flex;\n  align-items: flex-start;\n  padding: 1rem;\n  border-radius: 8px;\n  border: 1px solid #e2e8f0;\n}\n\n.result-item.success {\n  border-left: 4px solid #38a169;\n}\n\n.result-item.error {\n  border-left: 4px solid #e53e3e;\n}\n\n.result-item.uploading {\n  border-left: 4px solid #3182ce;\n}\n\n.result-icon {\n  flex-shrink: 0;\n  font-size: 1.5rem;\n  margin-right: 1rem;\n}\n\n.result-item.success .result-icon {\n  color: #38a169;\n}\n\n.result-item.error .result-icon {\n  color: #e53e3e;\n}\n\n.result-item.uploading .result-icon {\n  color: #3182ce;\n}\n\n.result-content {\n  flex-grow: 1;\n}\n\n.result-name {\n  font-weight: 600;\n  margin-bottom: 0.25rem;\n}\n\n.result-message {\n  color: #718096;\n  font-size: 0.875rem;\n  margin-bottom: 0.5rem;\n}\n\n.result-actions {\n  display: flex;\n  gap: 1rem;\n  margin-top: 0.5rem;\n}\n\n.result-action {\n  font-size: 0.875rem;\n  color: #3182ce;\n  text-decoration: none;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n}\n\n.result-action:hover {\n  text-decoration: underline;\n}\n\n.result-error {\n  margin-top: 0.5rem;\n  color: #e53e3e;\n  font-size: 0.875rem;\n}\n</style>"],"names":["featureToggleStore","useFeatureToggleStore","isVueVersion","ref","files","results","isUploading","uploadProgress","dragActive","handleFileUpload","event","uploadFiles","handleDragEnter","e","handleDragLeave","handleDragOver","handleDrop","file","progressInterval","formData","index","resolve","error","result","onMounted","_mutation","state"],"mappings":"g0BAIA,MAAMA,EAAqBC,EAAqB,EAC1CC,EAAeC,EAAIH,EAAmB,qBAAqB,EAC3DI,EAAQD,EAAI,CAAE,CAAA,EACdE,EAAUF,EAAI,CAAE,CAAA,EAChBG,EAAcH,EAAI,EAAK,EACvBI,EAAiBJ,EAAI,CAAC,EACtBK,EAAaL,EAAI,EAAK,EAGtBM,EAAoBC,GAAU,CAClCN,EAAM,MAAQM,EAAM,OAAO,MACvBN,EAAM,MAAM,OAAS,GACvBO,EAAW,CAEf,EAGMC,EAAmBC,GAAM,CAC7BA,EAAE,eAAc,EAChBA,EAAE,gBAAe,EACjBL,EAAW,MAAQ,EACrB,EAEMM,EAAmBD,GAAM,CAC7BA,EAAE,eAAc,EAChBA,EAAE,gBAAe,EACjBL,EAAW,MAAQ,EACrB,EAEMO,EAAkBF,GAAM,CAC5BA,EAAE,eAAc,EAChBA,EAAE,gBAAe,CACnB,EAEMG,EAAcH,GAAM,CACxBA,EAAE,eAAc,EAChBA,EAAE,gBAAe,EACjBL,EAAW,MAAQ,GAEfK,EAAE,aAAa,MAAM,OAAS,IAChCT,EAAM,MAAQS,EAAE,aAAa,MAC7BF,EAAW,EAEf,EAGMA,EAAc,SAAY,CAC9B,GAAI,CAACP,EAAM,OAASA,EAAM,MAAM,SAAW,EAAG,OAE9CE,EAAY,MAAQ,GACpBC,EAAe,MAAQ,EAGvBF,EAAQ,MAAQ,MAAM,KAAKD,EAAM,KAAK,EAAE,IAAIa,IAAS,CACnD,KAAMA,EAAK,KACX,OAAQ,YACR,QAAS,sBACT,YAAa,KACb,WAAY,KACZ,MAAO,IACX,EAAI,EAGF,MAAMC,EAAmB,YAAY,IAAM,CACrCX,EAAe,MAAQ,KACzBA,EAAe,OAAS,KAAK,SAAW,GAE9C,EAAK,GAAG,EAEN,GAAI,CAEF,MAAMY,EAAW,IAAI,SACrB,MAAM,KAAKf,EAAM,KAAK,EAAE,QAAQ,CAACa,EAAMG,IAAU,CAC/CD,EAAS,OAAO,QAASF,CAAI,CAC9B,CAAA,EAGD,MAAM,IAAI,QAAQI,GAAW,WAAWA,EAAS,IAAO,KAAK,OAAQ,EAAG,GAAI,CAAC,EAG7E,MAAM,KAAKjB,EAAM,KAAK,EAAE,QAAQ,CAACa,EAAMG,IAAU,CAC/Cf,EAAQ,MAAMe,CAAK,EAAE,OAAS,UAC9Bf,EAAQ,MAAMe,CAAK,EAAE,QAAU,4BAC/Bf,EAAQ,MAAMe,CAAK,EAAE,YAAc,IACnCf,EAAQ,MAAMe,CAAK,EAAE,WAAa,GACnC,CAAA,EAEDb,EAAe,MAAQ,GACxB,OAAQe,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAG7CjB,EAAQ,MAAM,QAAQ,CAACkB,EAAQH,IAAU,CACvCG,EAAO,OAAS,QAChBA,EAAO,QAAU,+BACjBA,EAAO,MAAQD,EAAM,SAAW,oBACjC,CAAA,CACL,QAAY,CACR,cAAcJ,CAAgB,EAC9B,WAAW,IAAM,CACfZ,EAAY,MAAQ,EAC1B,EAAO,GAAG,CACV,CACA,EAGA,OAAAkB,EAAU,IAAM,CACdtB,EAAa,MAAQF,EAAmB,sBAGxCA,EAAmB,WAAW,CAACyB,EAAWC,IAAU,CAClDxB,EAAa,MAAQwB,EAAM,SAAS,eACrC,CAAA,CACH,CAAC"}