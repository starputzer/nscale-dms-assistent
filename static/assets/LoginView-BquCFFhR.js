import{s as h,t as M,c as T,a as o,e as s,b as p,v as _,x as m,y as v,z as g,A as E,i as L,j as i}from"./vue-vendor-CBOooRdR.js";import{u as G}from"./index-BNZV3Owa.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./http-xsH4HHeE.js";const P={class:"login-container"},N={class:"login-card nscale-card"},x={class:"auth-tabs"},A={class:"form-group"},V={class:"form-group"},C={class:"mt-6"},z=["disabled"],D={key:0,class:"loading-dots"},U={key:1},j={class:"text-center mt-4"},q={class:"form-group"},B={class:"form-group"},$={class:"mt-6"},F=["disabled"],J={key:0,class:"loading-dots"},H={key:1},Z={class:"form-group"},K={class:"mt-6"},Q=["disabled"],W={key:0,class:"loading-dots"},X={key:1},Y={class:"text-center mt-4"},ee={key:3,class:"message success-message"},se={key:4,class:"message error-message"},te={__name:"LoginView",setup(ae){const R=L(),b=G(),a={LOGIN:"login",REGISTER:"register",RESET:"reset"},n=h(a.LOGIN),t=M({email:"",password:""}),c=h(""),d=h(""),u=h(!1),w=T(()=>u.value?!0:n.value===a.RESET?!t.email:!t.email||!t.password),S=async()=>{u.value=!0,d.value="";try{await b.login(t.email,t.password)?R.push({name:"home"}):d.value=b.error||"Login fehlgeschlagen"}catch(l){d.value="Ein unerwarteter Fehler ist aufgetreten",console.error("Login error:",l)}finally{u.value=!1}},k=async()=>{u.value=!0,d.value="";try{await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,password:t.password})}),c.value="Registrierung erfolgreich. Bitte melden Sie sich an.",n.value=a.LOGIN,t.password=""}catch(l){d.value="Registrierung fehlgeschlagen",console.error("Registration error:",l)}finally{u.value=!1}},I=async()=>{u.value=!0,d.value="",c.value="";try{const l=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email})});if(l.ok){const e=await l.json();c.value=e.message||"Passwort-Reset-E-Mail wurde gesendet."}else{const e=await l.json();d.value=e.detail||"Passwort-Reset fehlgeschlagen"}}catch(l){d.value="Ein unerwarteter Fehler ist aufgetreten",console.error("Password reset error:",l)}finally{u.value=!1}},y=()=>{n.value===a.LOGIN?S():n.value===a.REGISTER?k():n.value===a.RESET&&I()},f=l=>{n.value=l,d.value="",c.value=""};return(l,e)=>(i(),o("div",P,[s("div",N,[e[14]||(e[14]=s("div",{class:"text-center mb-8"},[s("div",{class:"nscale-logo"},"nscale DMS Assistent"),s("p",{class:"text-gray-500 mt-2"},"Ihr Digitalisierungspartner für DMS-Lösungen")],-1)),s("div",x,[s("button",{onClick:e[0]||(e[0]=r=>f(a.LOGIN)),class:_(["auth-tab",n.value===a.LOGIN?"active":""])}," Anmelden ",2),s("button",{onClick:e[1]||(e[1]=r=>f(a.REGISTER)),class:_(["auth-tab",n.value===a.REGISTER?"active":""])}," Registrieren ",2)]),n.value===a.LOGIN?(i(),o("form",{key:0,onSubmit:m(y,["prevent"]),class:"auth-form"},[s("div",A,[e[9]||(e[9]=s("label",{for:"email"},"E-Mail",-1)),v(s("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>t.email=r),type:"email",id:"email",class:"nscale-input",placeholder:"Ihre E-Mail-Adresse",required:""},null,512),[[g,t.email]])]),s("div",V,[e[10]||(e[10]=s("label",{for:"password"},"Passwort",-1)),v(s("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>t.password=r),type:"password",id:"password",class:"nscale-input",placeholder:"Ihr Passwort",required:""},null,512),[[g,t.password]])]),s("div",C,[s("button",{type:"submit",class:"nscale-btn-primary w-full",disabled:w.value},[u.value?(i(),o("span",D,"Anmelden")):(i(),o("span",U,"Anmelden"))],8,z)]),s("div",j,[s("a",{href:"#",class:"text-link",onClick:e[4]||(e[4]=m(r=>f(a.RESET),["prevent"]))}," Passwort vergessen? ")])],32)):p("",!0),n.value===a.REGISTER?(i(),o("form",{key:1,onSubmit:m(y,["prevent"]),class:"auth-form"},[s("div",q,[e[11]||(e[11]=s("label",{for:"reg-email"},"E-Mail",-1)),v(s("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>t.email=r),type:"email",id:"reg-email",class:"nscale-input",placeholder:"Ihre E-Mail-Adresse",required:""},null,512),[[g,t.email]])]),s("div",B,[e[12]||(e[12]=s("label",{for:"reg-password"},"Passwort",-1)),v(s("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>t.password=r),type:"password",id:"reg-password",class:"nscale-input",placeholder:"Ihr sicheres Passwort",required:""},null,512),[[g,t.password]])]),s("div",$,[s("button",{type:"submit",class:"nscale-btn-primary w-full",disabled:w.value},[u.value?(i(),o("span",J,"Registrieren")):(i(),o("span",H,"Registrieren"))],8,F)])],32)):p("",!0),n.value===a.RESET?(i(),o("form",{key:2,onSubmit:m(y,["prevent"]),class:"auth-form"},[s("div",Z,[e[13]||(e[13]=s("label",{for:"reset-email"},"E-Mail",-1)),v(s("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>t.email=r),type:"email",id:"reset-email",class:"nscale-input",placeholder:"Ihre E-Mail-Adresse",required:""},null,512),[[g,t.email]])]),s("div",K,[s("button",{type:"submit",class:"nscale-btn-primary w-full",disabled:w.value},[u.value?(i(),o("span",W,"Passwort zurücksetzen")):(i(),o("span",X,"Passwort zurücksetzen"))],8,Q)]),s("div",Y,[s("a",{href:"#",class:"text-link",onClick:e[8]||(e[8]=m(r=>f(a.LOGIN),["prevent"]))}," Zurück zur Anmeldung ")])],32)):p("",!0),c.value?(i(),o("div",ee,E(c.value),1)):p("",!0),d.value?(i(),o("div",se,E(d.value),1)):p("",!0)])]))}},ne=O(te,[["__scopeId","data-v-ad4f8d0a"]]);export{ne as default};
//# sourceMappingURL=LoginView-BquCFFhR.js.map
