{"version":3,"file":"LoginView-BquCFFhR.js","sources":["../../src/views/LoginView.vue"],"sourcesContent":["<script setup>\nimport { ref, reactive, computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useAuthStore } from '../stores/authStore'\n\nconst router = useRouter()\nconst authStore = useAuthStore()\n\n// Formular-Modi\nconst AUTH_MODES = {\n  LOGIN: 'login',\n  REGISTER: 'register',\n  RESET: 'reset'\n}\n\n// Reaktiver Zustand\nconst authMode = ref(AUTH_MODES.LOGIN)\nconst form = reactive({\n  email: '',\n  password: ''\n})\nconst successMessage = ref('')\nconst errorMessage = ref('')\nconst loading = ref(false)\n\n// Berechnen, ob der Button deaktiviert werden soll\nconst isButtonDisabled = computed(() => {\n  if (loading.value) return true\n  if (authMode.value === AUTH_MODES.RESET) {\n    return !form.email\n  }\n  return !form.email || !form.password\n})\n\n// Login-Funktion\nconst handleLogin = async () => {\n  loading.value = true\n  errorMessage.value = ''\n  \n  try {\n    const success = await authStore.login(form.email, form.password)\n    if (success) {\n      router.push({ name: 'home' })\n    } else {\n      errorMessage.value = authStore.error || 'Login fehlgeschlagen'\n    }\n  } catch (error) {\n    errorMessage.value = 'Ein unerwarteter Fehler ist aufgetreten'\n    console.error('Login error:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// Registrierungs-Funktion\nconst handleRegister = async () => {\n  loading.value = true\n  errorMessage.value = ''\n  \n  try {\n    // API-Aufruf ausführen\n    await fetch('/api/auth/register', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: form.email,\n        password: form.password\n      })\n    })\n    \n    // Nach erfolgreicher Registrierung zum Login wechseln\n    successMessage.value = 'Registrierung erfolgreich. Bitte melden Sie sich an.'\n    authMode.value = AUTH_MODES.LOGIN\n    \n    // Formular zurücksetzen\n    form.password = ''\n  } catch (error) {\n    errorMessage.value = 'Registrierung fehlgeschlagen'\n    console.error('Registration error:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// Passwort-Reset-Funktion\nconst handlePasswordReset = async () => {\n  loading.value = true\n  errorMessage.value = ''\n  successMessage.value = ''\n  \n  try {\n    // API-Aufruf ausführen\n    const response = await fetch('/api/auth/reset-password', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: form.email\n      })\n    })\n    \n    if (response.ok) {\n      const data = await response.json()\n      successMessage.value = data.message || 'Passwort-Reset-E-Mail wurde gesendet.'\n    } else {\n      const data = await response.json()\n      errorMessage.value = data.detail || 'Passwort-Reset fehlgeschlagen'\n    }\n  } catch (error) {\n    errorMessage.value = 'Ein unerwarteter Fehler ist aufgetreten'\n    console.error('Password reset error:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// Formularverarbeitung\nconst submitForm = () => {\n  if (authMode.value === AUTH_MODES.LOGIN) {\n    handleLogin()\n  } else if (authMode.value === AUTH_MODES.REGISTER) {\n    handleRegister()\n  } else if (authMode.value === AUTH_MODES.RESET) {\n    handlePasswordReset()\n  }\n}\n\n// Modus wechseln und Nachrichten zurücksetzen\nconst switchMode = (mode) => {\n  authMode.value = mode\n  errorMessage.value = ''\n  successMessage.value = ''\n}\n</script>\n\n<template>\n  <div class=\"login-container\">\n    <div class=\"login-card nscale-card\">\n      <div class=\"text-center mb-8\">\n        <div class=\"nscale-logo\">nscale DMS Assistent</div>\n        <p class=\"text-gray-500 mt-2\">Ihr Digitalisierungspartner für DMS-Lösungen</p>\n      </div>\n      \n      <div class=\"auth-tabs\">\n        <button \n          @click=\"switchMode(AUTH_MODES.LOGIN)\" \n          :class=\"['auth-tab', authMode === AUTH_MODES.LOGIN ? 'active' : '']\">\n          Anmelden\n        </button>\n        <button \n          @click=\"switchMode(AUTH_MODES.REGISTER)\" \n          :class=\"['auth-tab', authMode === AUTH_MODES.REGISTER ? 'active' : '']\">\n          Registrieren\n        </button>\n      </div>\n      \n      <!-- Login Form -->\n      <form v-if=\"authMode === AUTH_MODES.LOGIN\" @submit.prevent=\"submitForm\" class=\"auth-form\">\n        <div class=\"form-group\">\n          <label for=\"email\">E-Mail</label>\n          <input \n            v-model=\"form.email\" \n            type=\"email\" \n            id=\"email\" \n            class=\"nscale-input\" \n            placeholder=\"Ihre E-Mail-Adresse\" \n            required\n          />\n        </div>\n        <div class=\"form-group\">\n          <label for=\"password\">Passwort</label>\n          <input \n            v-model=\"form.password\" \n            type=\"password\" \n            id=\"password\" \n            class=\"nscale-input\" \n            placeholder=\"Ihr Passwort\" \n            required\n          />\n        </div>\n        <div class=\"mt-6\">\n          <button \n            type=\"submit\" \n            class=\"nscale-btn-primary w-full\" \n            :disabled=\"isButtonDisabled\">\n            <span v-if=\"loading\" class=\"loading-dots\">Anmelden</span>\n            <span v-else>Anmelden</span>\n          </button>\n        </div>\n        <div class=\"text-center mt-4\">\n          <a \n            href=\"#\" \n            class=\"text-link\" \n            @click.prevent=\"switchMode(AUTH_MODES.RESET)\">\n            Passwort vergessen?\n          </a>\n        </div>\n      </form>\n      \n      <!-- Register Form -->\n      <form v-if=\"authMode === AUTH_MODES.REGISTER\" @submit.prevent=\"submitForm\" class=\"auth-form\">\n        <div class=\"form-group\">\n          <label for=\"reg-email\">E-Mail</label>\n          <input \n            v-model=\"form.email\" \n            type=\"email\" \n            id=\"reg-email\" \n            class=\"nscale-input\" \n            placeholder=\"Ihre E-Mail-Adresse\" \n            required\n          />\n        </div>\n        <div class=\"form-group\">\n          <label for=\"reg-password\">Passwort</label>\n          <input \n            v-model=\"form.password\" \n            type=\"password\" \n            id=\"reg-password\" \n            class=\"nscale-input\" \n            placeholder=\"Ihr sicheres Passwort\" \n            required\n          />\n        </div>\n        <div class=\"mt-6\">\n          <button \n            type=\"submit\" \n            class=\"nscale-btn-primary w-full\" \n            :disabled=\"isButtonDisabled\">\n            <span v-if=\"loading\" class=\"loading-dots\">Registrieren</span>\n            <span v-else>Registrieren</span>\n          </button>\n        </div>\n      </form>\n      \n      <!-- Reset Password Form -->\n      <form v-if=\"authMode === AUTH_MODES.RESET\" @submit.prevent=\"submitForm\" class=\"auth-form\">\n        <div class=\"form-group\">\n          <label for=\"reset-email\">E-Mail</label>\n          <input \n            v-model=\"form.email\" \n            type=\"email\" \n            id=\"reset-email\" \n            class=\"nscale-input\" \n            placeholder=\"Ihre E-Mail-Adresse\" \n            required\n          />\n        </div>\n        <div class=\"mt-6\">\n          <button \n            type=\"submit\" \n            class=\"nscale-btn-primary w-full\" \n            :disabled=\"isButtonDisabled\">\n            <span v-if=\"loading\" class=\"loading-dots\">Passwort zurücksetzen</span>\n            <span v-else>Passwort zurücksetzen</span>\n          </button>\n        </div>\n        <div class=\"text-center mt-4\">\n          <a \n            href=\"#\" \n            class=\"text-link\" \n            @click.prevent=\"switchMode(AUTH_MODES.LOGIN)\">\n            Zurück zur Anmeldung\n          </a>\n        </div>\n      </form>\n      \n      <!-- Success & Error Messages -->\n      <div v-if=\"successMessage\" class=\"message success-message\">\n        {{ successMessage }}\n      </div>\n      <div v-if=\"errorMessage\" class=\"message error-message\">\n        {{ errorMessage }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.login-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  padding: 20px;\n  background-color: #f5f7fa;\n}\n\n.login-card {\n  width: 100%;\n  max-width: 420px;\n}\n\n.nscale-logo {\n  font-size: 1.75rem;\n  font-weight: 700;\n  color: #38a169;\n  margin-bottom: 0.5rem;\n}\n\n.text-center {\n  text-align: center;\n}\n\n.text-gray-500 {\n  color: #718096;\n}\n\n.auth-tabs {\n  display: flex;\n  border-bottom: 1px solid #e2e8f0;\n  margin-bottom: 24px;\n}\n\n.auth-tab {\n  flex: 1;\n  padding: 12px;\n  text-align: center;\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: #718096;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.auth-tab.active {\n  color: #38a169;\n  border-bottom: 2px solid #38a169;\n}\n\n.auth-form {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.form-group {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.form-group label {\n  font-weight: 500;\n  color: #4a5568;\n  font-size: 0.875rem;\n}\n\n.mt-4 {\n  margin-top: 16px;\n}\n\n.mt-6 {\n  margin-top: 24px;\n}\n\n.mb-8 {\n  margin-bottom: 32px;\n}\n\n.w-full {\n  width: 100%;\n}\n\n.text-link {\n  color: #38a169;\n  text-decoration: none;\n  font-size: 0.875rem;\n}\n\n.text-link:hover {\n  text-decoration: underline;\n}\n\n.message {\n  margin-top: 16px;\n  padding: 8px 12px;\n  border-radius: 4px;\n  font-size: 0.875rem;\n  text-align: center;\n}\n\n.success-message {\n  background-color: #c6f6d5;\n  color: #276749;\n}\n\n.error-message {\n  background-color: #fed7d7;\n  color: #c53030;\n}\n</style>"],"names":["router","useRouter","authStore","useAuthStore","AUTH_MODES","authMode","ref","form","reactive","successMessage","errorMessage","loading","isButtonDisabled","computed","handleLogin","error","handleRegister","handlePasswordReset","response","data","submitForm","switchMode","mode"],"mappings":"w1BAKA,MAAMA,EAASC,EAAS,EAClBC,EAAYC,EAAY,EAGxBC,EAAa,CACjB,MAAO,QACP,SAAU,WACV,MAAO,OACT,EAGMC,EAAWC,EAAIF,EAAW,KAAK,EAC/BG,EAAOC,EAAS,CACpB,MAAO,GACP,SAAU,EACZ,CAAC,EACKC,EAAiBH,EAAI,EAAE,EACvBI,EAAeJ,EAAI,EAAE,EACrBK,EAAUL,EAAI,EAAK,EAGnBM,EAAmBC,EAAS,IAC5BF,EAAQ,MAAc,GACtBN,EAAS,QAAUD,EAAW,MACzB,CAACG,EAAK,MAER,CAACA,EAAK,OAAS,CAACA,EAAK,QAC7B,EAGKO,EAAc,SAAY,CAC9BH,EAAQ,MAAQ,GAChBD,EAAa,MAAQ,GAErB,GAAI,CACc,MAAMR,EAAU,MAAMK,EAAK,MAAOA,EAAK,QAAQ,EAE7DP,EAAO,KAAK,CAAE,KAAM,MAAQ,CAAA,EAE5BU,EAAa,MAAQR,EAAU,OAAS,sBAE3C,OAAQa,EAAO,CACdL,EAAa,MAAQ,0CACrB,QAAQ,MAAM,eAAgBK,CAAK,CACvC,QAAY,CACRJ,EAAQ,MAAQ,EACpB,CACA,EAGMK,EAAiB,SAAY,CACjCL,EAAQ,MAAQ,GAChBD,EAAa,MAAQ,GAErB,GAAI,CAEF,MAAM,MAAM,qBAAsB,CAChC,OAAQ,OACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAU,CACnB,MAAOH,EAAK,MACZ,SAAUA,EAAK,QAChB,CAAA,CACF,CAAA,EAGDE,EAAe,MAAQ,uDACvBJ,EAAS,MAAQD,EAAW,MAG5BG,EAAK,SAAW,EACjB,OAAQQ,EAAO,CACdL,EAAa,MAAQ,+BACrB,QAAQ,MAAM,sBAAuBK,CAAK,CAC9C,QAAY,CACRJ,EAAQ,MAAQ,EACpB,CACA,EAGMM,EAAsB,SAAY,CACtCN,EAAQ,MAAQ,GAChBD,EAAa,MAAQ,GACrBD,EAAe,MAAQ,GAEvB,GAAI,CAEF,MAAMS,EAAW,MAAM,MAAM,2BAA4B,CACvD,OAAQ,OACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAU,CACnB,MAAOX,EAAK,KACb,CAAA,CACF,CAAA,EAED,GAAIW,EAAS,GAAI,CACf,MAAMC,EAAO,MAAMD,EAAS,KAAI,EAChCT,EAAe,MAAQU,EAAK,SAAW,uCAC7C,KAAW,CACL,MAAMA,EAAO,MAAMD,EAAS,KAAI,EAChCR,EAAa,MAAQS,EAAK,QAAU,+BAC1C,CACG,OAAQJ,EAAO,CACdL,EAAa,MAAQ,0CACrB,QAAQ,MAAM,wBAAyBK,CAAK,CAChD,QAAY,CACRJ,EAAQ,MAAQ,EACpB,CACA,EAGMS,EAAa,IAAM,CACnBf,EAAS,QAAUD,EAAW,MAChCU,EAAW,EACFT,EAAS,QAAUD,EAAW,SACvCY,EAAc,EACLX,EAAS,QAAUD,EAAW,OACvCa,EAAmB,CAEvB,EAGMI,EAAcC,GAAS,CAC3BjB,EAAS,MAAQiB,EACjBZ,EAAa,MAAQ,GACrBD,EAAe,MAAQ,EACzB"}