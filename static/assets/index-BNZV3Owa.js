const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-DhdpqIGU.js","assets/vue-vendor-CBOooRdR.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/HomeView-CqQTh5R2.css","assets/LoginView-BquCFFhR.js","assets/http-xsH4HHeE.js","assets/LoginView-CoEQjVGO.css","assets/AdminView-9bSIl8V7.js","assets/AdminView-CEOCTH3j.css","assets/ChatView-IJ1n2LqA.js","assets/ChatView-C4U9WdMw.css","assets/DocConverterView-DLZo__zO.js","assets/DocConverterView-BIp_CUZI.css","assets/SettingsView--j6C6dlW.js","assets/SettingsView-DRZ2X8Rz.css","assets/NotFoundView-X-2kCSCB.js","assets/NotFoundView-9X5DSU9W.css"])))=>i.map(i=>d[i]);
import{d as D,c as L,u as O,o as T,a as k,b as y,e as g,f as v,g as p,h as I,w as c,r as R,i as $,j as A,k as S,T as q,l as F,m as B,n as M,p as j,q as U}from"./vue-vendor-CBOooRdR.js";import{a as m}from"./http-xsH4HHeE.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function r(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(o){if(o.ep)return;o.ep=!0;const t=r(o);fetch(o.href,t)}})();const z=D("auth",{state:()=>({token:localStorage.getItem("token")||"",user:null,userRole:localStorage.getItem("userRole")||"user",loading:!1,error:null}),getters:{isAuthenticated:e=>!!e.token,isAdmin:e=>e.userRole==="admin"},actions:{async login(e,s){var r,i;this.loading=!0,this.error=null;try{const o=await m.post("/api/auth/login",{email:e,password:s});return this.token=o.data.token,this.userRole=o.data.user_role||"user",localStorage.setItem("token",this.token),localStorage.setItem("userRole",this.userRole),m.defaults.headers.common.Authorization=`Bearer ${this.token}`,!0}catch(o){return this.error=((i=(r=o.response)==null?void 0:r.data)==null?void 0:i.detail)||"Login fehlgeschlagen",!1}finally{this.loading=!1}},async logout(){this.token="",this.userRole="user",this.user=null,localStorage.removeItem("token"),localStorage.removeItem("userRole"),delete m.defaults.headers.common.Authorization},async loadUserData(){var e;if(this.token)try{const s=await m.get("/api/auth/user");this.user=s.data,this.userRole=s.data.role||"user",localStorage.setItem("userRole",this.userRole)}catch(s){((e=s.response)==null?void 0:e.status)===401&&this.logout()}},initAuth(){const e=localStorage.getItem("token"),s=localStorage.getItem("userRole");e&&(this.token=e,this.userRole=s||"user",m.defaults.headers.common.Authorization=`Bearer ${e}`,this.loadUserData())}}}),H=D("featureToggle",{state:()=>({features:{vueDocConverter:localStorage.getItem("feature_vueDocConverter")==="true"||!1,vueAdmin:localStorage.getItem("feature_vueAdmin")==="true"||!1,vueSettings:localStorage.getItem("feature_vueSettings")==="true"||!1,vueChat:localStorage.getItem("feature_vueChat")==="true"||!1},isDevelopmentMode:!1}),getters:{isDocConverterEnabled:e=>e.features.vueDocConverter,isAdminEnabled:e=>e.features.vueAdmin,isSettingsEnabled:e=>e.features.vueSettings,isChatEnabled:e=>e.features.vueChat},actions:{toggleFeature(e){e in this.features&&(this.features[e]=!this.features[e],localStorage.setItem(`feature_${e}`,this.features[e]))},enableFeature(e){e in this.features&&(this.features[e]=!0,localStorage.setItem(`feature_${e}`,"true"))},disableFeature(e){e in this.features&&(this.features[e]=!1,localStorage.setItem(`feature_${e}`,"false"))},enableAllFeatures(){Object.keys(this.features).forEach(e=>{this.features[e]=!0,localStorage.setItem(`feature_${e}`,"true")})},disableAllFeatures(){Object.keys(this.features).forEach(e=>{this.features[e]=!1,localStorage.setItem(`feature_${e}`,"false")})},detectDevelopmentMode(){this.isDevelopmentMode=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",this.isDevelopmentMode&&this.enableAllFeatures()},initFeatures(){this.detectDevelopmentMode(),Object.keys(this.features).forEach(e=>{const s=localStorage.getItem(`feature_${e}`);s!==null&&(this.features[e]=s==="true")})}}}),x={class:"app-container"},W={key:0,class:"main-header"},K={class:"main-nav"},G={class:"user-actions"},J={class:"main-content"},Q={key:1,class:"main-footer"},X={__name:"App",setup(e){$();const s=O(),r=z(),i=H();return L(()=>s.name==="settings"),T(()=>{r.initAuth(),i.initFeatures()}),(o,t)=>{const n=R("router-link"),a=R("router-view");return A(),k("div",x,[v(r).isAuthenticated?(A(),k("header",W,[t[6]||(t[6]=g("div",{class:"logo"},"nscale DMS Assistent",-1)),g("nav",K,[p(n,{to:"/",class:"nav-item"},{default:c(()=>t[1]||(t[1]=[S("Home")])),_:1}),p(n,{to:"/chat",class:"nav-item"},{default:c(()=>t[2]||(t[2]=[S("Chat")])),_:1}),p(n,{to:"/doc-converter",class:"nav-item"},{default:c(()=>t[3]||(t[3]=[S("Dokumentenkonverter")])),_:1}),v(r).isAdmin?(A(),I(n,{key:0,to:"/admin",class:"nav-item"},{default:c(()=>t[4]||(t[4]=[S("Admin")])),_:1})):y("",!0)]),g("div",G,[p(n,{to:"/settings",class:"nav-item"},{default:c(()=>t[5]||(t[5]=[S("Einstellungen")])),_:1}),g("button",{onClick:t[0]||(t[0]=(...f)=>v(r).logout&&v(r).logout(...f)),class:"logout-btn"},"Abmelden")])])):y("",!0),g("main",J,[p(a,null,{default:c(({Component:f})=>[p(q,{name:"fade",mode:"out-in"},{default:c(()=>[(A(),I(F(f)))]),_:2},1024)]),_:1})]),v(r).isAuthenticated?(A(),k("footer",Q,t[7]||(t[7]=[g("div",null,"Â© 2025 nscale DMS Assistent",-1)]))):y("",!0)])}}},Y="modulepreload",Z=function(e){return"/"+e},b={},d=function(s,r,i){let o=Promise.resolve();if(r&&r.length>0){let n=function(l){return Promise.all(l.map(h=>Promise.resolve(h).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),f=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=n(r.map(l=>{if(l=Z(l),l in b)return;b[l]=!0;const h=l.endsWith(".css"),_=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${_}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":Y,h||(u.as="script"),u.crossOrigin="",u.href=l,f&&u.setAttribute("nonce",f),document.head.appendChild(u),h)return new Promise((P,V)=>{u.addEventListener("load",P),u.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${l}`)))})}))}function t(n){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=n,window.dispatchEvent(a),!a.defaultPrevented)throw n}return o.then(n=>{for(const a of n||[])a.status==="rejected"&&t(a.reason);return s().catch(t)})},N=()=>d(()=>import("./HomeView-DhdpqIGU.js"),__vite__mapDeps([0,1,2,3])),ee=()=>d(()=>import("./LoginView-BquCFFhR.js"),__vite__mapDeps([4,1,2,5,6])),te=()=>d(()=>import("./AdminView-9bSIl8V7.js"),__vite__mapDeps([7,2,1,8])),oe=()=>d(()=>import("./ChatView-IJ1n2LqA.js"),__vite__mapDeps([9,1,2,10])),re=()=>d(()=>import("./DocConverterView-DLZo__zO.js"),__vite__mapDeps([11,2,1,5,12])),se=()=>d(()=>import("./SettingsView--j6C6dlW.js"),__vite__mapDeps([13,1,2,14])),ne=()=>d(()=>import("./NotFoundView-X-2kCSCB.js"),__vite__mapDeps([15,1,2,16])),ae=[{path:"/",name:"home",component:N,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:ee,meta:{requiresAuth:!1}},{path:"/admin",name:"admin",component:te,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/chat",name:"chat",component:oe,meta:{requiresAuth:!0}},{path:"/doc-converter",name:"doc-converter",component:re,meta:{requiresAuth:!0}},{path:"/settings",name:"settings",component:se,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:ne}],C=B({history:M("/"),routes:ae});C.beforeEach((e,s,r)=>{const i=localStorage.getItem("token"),o=localStorage.getItem("userRole")||"user";e.meta.requiresAuth&&!i?r({name:"login"}):e.meta.requiresAdmin&&o!=="admin"?r({name:"home"}):e.name==="login"&&i?r({name:"home"}):r()});const ie=j(),E=U(X);m.defaults.baseURL=window.location.origin;const w=localStorage.getItem("token");w&&(m.defaults.headers.common.Authorization=`Bearer ${w}`);E.config.errorHandler=(e,s,r)=>{console.error(`Error: ${e.toString()}
Info: ${r}`)};E.use(ie);E.use(C);E.mount("#app");export{H as a,z as u};
//# sourceMappingURL=index-BNZV3Owa.js.map
