{"version":3,"file":"SystemView.3a167790.js","sources":["../../../src/stores/systemStore.js","../../../src/components/admin/system/SystemStatus.vue","../../../src/components/admin/system/SystemLogs.vue","../../../src/views/admin/SystemView.vue"],"sourcesContent":["// stores/systemStore.js\nimport { defineStore } from 'pinia';\nimport axios from 'axios';\nimport { useAuthStore } from './authStore';\n\n/**\n * Store zur Verwaltung von Systemüberwachungsdaten\n * Enthält Funktionen zum Laden von Systemstatistiken, Dokumentenstatus und Konvertereinstellungen\n */\nexport const useSystemStore = defineStore('system', {\n  state: () => ({\n    // Systemstatistiken\n    stats: {\n      document_count: 0,\n      chunk_count: 0,\n      documents: {}\n    },\n\n    // Dokumentenkonverter-Status\n    converterStatus: {\n      available: false,\n      converters: {},\n      post_processing: false,\n      parallel_processing: false\n    },\n\n    // Neueste Konvertierungen\n    recentConversions: [],\n\n    // System-Logs\n    logs: [],\n\n    // Status-Flags\n    loading: {\n      stats: false,\n      converterStatus: false,\n      conversions: false,\n      logs: false\n    },\n    \n    // Fehlermeldungen\n    error: {\n      stats: null,\n      converterStatus: null,\n      conversions: null,\n      logs: null\n    },\n\n    // Intervall-IDs für automatische Aktualisierung\n    refreshIntervals: {\n      stats: null,\n      converterStatus: null\n    },\n\n    // Aktualisierungsintervall in Millisekunden (default: 30 Sekunden)\n    refreshInterval: 30000\n  }),\n\n  getters: {\n    /**\n     * Prüft, ob der Store eine ausreichende Berechtigung hat\n     */\n    hasAdminAccess: () => {\n      const authStore = useAuthStore();\n      return authStore.isAdmin;\n    },\n\n    /**\n     * Gibt die Gesamtanzahl der Dokumente zurück\n     */\n    totalDocuments: (state) => {\n      return state.stats.document_count || 0;\n    },\n\n    /**\n     * Gibt die Gesamtanzahl der Chunks zurück\n     */\n    totalChunks: (state) => {\n      return state.stats.chunk_count || 0;\n    },\n\n    /**\n     * Gibt die Dokumentenliste als Array zurück\n     */\n    documentList: (state) => {\n      const docs = state.stats.documents || {};\n      return Object.keys(docs).map(filename => ({\n        filename,\n        ...docs[filename]\n      }));\n    },\n\n    /**\n     * Gibt die verfügbaren Konvertertypen zurück\n     */\n    availableConverters: (state) => {\n      const converters = state.converterStatus.converters || {};\n      return Object.keys(converters)\n        .filter(type => converters[type])\n        .map(type => type.toUpperCase());\n    },\n\n    /**\n     * Prüft, ob der Dokumentenkonverter verfügbar ist\n     */\n    isConverterAvailable: (state) => {\n      return state.converterStatus.available || false;\n    }\n  },\n\n  actions: {\n    /**\n     * Lädt die Systemstatistiken vom Server\n     */\n    async loadStats() {\n      if (!this.hasAdminAccess) return;\n      \n      this.loading.stats = true;\n      this.error.stats = null;\n      \n      try {\n        const response = await axios.get('/api/admin/stats');\n        this.stats = response.data.stats || {\n          document_count: 0,\n          chunk_count: 0,\n          documents: {}\n        };\n      } catch (error) {\n        console.error('Fehler beim Laden der Systemstatistiken:', error);\n        this.error.stats = error.response?.data?.detail || 'Fehler beim Laden der Systemstatistiken';\n      } finally {\n        this.loading.stats = false;\n      }\n    },\n\n    /**\n     * Lädt den Status des Dokumentenkonverters vom Server\n     */\n    async loadConverterStatus() {\n      if (!this.hasAdminAccess) return;\n      \n      this.loading.converterStatus = true;\n      this.error.converterStatus = null;\n      \n      try {\n        const response = await axios.get('/api/admin/converter/status');\n        this.converterStatus = response.data || {\n          available: false,\n          converters: {},\n          post_processing: false,\n          parallel_processing: false\n        };\n      } catch (error) {\n        console.error('Fehler beim Laden des Konverterstatus:', error);\n        this.error.converterStatus = error.response?.data?.detail || 'Fehler beim Laden des Konverterstatus';\n      } finally {\n        this.loading.converterStatus = false;\n      }\n    },\n\n    /**\n     * Lädt die letzten Konvertierungen\n     */\n    async loadRecentConversions() {\n      if (!this.hasAdminAccess) return;\n      \n      this.loading.conversions = true;\n      this.error.conversions = null;\n      \n      try {\n        const response = await axios.get('/api/admin/conversions/recent');\n        this.recentConversions = response.data.conversions || [];\n      } catch (error) {\n        console.error('Fehler beim Laden der Konvertierungshistorie:', error);\n        this.error.conversions = error.response?.data?.detail || 'Fehler beim Laden der Konvertierungshistorie';\n      } finally {\n        this.loading.conversions = false;\n      }\n    },\n\n    /**\n     * Löscht den LLM-Cache\n     */\n    async clearLLMCache() {\n      if (!this.hasAdminAccess) return null;\n      \n      try {\n        const response = await axios.post('/api/admin/clear-cache');\n        return response.data;\n      } catch (error) {\n        console.error('Fehler beim Löschen des LLM-Cache:', error);\n        throw new Error(error.response?.data?.detail || 'Fehler beim Löschen des LLM-Cache');\n      }\n    },\n\n    /**\n     * Löscht den Embedding-Cache\n     */\n    async clearEmbeddingCache() {\n      if (!this.hasAdminAccess) return null;\n      \n      try {\n        const response = await axios.post('/api/admin/clear-embedding-cache');\n        return response.data;\n      } catch (error) {\n        console.error('Fehler beim Löschen des Embedding-Cache:', error);\n        throw new Error(error.response?.data?.detail || 'Fehler beim Löschen des Embedding-Cache');\n      }\n    },\n\n    /**\n     * Lädt die Dokumente neu\n     */\n    async reloadDocuments() {\n      if (!this.hasAdminAccess) return null;\n      \n      try {\n        const response = await axios.post('/api/admin/reload-documents');\n        // Nach erfolgreichem Neuladen aktualisiere die Statistiken\n        if (response.data.success) {\n          await this.loadStats();\n        }\n        return response.data;\n      } catch (error) {\n        console.error('Fehler beim Neuladen der Dokumente:', error);\n        throw new Error(error.response?.data?.detail || 'Fehler beim Neuladen der Dokumente');\n      }\n    },\n\n    /**\n     * Startet die automatische Aktualisierung der Daten\n     */\n    startAutoRefresh() {\n      if (!this.hasAdminAccess) return;\n\n      // Lösche existierende Intervalle\n      this.stopAutoRefresh();\n      \n      // Starte neue Intervalle\n      this.refreshIntervals.stats = setInterval(() => {\n        this.loadStats();\n      }, this.refreshInterval);\n      \n      this.refreshIntervals.converterStatus = setInterval(() => {\n        this.loadConverterStatus();\n      }, this.refreshInterval);\n    },\n\n    /**\n     * Stoppt die automatische Aktualisierung der Daten\n     */\n    stopAutoRefresh() {\n      // Lösche alle laufenden Intervalle\n      Object.keys(this.refreshIntervals).forEach(key => {\n        if (this.refreshIntervals[key]) {\n          clearInterval(this.refreshIntervals[key]);\n          this.refreshIntervals[key] = null;\n        }\n      });\n    },\n\n    /**\n     * Setzt das Aktualisierungsintervall\n     * @param {number} interval - Intervall in Millisekunden\n     */\n    setRefreshInterval(interval) {\n      if (typeof interval === 'number' && interval >= 5000) {\n        this.refreshInterval = interval;\n        // Neustarten der Intervalle mit neuem Wert, wenn sie laufen\n        if (this.refreshIntervals.stats || this.refreshIntervals.converterStatus) {\n          this.startAutoRefresh();\n        }\n      }\n    },\n\n    /**\n     * Laden aller Systemdaten auf einmal\n     */\n    async loadAllData() {\n      if (!this.hasAdminAccess) return;\n      \n      try {\n        await Promise.all([\n          this.loadStats(),\n          this.loadConverterStatus(),\n          this.loadRecentConversions()\n        ]);\n      } catch (error) {\n        console.error('Fehler beim Laden der Systemdaten:', error);\n      }\n    }\n  }\n});","<template>\n  <div class=\"system-status\">\n    <!-- Übersichtskarten -->\n    <div class=\"stats-cards\">\n      <div class=\"stat-card\">\n        <div class=\"stat-icon documents-icon\">\n          <i class=\"fas fa-file-alt\"></i>\n        </div>\n        <div class=\"stat-info\">\n          <h2>{{ systemStore.totalDocuments }}</h2>\n          <p>Dokumente</p>\n        </div>\n        <div class=\"stat-actions\">\n          <button \n            @click=\"reloadDocuments\" \n            class=\"action-btn\" \n            :class=\"{ 'loading': reloadingDocs }\"\n            title=\"Dokumente neu laden\"\n          >\n            <i class=\"fas fa-sync-alt\"></i>\n          </button>\n        </div>\n      </div>\n      \n      <div class=\"stat-card\">\n        <div class=\"stat-icon chunks-icon\">\n          <i class=\"fas fa-puzzle-piece\"></i>\n        </div>\n        <div class=\"stat-info\">\n          <h2>{{ systemStore.totalChunks }}</h2>\n          <p>Chunks</p>\n        </div>\n      </div>\n      \n      <div class=\"stat-card\">\n        <div class=\"stat-icon converters-icon\">\n          <i class=\"fas fa-exchange-alt\"></i>\n        </div>\n        <div class=\"stat-info\">\n          <h2>{{ systemStore.availableConverters.length }}</h2>\n          <p>Konverter</p>\n          <div class=\"converter-badges\">\n            <span \n              v-for=\"converter in systemStore.availableConverters\" \n              :key=\"converter\" \n              class=\"converter-badge\"\n            >\n              {{ converter }}\n            </span>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"stat-card\">\n        <div class=\"stat-icon cache-icon\">\n          <i class=\"fas fa-database\"></i>\n        </div>\n        <div class=\"stat-info\">\n          <h2>Cache</h2>\n          <p>\n            <span v-if=\"systemStore.converterStatus.post_processing\" class=\"feature-badge active\">Post-Processing</span>\n            <span v-else class=\"feature-badge\">Post-Processing</span>\n            \n            <span v-if=\"systemStore.converterStatus.parallel_processing\" class=\"feature-badge active\">Parallel</span>\n            <span v-else class=\"feature-badge\">Parallel</span>\n          </p>\n        </div>\n        <div class=\"stat-actions\">\n          <button \n            @click=\"clearCaches\" \n            class=\"action-btn\" \n            :class=\"{ 'loading': clearingCache }\"\n            title=\"Alle Caches leeren\"\n          >\n            <i class=\"fas fa-trash-alt\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Dokumente-Tabelle -->\n    <div class=\"document-section\">\n      <div class=\"section-header\">\n        <h3>Dokumente im System</h3>\n        <div class=\"controls\">\n          <div class=\"search-box\">\n            <input \n              type=\"text\" \n              v-model=\"searchQuery\" \n              placeholder=\"Suche nach Dateinamen...\"\n            />\n            <i class=\"fas fa-search\"></i>\n          </div>\n          \n          <div class=\"sort-control\">\n            <select v-model=\"sortField\">\n              <option value=\"filename\">Dateiname</option>\n              <option value=\"size\">Dateigröße</option>\n              <option value=\"modified\">Bearbeitet</option>\n              <option value=\"chunks\">Chunks</option>\n              <option value=\"total_tokens\">Tokens</option>\n            </select>\n            <button @click=\"toggleSortDirection\" class=\"sort-btn\">\n              <i :class=\"['fas', sortDirection === 'asc' ? 'fa-sort-up' : 'fa-sort-down']\"></i>\n            </button>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Loading-State -->\n      <div v-if=\"systemStore.loading.stats\" class=\"loading-container\">\n        <div class=\"loader\"></div>\n        <span>Lade Systemdaten...</span>\n      </div>\n      \n      <!-- Error-State -->\n      <div v-else-if=\"systemStore.error.stats\" class=\"error-notification\">\n        <i class=\"fas fa-exclamation-triangle\"></i>\n        <p>{{ systemStore.error.stats }}</p>\n        <button @click=\"systemStore.loadStats\" class=\"retry-btn\">\n          Erneut versuchen\n        </button>\n      </div>\n      \n      <!-- Empty-State -->\n      <div v-else-if=\"filteredDocuments.length === 0\" class=\"empty-state\">\n        <i class=\"fas fa-file-excel\"></i>\n        <p v-if=\"searchQuery\">Keine Dokumente gefunden, die \"{{ searchQuery }}\" enthalten.</p>\n        <p v-else>Keine Dokumente vorhanden. Konvertieren Sie Dokumente, um sie hier zu sehen.</p>\n      </div>\n      \n      <!-- Dokumenten-Tabelle -->\n      <div v-else class=\"documents-table-container\">\n        <table class=\"documents-table\">\n          <thead>\n            <tr>\n              <th>Dateiname</th>\n              <th>Größe</th>\n              <th>Letzte Änderung</th>\n              <th>Chunks</th>\n              <th>Tokens</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"doc in filteredDocuments\" :key=\"doc.filename\">\n              <td class=\"filename-cell\">{{ doc.filename }}</td>\n              <td>{{ formatFileSize(doc.size) }}</td>\n              <td>{{ doc.modified }}</td>\n              <td>{{ doc.chunks }}</td>\n              <td>{{ formatNumber(doc.total_tokens) }}</td>\n            </tr>\n          </tbody>\n          <tfoot v-if=\"filteredDocuments.length > 0\">\n            <tr>\n              <td><strong>Gesamt</strong></td>\n              <td>{{ formatFileSize(totalSize) }}</td>\n              <td>-</td>\n              <td><strong>{{ totalChunks }}</strong></td>\n              <td><strong>{{ formatNumber(totalTokens) }}</strong></td>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n    </div>\n    \n    <!-- Refresh-Steuerung -->\n    <div class=\"refresh-controls\">\n      <div class=\"refresh-toggle\">\n        <input \n          type=\"checkbox\" \n          id=\"auto-refresh\" \n          v-model=\"autoRefresh\" \n          @change=\"toggleAutoRefresh\"\n        />\n        <label for=\"auto-refresh\">Automatisch aktualisieren</label>\n      </div>\n      \n      <div v-if=\"autoRefresh\" class=\"refresh-interval\">\n        <label for=\"refresh-interval\">Intervall (Sekunden):</label>\n        <select \n          id=\"refresh-interval\" \n          v-model=\"refreshInterval\" \n          @change=\"updateRefreshInterval\"\n        >\n          <option value=\"5000\">5</option>\n          <option value=\"10000\">10</option>\n          <option value=\"30000\">30</option>\n          <option value=\"60000\">60</option>\n          <option value=\"300000\">300</option>\n        </select>\n      </div>\n      \n      <button @click=\"refreshData\" class=\"refresh-btn\" :disabled=\"isLoading\">\n        <i :class=\"['fas', 'fa-sync-alt', { 'fa-spin': isLoading }]\"></i>\n        Aktualisieren\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onBeforeUnmount, watch } from 'vue';\nimport { useSystemStore } from '@/stores/systemStore';\n\nconst systemStore = useSystemStore();\n\n// State für UI\nconst searchQuery = ref('');\nconst sortField = ref('filename');\nconst sortDirection = ref('asc');\nconst autoRefresh = ref(false);\nconst refreshInterval = ref(30000);\nconst reloadingDocs = ref(false);\nconst clearingCache = ref(false);\n\n// Computed properties\nconst filteredDocuments = computed(() => {\n  let docs = systemStore.documentList;\n  \n  // Filtern nach Suchbegriff\n  if (searchQuery.value) {\n    const query = searchQuery.value.toLowerCase();\n    docs = docs.filter(doc => \n      doc.filename.toLowerCase().includes(query)\n    );\n  }\n  \n  // Sortieren nach ausgewähltem Feld\n  docs.sort((a, b) => {\n    let aValue = a[sortField.value];\n    let bValue = b[sortField.value];\n    \n    // Spezialbehandlung für numerische Felder\n    if (['size', 'chunks', 'total_tokens'].includes(sortField.value)) {\n      aValue = Number(aValue) || 0;\n      bValue = Number(bValue) || 0;\n    }\n    \n    if (sortDirection.value === 'asc') {\n      return aValue > bValue ? 1 : -1;\n    } else {\n      return aValue < bValue ? 1 : -1;\n    }\n  });\n  \n  return docs;\n});\n\n// Summen berechnen\nconst totalSize = computed(() => {\n  return filteredDocuments.value.reduce((total, doc) => total + (doc.size || 0), 0);\n});\n\nconst totalChunks = computed(() => {\n  return filteredDocuments.value.reduce((total, doc) => total + (doc.chunks || 0), 0);\n});\n\nconst totalTokens = computed(() => {\n  return filteredDocuments.value.reduce((total, doc) => total + (doc.total_tokens || 0), 0);\n});\n\nconst isLoading = computed(() => {\n  return systemStore.loading.stats || \n         systemStore.loading.converterStatus || \n         reloadingDocs.value || \n         clearingCache.value;\n});\n\n// Methods\nconst toggleSortDirection = () => {\n  sortDirection.value = sortDirection.value === 'asc' ? 'desc' : 'asc';\n};\n\nconst formatFileSize = (bytes) => {\n  if (bytes === undefined || bytes === null) return '-';\n  \n  if (bytes < 1024) return bytes + ' B';\n  else if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(2) + ' KB';\n  else if (bytes < 1024 * 1024 * 1024) return (bytes / (1024 * 1024)).toFixed(2) + ' MB';\n  else return (bytes / (1024 * 1024 * 1024)).toFixed(2) + ' GB';\n};\n\nconst formatNumber = (num) => {\n  if (num === undefined || num === null) return '-';\n  return num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n};\n\nconst refreshData = () => {\n  systemStore.loadAllData();\n};\n\nconst toggleAutoRefresh = () => {\n  if (autoRefresh.value) {\n    systemStore.startAutoRefresh();\n  } else {\n    systemStore.stopAutoRefresh();\n  }\n};\n\nconst updateRefreshInterval = () => {\n  systemStore.setRefreshInterval(Number(refreshInterval.value));\n};\n\nconst reloadDocuments = async () => {\n  try {\n    reloadingDocs.value = true;\n    await systemStore.reloadDocuments();\n  } catch (error) {\n    console.error('Fehler beim Neuladen der Dokumente:', error);\n  } finally {\n    reloadingDocs.value = false;\n  }\n};\n\nconst clearCaches = async () => {\n  try {\n    clearingCache.value = true;\n    await systemStore.clearLLMCache();\n    await systemStore.clearEmbeddingCache();\n    // Daten nach dem Löschen des Cache neu laden\n    await refreshData();\n  } catch (error) {\n    console.error('Fehler beim Löschen der Caches:', error);\n  } finally {\n    clearingCache.value = false;\n  }\n};\n\n// Lifecycle hooks\nonMounted(() => {\n  // Initialer Datenabruf\n  refreshData();\n});\n\nonBeforeUnmount(() => {\n  // Automatische Aktualisierung stoppen bei Komponentenzerstörung\n  systemStore.stopAutoRefresh();\n});\n\n// Watcher\nwatch(() => autoRefresh.value, (newValue) => {\n  if (newValue) {\n    systemStore.setRefreshInterval(Number(refreshInterval.value));\n    systemStore.startAutoRefresh();\n  } else {\n    systemStore.stopAutoRefresh();\n  }\n});\n</script>\n\n<style scoped>\n.system-status {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n\n.stats-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1rem;\n}\n\n.stat-card {\n  background-color: #ffffff;\n  border-radius: 0.5rem;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  padding: 1.5rem;\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n\n.stat-icon {\n  width: 3rem;\n  height: 3rem;\n  border-radius: 9999px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.25rem;\n  margin-right: 1.25rem;\n}\n\n.documents-icon {\n  background-color: #ebf5ff;\n  color: #3b82f6;\n}\n\n.chunks-icon {\n  background-color: #f0fdf4;\n  color: #22c55e;\n}\n\n.converters-icon {\n  background-color: #fef3c7;\n  color: #f59e0b;\n}\n\n.cache-icon {\n  background-color: #ede9fe;\n  color: #8b5cf6;\n}\n\n.stat-info h2 {\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: #1e293b;\n  margin: 0 0 0.25rem 0;\n}\n\n.stat-info p {\n  font-size: 0.875rem;\n  color: #64748b;\n  margin: 0;\n}\n\n.stat-actions {\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n}\n\n.action-btn {\n  background: none;\n  border: none;\n  color: #64748b;\n  cursor: pointer;\n  width: 2rem;\n  height: 2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 0.25rem;\n  transition: all 0.2s;\n}\n\n.action-btn:hover {\n  background-color: #f1f5f9;\n  color: #1e293b;\n}\n\n.action-btn.loading {\n  pointer-events: none;\n}\n\n.action-btn.loading i {\n  animation: spin 1s linear infinite;\n}\n\n.converter-badges {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.25rem;\n  margin-top: 0.5rem;\n}\n\n.converter-badge {\n  background-color: #f8fafc;\n  color: #475569;\n  font-size: 0.625rem;\n  padding: 0.125rem 0.375rem;\n  border-radius: 0.25rem;\n  border: 1px solid #e2e8f0;\n}\n\n.feature-badge {\n  display: inline-block;\n  padding: 0.125rem 0.375rem;\n  font-size: 0.625rem;\n  border-radius: 0.25rem;\n  background-color: #f1f5f9;\n  color: #64748b;\n  margin-right: 0.25rem;\n}\n\n.feature-badge.active {\n  background-color: #dbeafe;\n  color: #1e40af;\n}\n\n.document-section {\n  background-color: #ffffff;\n  border-radius: 0.5rem;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  padding: 1.5rem;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  flex-wrap: wrap;\n  gap: 1rem;\n}\n\n.section-header h3 {\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #1e293b;\n  margin: 0;\n}\n\n.controls {\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n}\n\n.search-box {\n  position: relative;\n}\n\n.search-box input {\n  padding: 0.5rem 2.5rem 0.5rem 0.75rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 0.375rem;\n  font-size: 0.875rem;\n  color: #1e293b;\n  width: 200px;\n}\n\n.search-box i {\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #94a3b8;\n  pointer-events: none;\n}\n\n.sort-control {\n  display: flex;\n  align-items: center;\n}\n\n.sort-control select {\n  padding: 0.5rem 0.75rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 0.375rem 0 0 0.375rem;\n  font-size: 0.875rem;\n  color: #1e293b;\n  background-color: #ffffff;\n}\n\n.sort-btn {\n  background-color: #f8fafc;\n  border: 1px solid #e2e8f0;\n  border-left: none;\n  border-radius: 0 0.375rem 0.375rem 0;\n  color: #64748b;\n  width: 2rem;\n  height: 2.375rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n}\n\n.sort-btn:hover {\n  background-color: #f1f5f9;\n}\n\n.loading-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem;\n  color: #64748b;\n}\n\n.loader {\n  border: 3px solid #f3f3f3;\n  border-top: 3px solid #3b82f6;\n  border-radius: 50%;\n  width: 2rem;\n  height: 2rem;\n  animation: spin 1s linear infinite;\n  margin-bottom: 1rem;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.error-notification {\n  margin: 1.5rem 0;\n  padding: 1rem;\n  background-color: #fee2e2;\n  border-left: 4px solid #ef4444;\n  color: #b91c1c;\n  border-radius: 0.375rem;\n  display: flex;\n  align-items: center;\n}\n\n.error-notification i {\n  margin-right: 0.75rem;\n}\n\n.error-notification p {\n  flex: 1;\n  margin: 0;\n}\n\n.retry-btn {\n  background-color: transparent;\n  border: 1px solid currentColor;\n  color: #b91c1c;\n  padding: 0.25rem 0.75rem;\n  border-radius: 0.25rem;\n  font-size: 0.75rem;\n  cursor: pointer;\n}\n\n.retry-btn:hover {\n  background-color: rgba(239, 68, 68, 0.1);\n}\n\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem;\n  text-align: center;\n  color: #64748b;\n}\n\n.empty-state i {\n  font-size: 3rem;\n  opacity: 0.5;\n  margin-bottom: 1rem;\n}\n\n.documents-table-container {\n  overflow-x: auto;\n  margin-top: 1rem;\n}\n\n.documents-table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 0.875rem;\n  color: #334155;\n}\n\n.documents-table th {\n  background-color: #f8fafc;\n  padding: 0.75rem 1rem;\n  text-align: left;\n  font-weight: 600;\n  color: #475569;\n  border-bottom: 1px solid #e2e8f0;\n}\n\n.documents-table td {\n  padding: 0.75rem 1rem;\n  border-bottom: 1px solid #e2e8f0;\n}\n\n.documents-table tfoot td {\n  background-color: #f8fafc;\n  font-weight: 500;\n  color: #475569;\n}\n\n.filename-cell {\n  max-width: 300px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.refresh-controls {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  gap: 1rem;\n  margin-top: 1rem;\n}\n\n.refresh-toggle {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.refresh-toggle label {\n  font-size: 0.875rem;\n  color: #475569;\n}\n\n.refresh-interval {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  color: #475569;\n}\n\n.refresh-interval select {\n  padding: 0.25rem 0.5rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 0.25rem;\n  font-size: 0.875rem;\n  color: #1e293b;\n}\n\n.refresh-btn {\n  padding: 0.5rem 1rem;\n  background-color: #3b82f6;\n  color: white;\n  border: none;\n  border-radius: 0.375rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.refresh-btn:hover:not(:disabled) {\n  background-color: #2563eb;\n}\n\n.refresh-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.refresh-btn i {\n  font-size: 0.875rem;\n}\n\n/* Dark Mode Support */\n:global(.theme-dark) .stat-card,\n:global(.theme-dark) .document-section {\n  background-color: #1e1e1e;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n}\n\n:global(.theme-dark) .stat-info h2 {\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .stat-info p {\n  color: #aaa;\n}\n\n:global(.theme-dark) .section-header h3 {\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .documents-icon {\n  background-color: rgba(59, 130, 246, 0.2);\n}\n\n:global(.theme-dark) .chunks-icon {\n  background-color: rgba(34, 197, 94, 0.2);\n}\n\n:global(.theme-dark) .converters-icon {\n  background-color: rgba(245, 158, 11, 0.2);\n}\n\n:global(.theme-dark) .cache-icon {\n  background-color: rgba(139, 92, 246, 0.2);\n}\n\n:global(.theme-dark) .converter-badge {\n  background-color: #2a2a2a;\n  color: #aaa;\n  border-color: #444;\n}\n\n:global(.theme-dark) .feature-badge {\n  background-color: #333;\n  color: #aaa;\n}\n\n:global(.theme-dark) .feature-badge.active {\n  background-color: rgba(29, 78, 216, 0.4);\n  color: #93c5fd;\n}\n\n:global(.theme-dark) .search-box input,\n:global(.theme-dark) .sort-control select {\n  background-color: #252525;\n  border-color: #444;\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .sort-btn {\n  background-color: #252525;\n  border-color: #444;\n  color: #aaa;\n}\n\n:global(.theme-dark) .sort-btn:hover {\n  background-color: #333;\n}\n\n:global(.theme-dark) .documents-table th,\n:global(.theme-dark) .documents-table tfoot td {\n  background-color: #252525;\n  color: #e0e0e0;\n  border-bottom-color: #444;\n}\n\n:global(.theme-dark) .documents-table td {\n  border-bottom-color: #444;\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .refresh-toggle label,\n:global(.theme-dark) .refresh-interval {\n  color: #aaa;\n}\n\n:global(.theme-dark) .refresh-interval select {\n  background-color: #252525;\n  border-color: #444;\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .action-btn {\n  color: #aaa;\n}\n\n:global(.theme-dark) .action-btn:hover {\n  background-color: #333;\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .refresh-btn {\n  background-color: #2563eb;\n}\n\n:global(.theme-dark) .refresh-btn:hover:not(:disabled) {\n  background-color: #1d4ed8;\n}\n\n:global(.theme-dark) .error-notification {\n  background-color: rgba(239, 68, 68, 0.15);\n  border-left-color: #ef4444;\n  color: #fca5a5;\n}\n\n:global(.theme-dark) .retry-btn {\n  color: #fca5a5;\n}\n\n:global(.theme-dark) .retry-btn:hover {\n  background-color: rgba(239, 68, 68, 0.2);\n}\n\n:global(.theme-dark) .empty-state {\n  color: #aaa;\n}\n\n:global(.theme-dark) .loading-container {\n  color: #aaa;\n}\n\n:global(.theme-dark) .loader {\n  border-color: #444;\n  border-top-color: #3b82f6;\n}\n\n/* Contrast Mode */\n:global(.theme-contrast) .stat-card,\n:global(.theme-contrast) .document-section {\n  background-color: #000;\n  border: 2px solid #ffeb3b;\n  box-shadow: none;\n}\n\n:global(.theme-contrast) .stat-icon {\n  background-color: #ffeb3b;\n  color: #000;\n}\n\n:global(.theme-contrast) .stat-info h2,\n:global(.theme-contrast) .section-header h3 {\n  color: #ffeb3b;\n}\n\n:global(.theme-contrast) .stat-info p,\n:global(.theme-contrast) .refresh-toggle label,\n:global(.theme-contrast) .refresh-interval {\n  color: #fff;\n}\n\n:global(.theme-contrast) .documents-table th,\n:global(.theme-contrast) .documents-table tfoot td {\n  background-color: #ffeb3b;\n  color: #000;\n  border-bottom-color: #ffeb3b;\n}\n\n:global(.theme-contrast) .documents-table td {\n  border-bottom-color: #ffeb3b;\n  color: #fff;\n}\n\n:global(.theme-contrast) .converter-badge,\n:global(.theme-contrast) .feature-badge {\n  background-color: #000;\n  color: #ffeb3b;\n  border: 1px solid #ffeb3b;\n}\n\n:global(.theme-contrast) .feature-badge.active {\n  background-color: #ffeb3b;\n  color: #000;\n}\n\n:global(.theme-contrast) .search-box input,\n:global(.theme-contrast) .sort-control select,\n:global(.theme-contrast) .refresh-interval select {\n  background-color: #000;\n  border-color: #ffeb3b;\n  color: #fff;\n}\n\n:global(.theme-contrast) .sort-btn {\n  background-color: #000;\n  border-color: #ffeb3b;\n  color: #ffeb3b;\n}\n\n:global(.theme-contrast) .action-btn {\n  color: #ffeb3b;\n}\n\n:global(.theme-contrast) .action-btn:hover {\n  background-color: #ffeb3b;\n  color: #000;\n}\n\n:global(.theme-contrast) .refresh-btn {\n  background-color: #ffeb3b;\n  color: #000;\n  border: 2px solid #ffeb3b;\n}\n\n:global(.theme-contrast) .refresh-btn:hover:not(:disabled) {\n  background-color: #000;\n  color: #ffeb3b;\n}\n\n:global(.theme-contrast) .error-notification {\n  background-color: #000;\n  border: 2px solid #f00;\n  color: #f00;\n}\n\n:global(.theme-contrast) .retry-btn {\n  color: #f00;\n  border-color: #f00;\n}\n\n:global(.theme-contrast) .retry-btn:hover {\n  background-color: #f00;\n  color: #000;\n}\n\n:global(.theme-contrast) .empty-state,\n:global(.theme-contrast) .loading-container {\n  color: #fff;\n}\n\n:global(.theme-contrast) .loader {\n  border-color: #ffeb3b;\n  border-top-color: #fff;\n}\n\n/* Responsive adjustments */\n@media (max-width: 768px) {\n  .section-header {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  \n  .controls {\n    width: 100%;\n    flex-wrap: wrap;\n  }\n  \n  .search-box {\n    width: 100%;\n  }\n  \n  .search-box input {\n    width: 100%;\n  }\n  \n  .refresh-controls {\n    flex-wrap: wrap;\n    justify-content: flex-start;\n  }\n  \n  .documents-table th:nth-child(2),\n  .documents-table td:nth-child(2),\n  .documents-table th:nth-child(3),\n  .documents-table td:nth-child(3) {\n    display: none;\n  }\n}\n\n@media (max-width: 576px) {\n  .documents-table th:nth-child(5),\n  .documents-table td:nth-child(5) {\n    display: none;\n  }\n}\n</style>","<template>\n  <div class=\"system-logs\">\n    <div class=\"controls-panel\">\n      <div class=\"log-filters\">\n        <div class=\"log-type-filter\">\n          <label for=\"log-type\">Protokolltyp:</label>\n          <select id=\"log-type\" v-model=\"logType\">\n            <option value=\"all\">Alle Protokolle</option>\n            <option value=\"application\">Anwendung</option>\n            <option value=\"conversion\">Konvertierungen</option>\n            <option value=\"error\">Fehler</option>\n            <option value=\"auth\">Authentifizierung</option>\n          </select>\n        </div>\n        \n        <div class=\"date-range-filter\">\n          <label for=\"date-range\">Zeitraum:</label>\n          <select id=\"date-range\" v-model=\"dateRange\">\n            <option value=\"1h\">Letzte Stunde</option>\n            <option value=\"6h\">Letzte 6 Stunden</option>\n            <option value=\"24h\">Letzter Tag</option>\n            <option value=\"7d\">Letzte Woche</option>\n            <option value=\"30d\">Letzter Monat</option>\n          </select>\n        </div>\n        \n        <div class=\"search-box\">\n          <input \n            type=\"text\" \n            v-model=\"searchQuery\" \n            placeholder=\"Suche in Protokollen...\"\n          />\n          <i class=\"fas fa-search\"></i>\n        </div>\n      </div>\n      \n      <div class=\"log-actions\">\n        <button @click=\"refreshLogs\" class=\"refresh-btn\" :disabled=\"loading\">\n          <i :class=\"['fas', 'fa-sync-alt', { 'fa-spin': loading }]\"></i>\n          Aktualisieren\n        </button>\n        <button @click=\"downloadLogs\" class=\"download-btn\" :disabled=\"!hasLogs\">\n          <i class=\"fas fa-download\"></i>\n          Exportieren\n        </button>\n      </div>\n    </div>\n    \n    <!-- Log-Display -->\n    <div class=\"log-display\">\n      <!-- Log-Header mit Statistiken -->\n      <div class=\"log-stats\">\n        <div class=\"log-stat\">\n          <i class=\"fas fa-file-alt\"></i>\n          <span>{{ logCount }} Einträge</span>\n        </div>\n        <div class=\"log-stat\">\n          <i class=\"fas fa-exclamation-triangle\"></i>\n          <span>{{ errorCount }} Fehler</span>\n        </div>\n        <div class=\"log-stat\">\n          <i class=\"fas fa-clock\"></i>\n          <span>{{ dateRangeText }}</span>\n        </div>\n      </div>\n      \n      <!-- Log-Tabelle -->\n      <div class=\"log-table-container\">\n        <!-- Loading-State -->\n        <div v-if=\"loading\" class=\"loading-container\">\n          <div class=\"loader\"></div>\n          <span>Lade Protokolldaten...</span>\n        </div>\n        \n        <!-- Empty-State -->\n        <div v-else-if=\"!hasLogs\" class=\"empty-state\">\n          <i class=\"fas fa-clipboard-list\"></i>\n          <p v-if=\"searchQuery\">Keine Protokolle gefunden, die \"{{ searchQuery }}\" enthalten.</p>\n          <p v-else-if=\"error\">Fehler beim Laden der Protokolle: {{ error }}</p>\n          <p v-else>Keine Protokolleinträge im gewählten Zeitraum gefunden.</p>\n          <button v-if=\"error\" @click=\"refreshLogs\" class=\"retry-btn\">\n            Erneut versuchen\n          </button>\n        </div>\n        \n        <!-- Log-Tabelle -->\n        <table v-else class=\"log-table\">\n          <thead>\n            <tr>\n              <th class=\"timestamp-col\">Zeitstempel</th>\n              <th class=\"level-col\">Level</th>\n              <th class=\"module-col\">Modul</th>\n              <th class=\"message-col\">Nachricht</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr \n              v-for=\"(log, index) in filteredLogs\" \n              :key=\"index\" \n              :class=\"[`log-level-${log.level.toLowerCase()}`, { 'expanded': expandedLogs.includes(index) }]\"\n              @click=\"toggleLogExpansion(index)\"\n            >\n              <td class=\"timestamp-col\">{{ formatTimestamp(log.timestamp) }}</td>\n              <td class=\"level-col\">\n                <span class=\"log-level\" :class=\"`log-level-${log.level.toLowerCase()}`\">\n                  {{ log.level }}\n                </span>\n              </td>\n              <td class=\"module-col\">{{ log.module }}</td>\n              <td class=\"message-col\">\n                <div class=\"log-message\">\n                  {{ log.message }}\n                </div>\n                <div v-if=\"log.details && expandedLogs.includes(index)\" class=\"log-details\">\n                  <pre>{{ log.details }}</pre>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      \n      <!-- Pagination -->\n      <div v-if=\"hasLogs\" class=\"pagination\">\n        <button \n          @click=\"prevPage\" \n          class=\"page-btn\" \n          :disabled=\"currentPage === 1\"\n        >\n          <i class=\"fas fa-chevron-left\"></i>\n        </button>\n        \n        <span class=\"page-info\">\n          Seite {{ currentPage }} von {{ totalPages }}\n        </span>\n        \n        <button \n          @click=\"nextPage\" \n          class=\"page-btn\" \n          :disabled=\"currentPage === totalPages\"\n        >\n          <i class=\"fas fa-chevron-right\"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted } from 'vue';\n\n// Mock-Daten für Protokolleinträge\n// Diese würden normalerweise vom Backend abgerufen werden\nconst mockLogs = [\n  {\n    timestamp: Date.now() - 5 * 60 * 1000,\n    level: 'INFO',\n    module: 'document_store',\n    message: 'Dokumente erfolgreich geladen: 15 Dokumente, 250 Chunks',\n    type: 'application'\n  },\n  {\n    timestamp: Date.now() - 15 * 60 * 1000,\n    level: 'WARNING',\n    module: 'embedding_manager',\n    message: 'Embedding-Cache veraltet, Neugenerierung empfohlen',\n    type: 'application'\n  },\n  {\n    timestamp: Date.now() - 30 * 60 * 1000,\n    level: 'ERROR',\n    module: 'rag_engine',\n    message: 'Fehler bei der Verarbeitung der Anfrage: Timeout bei LLM-Anfrage',\n    details: 'Traceback (most recent call last):\\n  File \"/opt/nscale-assist/app/modules/rag/engine.py\", line 284, in _generate_response\\n    result = await self.ollama_client.generate(prompt)\\n  File \"/opt/nscale-assist/app/modules/llm/model.py\", line 165, in generate\\n    raise TimeoutError(\"LLM request timed out after 30 seconds\")\\nTimeoutError: LLM request timed out after 30 seconds',\n    type: 'error'\n  },\n  {\n    timestamp: Date.now() - 45 * 60 * 1000,\n    level: 'INFO',\n    module: 'doc_converter',\n    message: 'Dokument \"Richtlinie zur Datenspeicherung.docx\" erfolgreich konvertiert',\n    type: 'conversion'\n  },\n  {\n    timestamp: Date.now() - 60 * 60 * 1000,\n    level: 'INFO',\n    module: 'user_manager',\n    message: 'Benutzer \"admin@example.com\" hat sich angemeldet',\n    type: 'auth'\n  },\n  {\n    timestamp: Date.now() - 90 * 60 * 1000,\n    level: 'ERROR',\n    module: 'doc_converter',\n    message: 'Fehler bei der Konvertierung von \"Komplexes Dokument.pdf\": Nicht unterstütztes Format',\n    details: 'Traceback (most recent call last):\\n  File \"/opt/nscale-assist/app/doc_converter/converters/pdf_converter.py\", line 98, in convert\\n    raise ValueError(\"PDF contains unsupported elements\")\\nValueError: PDF contains unsupported elements',\n    type: 'conversion'\n  },\n  {\n    timestamp: Date.now() - 2 * 24 * 60 * 60 * 1000,\n    level: 'INFO',\n    module: 'server',\n    message: 'Server gestartet auf host=localhost port=8000',\n    type: 'application'\n  },\n  {\n    timestamp: Date.now() - 3 * 24 * 60 * 60 * 1000,\n    level: 'WARNING',\n    module: 'auth_manager',\n    message: 'Mehrere fehlgeschlagene Anmeldeversuche für Benutzer \"test@example.com\"',\n    type: 'auth'\n  }\n];\n\n// State\nconst logs = ref([]);\nconst logType = ref('all');\nconst dateRange = ref('24h');\nconst searchQuery = ref('');\nconst currentPage = ref(1);\nconst pageSize = ref(10);\nconst loading = ref(false);\nconst error = ref(null);\nconst expandedLogs = ref([]);\n\n// Mock-Funktion zum \"Laden\" der Protokolle\n// In einer realen Implementierung würde dies eine API-Anfrage sein\nconst fetchLogs = async () => {\n  loading.value = true;\n  error.value = null;\n  \n  try {\n    // Simuliere API-Aufruf mit setTimeout\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    \n    // Filtere Logs basierend auf Zeitraum\n    const msToSubtract = getMsFromDateRange(dateRange.value);\n    const cutoffTimestamp = Date.now() - msToSubtract;\n    \n    // Filtere und kopiere die Mock-Logs\n    logs.value = mockLogs\n      .filter(log => log.timestamp >= cutoffTimestamp)\n      .map(log => ({ ...log }));\n      \n    // Simuliere gelegentliche Fehler\n    if (Math.random() < 0.05) {\n      throw new Error('Simulierter Netzwerkfehler beim Abrufen der Protokolle');\n    }\n    \n  } catch (err) {\n    console.error('Fehler beim Laden der Protokolle:', err);\n    error.value = err.message;\n    logs.value = [];\n  } finally {\n    loading.value = false;\n  }\n};\n\n// Berechnete Eigenschaften\nconst filteredLogs = computed(() => {\n  let result = [...logs.value];\n  \n  // Filtere nach Typ\n  if (logType.value !== 'all') {\n    result = result.filter(log => log.type === logType.value);\n  }\n  \n  // Filtere nach Suchbegriff\n  if (searchQuery.value) {\n    const query = searchQuery.value.toLowerCase();\n    result = result.filter(log => \n      log.message.toLowerCase().includes(query) ||\n      log.module.toLowerCase().includes(query) ||\n      log.level.toLowerCase().includes(query) ||\n      (log.details && log.details.toLowerCase().includes(query))\n    );\n  }\n  \n  // Sortiere nach Zeitstempel (neueste zuerst)\n  result.sort((a, b) => b.timestamp - a.timestamp);\n  \n  // Paginierung\n  const start = (currentPage.value - 1) * pageSize.value;\n  const end = Math.min(start + pageSize.value, result.length);\n  \n  return result.slice(start, end);\n});\n\nconst hasLogs = computed(() => {\n  return filteredLogs.value.length > 0;\n});\n\nconst logCount = computed(() => {\n  let result = logs.value;\n  \n  // Filtere nach Typ\n  if (logType.value !== 'all') {\n    result = result.filter(log => log.type === logType.value);\n  }\n  \n  return result.length;\n});\n\nconst errorCount = computed(() => {\n  let result = logs.value;\n  \n  // Filtere nach Typ\n  if (logType.value !== 'all') {\n    result = result.filter(log => log.type === logType.value);\n  }\n  \n  return result.filter(log => log.level === 'ERROR').length;\n});\n\nconst totalFilteredLogs = computed(() => {\n  let result = [...logs.value];\n  \n  // Filtere nach Typ\n  if (logType.value !== 'all') {\n    result = result.filter(log => log.type === logType.value);\n  }\n  \n  // Filtere nach Suchbegriff\n  if (searchQuery.value) {\n    const query = searchQuery.value.toLowerCase();\n    result = result.filter(log => \n      log.message.toLowerCase().includes(query) ||\n      log.module.toLowerCase().includes(query) ||\n      log.level.toLowerCase().includes(query) ||\n      (log.details && log.details.toLowerCase().includes(query))\n    );\n  }\n  \n  return result.length;\n});\n\nconst totalPages = computed(() => {\n  return Math.max(1, Math.ceil(totalFilteredLogs.value / pageSize.value));\n});\n\nconst dateRangeText = computed(() => {\n  switch(dateRange.value) {\n    case '1h': return 'Letzte Stunde';\n    case '6h': return 'Letzte 6 Stunden';\n    case '24h': return 'Letzter Tag';\n    case '7d': return 'Letzte Woche';\n    case '30d': return 'Letzter Monat';\n    default: return 'Benutzerdefiniert';\n  }\n});\n\n// Methoden\nconst refreshLogs = () => {\n  currentPage.value = 1;\n  expandedLogs.value = [];\n  fetchLogs();\n};\n\nconst toggleLogExpansion = (index) => {\n  const position = expandedLogs.value.indexOf(index);\n  if (position > -1) {\n    expandedLogs.value.splice(position, 1);\n  } else {\n    expandedLogs.value.push(index);\n  }\n};\n\nconst prevPage = () => {\n  if (currentPage.value > 1) {\n    currentPage.value--;\n    expandedLogs.value = [];\n  }\n};\n\nconst nextPage = () => {\n  if (currentPage.value < totalPages.value) {\n    currentPage.value++;\n    expandedLogs.value = [];\n  }\n};\n\nconst downloadLogs = () => {\n  // Erstelle CSV aus filterierten Logs\n  let result = [...logs.value];\n  \n  // Filtere nach Typ\n  if (logType.value !== 'all') {\n    result = result.filter(log => log.type === logType.value);\n  }\n  \n  // Filtere nach Suchbegriff\n  if (searchQuery.value) {\n    const query = searchQuery.value.toLowerCase();\n    result = result.filter(log => \n      log.message.toLowerCase().includes(query) ||\n      log.module.toLowerCase().includes(query) ||\n      log.level.toLowerCase().includes(query) ||\n      (log.details && log.details.toLowerCase().includes(query))\n    );\n  }\n  \n  // Sortiere nach Zeitstempel (neueste zuerst)\n  result.sort((a, b) => b.timestamp - a.timestamp);\n  \n  // Erstelle CSV-Inhalt\n  const headers = ['Zeitstempel', 'Level', 'Modul', 'Nachricht', 'Details'];\n  const csvContent = [\n    headers.join(','),\n    ...result.map(log => {\n      return [\n        new Date(log.timestamp).toISOString(),\n        log.level,\n        `\"${log.module.replace(/\"/g, '\"\"')}\"`,\n        `\"${log.message.replace(/\"/g, '\"\"')}\"`,\n        log.details ? `\"${log.details.replace(/\"/g, '\"\"').replace(/\\n/g, ' ')}\"` : ''\n      ].join(',');\n    })\n  ].join('\\n');\n  \n  // Erstelle Datei zum Download\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n  \n  const link = document.createElement('a');\n  link.setAttribute('href', url);\n  link.setAttribute('download', `system-logs_${new Date().toISOString().split('T')[0]}.csv`);\n  link.style.visibility = 'hidden';\n  \n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n};\n\nconst formatTimestamp = (timestamp) => {\n  const date = new Date(timestamp);\n  return date.toLocaleString('de-DE', {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit'\n  });\n};\n\nconst getMsFromDateRange = (range) => {\n  const msInHour = 60 * 60 * 1000;\n  const msInDay = 24 * msInHour;\n  \n  switch(range) {\n    case '1h': return msInHour;\n    case '6h': return 6 * msInHour;\n    case '24h': return msInDay;\n    case '7d': return 7 * msInDay;\n    case '30d': return 30 * msInDay;\n    default: return msInDay;\n  }\n};\n\n// Reaktive Watcher\nwatch([logType, dateRange, searchQuery], () => {\n  // Setze Seite zurück, wenn sich Filter ändern\n  currentPage.value = 1;\n  \n  // Wenn sich nur der Suchbegriff ändert und wir haben bereits Daten,\n  // müssen wir nicht neu laden. Für Änderungen am Datumsbereich und Protokolltyp laden wir neu.\n  if (\n    (logType.value !== 'all' && logs.value.length === 0) || \n    (dateRange.value !== '24h' && logs.value.length === 0)\n  ) {\n    fetchLogs();\n  }\n});\n\n// Lifecycle hooks\nonMounted(() => {\n  // Initial data load\n  fetchLogs();\n});\n</script>\n\n<style scoped>\n.system-logs {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n\n.controls-panel {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: #ffffff;\n  border-radius: 0.5rem;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  padding: 1rem 1.5rem;\n  flex-wrap: wrap;\n  gap: 1rem;\n}\n\n.log-filters {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n  flex-wrap: wrap;\n}\n\n.log-type-filter, .date-range-filter {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.log-type-filter label, .date-range-filter label {\n  font-size: 0.875rem;\n  color: #475569;\n  white-space: nowrap;\n}\n\n.log-type-filter select, .date-range-filter select {\n  padding: 0.5rem 0.75rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 0.375rem;\n  font-size: 0.875rem;\n  color: #1e293b;\n  background-color: #ffffff;\n}\n\n.search-box {\n  position: relative;\n  flex-grow: 1;\n  min-width: 200px;\n}\n\n.search-box input {\n  padding: 0.5rem 2.5rem 0.5rem 0.75rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 0.375rem;\n  font-size: 0.875rem;\n  color: #1e293b;\n  width: 100%;\n}\n\n.search-box i {\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #94a3b8;\n  pointer-events: none;\n}\n\n.log-actions {\n  display: flex;\n  gap: 0.75rem;\n}\n\n.refresh-btn, .download-btn {\n  padding: 0.5rem 1rem;\n  border-radius: 0.375rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.refresh-btn {\n  background-color: #3b82f6;\n  color: white;\n  border: none;\n}\n\n.refresh-btn:hover:not(:disabled) {\n  background-color: #2563eb;\n}\n\n.refresh-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.download-btn {\n  background-color: #f8fafc;\n  color: #475569;\n  border: 1px solid #e2e8f0;\n}\n\n.download-btn:hover:not(:disabled) {\n  background-color: #f1f5f9;\n}\n\n.download-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.log-display {\n  background-color: #ffffff;\n  border-radius: 0.5rem;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  padding: 1.5rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.log-stats {\n  display: flex;\n  gap: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 1px solid #e2e8f0;\n}\n\n.log-stat {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  color: #475569;\n}\n\n.log-stat i {\n  color: #3b82f6;\n}\n\n.log-table-container {\n  overflow-x: auto;\n  max-height: 500px;\n  overflow-y: auto;\n}\n\n.log-table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 0.875rem;\n  color: #334155;\n}\n\n.log-table th {\n  position: sticky;\n  top: 0;\n  background-color: #f8fafc;\n  padding: 0.75rem 1rem;\n  text-align: left;\n  font-weight: 600;\n  color: #475569;\n  border-bottom: 1px solid #e2e8f0;\n  z-index: 10;\n}\n\n.log-table td {\n  padding: 0.75rem 1rem;\n  border-bottom: 1px solid #e2e8f0;\n  vertical-align: top;\n}\n\n.timestamp-col {\n  white-space: nowrap;\n  width: 180px;\n}\n\n.level-col {\n  width: 100px;\n  text-align: center;\n}\n\n.module-col {\n  width: 150px;\n}\n\n.message-col {\n  min-width: 300px;\n}\n\n.log-level {\n  display: inline-block;\n  padding: 0.25rem 0.5rem;\n  border-radius: 0.25rem;\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n}\n\n.log-level-info {\n  background-color: #dbeafe;\n  color: #1e40af;\n}\n\n.log-level-warning {\n  background-color: #fef3c7;\n  color: #92400e;\n}\n\n.log-level-error {\n  background-color: #fee2e2;\n  color: #b91c1c;\n}\n\n.log-level-debug {\n  background-color: #e0f2fe;\n  color: #0369a1;\n}\n\ntr.log-level-error {\n  background-color: rgba(254, 226, 226, 0.2);\n}\n\ntr.log-level-warning {\n  background-color: rgba(254, 243, 199, 0.2);\n}\n\ntr.expanded {\n  background-color: #f8fafc;\n}\n\n.log-message {\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n.log-details {\n  margin-top: 0.75rem;\n  padding: 0.75rem;\n  background-color: #f1f5f9;\n  border-radius: 0.25rem;\n  font-family: monospace;\n  white-space: pre-wrap;\n  word-break: break-word;\n  color: #475569;\n  font-size: 0.75rem;\n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.pagination {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid #e2e8f0;\n}\n\n.page-btn {\n  width: 2.5rem;\n  height: 2.5rem;\n  border-radius: 0.375rem;\n  background-color: #f8fafc;\n  border: 1px solid #e2e8f0;\n  color: #475569;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n}\n\n.page-btn:hover:not(:disabled) {\n  background-color: #f1f5f9;\n}\n\n.page-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.page-info {\n  font-size: 0.875rem;\n  color: #475569;\n}\n\n.loading-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem;\n  color: #64748b;\n}\n\n.loader {\n  border: 3px solid #f3f3f3;\n  border-top: 3px solid #3b82f6;\n  border-radius: 50%;\n  width: 2rem;\n  height: 2rem;\n  animation: spin 1s linear infinite;\n  margin-bottom: 1rem;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem;\n  text-align: center;\n  color: #64748b;\n}\n\n.empty-state i {\n  font-size: 3rem;\n  opacity: 0.5;\n  margin-bottom: 1rem;\n}\n\n.retry-btn {\n  margin-top: 1rem;\n  padding: 0.5rem 1rem;\n  background-color: #3b82f6;\n  color: white;\n  border: none;\n  border-radius: 0.375rem;\n  font-size: 0.875rem;\n  cursor: pointer;\n}\n\n.retry-btn:hover {\n  background-color: #2563eb;\n}\n\n/* Dark Mode Support */\n:global(.theme-dark) .controls-panel,\n:global(.theme-dark) .log-display {\n  background-color: #1e1e1e;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n}\n\n:global(.theme-dark) .log-type-filter label,\n:global(.theme-dark) .date-range-filter label,\n:global(.theme-dark) .log-stat,\n:global(.theme-dark) .page-info {\n  color: #aaa;\n}\n\n:global(.theme-dark) .log-type-filter select,\n:global(.theme-dark) .date-range-filter select,\n:global(.theme-dark) .search-box input {\n  background-color: #252525;\n  border-color: #444;\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .download-btn,\n:global(.theme-dark) .page-btn {\n  background-color: #252525;\n  border-color: #444;\n  color: #aaa;\n}\n\n:global(.theme-dark) .download-btn:hover:not(:disabled),\n:global(.theme-dark) .page-btn:hover:not(:disabled) {\n  background-color: #333;\n}\n\n:global(.theme-dark) .log-stats,\n:global(.theme-dark) .pagination {\n  border-color: #444;\n}\n\n:global(.theme-dark) .log-table th {\n  background-color: #252525;\n  color: #e0e0e0;\n  border-bottom-color: #444;\n}\n\n:global(.theme-dark) .log-table td {\n  border-bottom-color: #444;\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) tr.expanded {\n  background-color: #2a2a2a;\n}\n\n:global(.theme-dark) .log-details {\n  background-color: #333;\n  color: #aaa;\n}\n\n:global(.theme-dark) tr.log-level-error {\n  background-color: rgba(180, 30, 30, 0.2);\n}\n\n:global(.theme-dark) tr.log-level-warning {\n  background-color: rgba(180, 130, 20, 0.2);\n}\n\n:global(.theme-dark) .log-level-info {\n  background-color: rgba(30, 64, 175, 0.6);\n  color: #dbeafe;\n}\n\n:global(.theme-dark) .log-level-warning {\n  background-color: rgba(146, 64, 14, 0.6);\n  color: #fef3c7;\n}\n\n:global(.theme-dark) .log-level-error {\n  background-color: rgba(185, 28, 28, 0.6);\n  color: #fee2e2;\n}\n\n:global(.theme-dark) .log-level-debug {\n  background-color: rgba(3, 105, 161, 0.6);\n  color: #e0f2fe;\n}\n\n:global(.theme-dark) .refresh-btn {\n  background-color: #2563eb;\n}\n\n:global(.theme-dark) .refresh-btn:hover:not(:disabled) {\n  background-color: #1d4ed8;\n}\n\n:global(.theme-dark) .retry-btn {\n  background-color: #2563eb;\n}\n\n:global(.theme-dark) .retry-btn:hover {\n  background-color: #1d4ed8;\n}\n\n:global(.theme-dark) .loading-container {\n  color: #aaa;\n}\n\n:global(.theme-dark) .empty-state {\n  color: #aaa;\n}\n\n:global(.theme-dark) .loader {\n  border-color: #444;\n  border-top-color: #3b82f6;\n}\n\n/* Contrast Mode */\n:global(.theme-contrast) .controls-panel,\n:global(.theme-contrast) .log-display {\n  background-color: #000;\n  border: 2px solid #ffeb3b;\n  box-shadow: none;\n}\n\n:global(.theme-contrast) .log-type-filter label,\n:global(.theme-contrast) .date-range-filter label,\n:global(.theme-contrast) .log-stat,\n:global(.theme-contrast) .page-info {\n  color: #fff;\n}\n\n:global(.theme-contrast) .log-type-filter select,\n:global(.theme-contrast) .date-range-filter select,\n:global(.theme-contrast) .search-box input,\n:global(.theme-contrast) .download-btn,\n:global(.theme-contrast) .page-btn {\n  background-color: #000;\n  border: 1px solid #ffeb3b;\n  color: #fff;\n}\n\n:global(.theme-contrast) .log-stat i {\n  color: #ffeb3b;\n}\n\n:global(.theme-contrast) .download-btn:hover:not(:disabled),\n:global(.theme-contrast) .page-btn:hover:not(:disabled) {\n  background-color: #ffeb3b;\n  color: #000;\n}\n\n:global(.theme-contrast) .log-stats,\n:global(.theme-contrast) .pagination {\n  border-color: #ffeb3b;\n}\n\n:global(.theme-contrast) .log-table th {\n  background-color: #ffeb3b;\n  color: #000;\n  border-bottom-color: #ffeb3b;\n}\n\n:global(.theme-contrast) .log-table td {\n  border-bottom-color: #ffeb3b;\n  color: #fff;\n}\n\n:global(.theme-contrast) tr.expanded {\n  background-color: #333;\n}\n\n:global(.theme-contrast) .log-details {\n  background-color: #333;\n  color: #fff;\n  border: 1px solid #ffeb3b;\n}\n\n:global(.theme-contrast) .log-level {\n  background-color: #000;\n  border: 1px solid #ffeb3b;\n  color: #ffeb3b;\n}\n\n:global(.theme-contrast) tr.log-level-error {\n  background-color: #500;\n}\n\n:global(.theme-contrast) tr.log-level-warning {\n  background-color: #550;\n}\n\n:global(.theme-contrast) .refresh-btn,\n:global(.theme-contrast) .retry-btn {\n  background-color: #ffeb3b;\n  color: #000;\n  border: 1px solid #ffeb3b;\n}\n\n:global(.theme-contrast) .refresh-btn:hover:not(:disabled),\n:global(.theme-contrast) .retry-btn:hover:not(:disabled) {\n  background-color: #000;\n  color: #ffeb3b;\n}\n\n:global(.theme-contrast) .empty-state i {\n  color: #ffeb3b;\n}\n\n/* Responsive adjustments */\n@media (max-width: 1024px) {\n  .controls-panel {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  \n  .log-filters {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  \n  .log-actions {\n    justify-content: flex-end;\n  }\n  \n  .timestamp-col, .level-col {\n    width: auto;\n  }\n}\n\n@media (max-width: 768px) {\n  .log-stats {\n    flex-direction: column;\n    gap: 0.5rem;\n    align-items: flex-start;\n  }\n  \n  .log-table th:nth-child(3),\n  .log-table td:nth-child(3) {\n    display: none;\n  }\n}\n\n@media (max-width: 576px) {\n  .log-actions {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  \n  .log-table th:nth-child(1),\n  .log-table td:nth-child(1) {\n    display: none;\n  }\n}\n</style>","<template>\n  <div class=\"admin-sub-view\">\n    <h1>{{ viewTitle }}</h1>\n    \n    <div class=\"tabs-container\">\n      <div class=\"tabs\">\n        <button \n          class=\"tab-button\" \n          :class=\"{ active: activeTab === 'status' }\"\n          @click=\"activeTab = 'status'\"\n        >\n          <i class=\"fas fa-tachometer-alt\"></i>\n          System-Status\n        </button>\n        <button \n          class=\"tab-button\" \n          :class=\"{ active: activeTab === 'logs' }\"\n          @click=\"activeTab = 'logs'\"\n        >\n          <i class=\"fas fa-clipboard-list\"></i>\n          Protokolle\n        </button>\n      </div>\n      \n      <div class=\"tab-content\">\n        <keep-alive>\n          <component :is=\"activeComponent\"></component>\n        </keep-alive>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, markRaw } from 'vue';\nimport { useRoute } from 'vue-router';\nimport SystemStatus from '@/components/admin/system/SystemStatus.vue';\nimport SystemLogs from '@/components/admin/system/SystemLogs.vue';\n\nconst route = useRoute();\nconst activeTab = ref('status');\n\n// View-spezifische Daten basierend auf dem Route-Namen\nconst viewTitle = computed(() => {\n  const viewName = route.name || '';\n  \n  switch(viewName) {\n    case 'AdminSystem':\n      return 'Systemüberwachung';\n    default:\n      return 'Administration';\n  }\n});\n\n// Aktive Komponente basierend auf dem ausgewählten Tab\nconst activeComponent = computed(() => {\n  switch(activeTab.value) {\n    case 'status':\n      return markRaw(SystemStatus);\n    case 'logs':\n      return markRaw(SystemLogs);\n    default:\n      return markRaw(SystemStatus);\n  }\n});\n</script>\n\n<style scoped>\n.admin-sub-view {\n  padding: 1.5rem;\n}\n\n.tabs-container {\n  margin-top: 1.5rem;\n}\n\n.tabs {\n  display: flex;\n  border-bottom: 1px solid #e2e8f0;\n  margin-bottom: 1.5rem;\n}\n\n.tab-button {\n  padding: 0.75rem 1.5rem;\n  background: none;\n  border: none;\n  border-bottom: 2px solid transparent;\n  color: #64748b;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: -1px;\n}\n\n.tab-button:hover {\n  color: #3b82f6;\n}\n\n.tab-button.active {\n  color: #3b82f6;\n  border-bottom-color: #3b82f6;\n}\n\n.tab-content {\n  animation: fadeIn 0.3s ease-in-out;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(5px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Dark Mode Anpassungen */\n:global(.theme-dark) .tabs {\n  border-bottom-color: #444;\n}\n\n:global(.theme-dark) .tab-button {\n  color: #aaa;\n}\n\n:global(.theme-dark) .tab-button:hover,\n:global(.theme-dark) .tab-button.active {\n  color: #3b82f6;\n}\n\n/* Kontrast-Modus Anpassungen */\n:global(.theme-contrast) .tabs {\n  border-bottom-color: #ffeb3b;\n}\n\n:global(.theme-contrast) .tab-button {\n  color: #fff;\n}\n\n:global(.theme-contrast) .tab-button:hover {\n  color: #ffeb3b;\n}\n\n:global(.theme-contrast) .tab-button.active {\n  color: #ffeb3b;\n  border-bottom-color: #ffeb3b;\n}\n</style>"],"names":["useSystemStore","defineStore","useAuthStore","state","docs","filename","converters","type","response","axios","error","_b","_a","key","interval","systemStore","searchQuery","ref","sortField","sortDirection","autoRefresh","refreshInterval","reloadingDocs","clearingCache","filteredDocuments","computed","query","doc","a","b","aValue","bValue","totalSize","total","totalChunks","totalTokens","isLoading","toggleSortDirection","formatFileSize","bytes","formatNumber","num","refreshData","toggleAutoRefresh","updateRefreshInterval","reloadDocuments","clearCaches","onMounted","onBeforeUnmount","watch","newValue","mockLogs","logs","logType","dateRange","currentPage","pageSize","loading","expandedLogs","fetchLogs","resolve","msToSubtract","getMsFromDateRange","cutoffTimestamp","log","err","filteredLogs","result","start","end","hasLogs","logCount","errorCount","totalFilteredLogs","totalPages","dateRangeText","refreshLogs","toggleLogExpansion","index","position","prevPage","nextPage","downloadLogs","csvContent","blob","url","link","formatTimestamp","timestamp","range","route","useRoute","activeTab","viewTitle","activeComponent","markRaw","SystemStatus","SystemLogs"],"mappings":"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"}