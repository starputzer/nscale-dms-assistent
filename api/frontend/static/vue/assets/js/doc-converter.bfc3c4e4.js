import{N as T,b as a,c as S,G as N,_ as $,e as j,o as Q,g as m,j as w,t as n,u as s,A as I,O as U,k as C,P as q,B as G,Q as H,y as A,$ as W,R as Y,v as L,S as Z,T as J,Y as X,Z as ee}from"../ResultPreviewModal-75307a12.js";function se(){const l=T(),{showToast:r}=N(),t=a([]),o=a(!1),c=a(0),d=a(""),v=a(null),f=a(!1),u=a(null),p=a({outputFormat:"markdown",splitSections:!0,extractImages:!0,imageQuality:"medium",metadataHandling:"extract",advancedParsing:!0,tableDetection:"auto",ocrLevel:"basic",formatDetection:!0}),b=S(()=>l.resultsByDate),h=S(()=>l.hasResults),D=S(()=>l.isLoading),F=[".pdf",".docx",".doc",".xlsx",".xls",".pptx",".ppt",".html",".txt"],R=50*1024*1024;return{selectedFiles:t,isConverting:o,conversionProgress:c,currentProcessingFile:d,conversionError:v,conversionOptions:p,showPreviewModal:f,previewData:u,conversionResults:b,hasResults:h,isLoading:D,acceptedFormats:F,maxFileSize:R,handleFilesSelected:e=>{t.value=[...t.value,...e]},removeFile:e=>{t.value=t.value.filter(i=>i!==e)},clearSelectedFiles:()=>{t.value=[]},startConversion:async()=>{if(t.value.length!==0)try{o.value=!0,v.value=null,c.value=0;const e=new FormData;t.value.forEach(g=>{e.append("files",g)}),Object.entries(p.value).forEach(([g,k])=>{e.append(g,k)});const i=await l.convertDocuments(e,(g,k)=>{c.value=g,d.value=k});r("Konvertierung erfolgreich abgeschlossen","success")}catch(e){console.error("Konvertierungsfehler:",e),v.value=e.message||"Bei der Konvertierung ist ein Fehler aufgetreten.",r("Konvertierungsfehler: "+v.value,"error")}finally{o.value=!1,d.value=""}},cancelConversion:async()=>{try{await l.cancelConversion(),o.value=!1,c.value=0,d.value="",r("Konvertierung abgebrochen","info")}catch(e){console.error("Fehler beim Abbrechen der Konvertierung:",e)}},loadPreviousResults:async()=>{try{await l.loadPreviousResults()}catch(e){console.error("Fehler beim Laden vorheriger Ergebnisse:",e)}},viewResult:e=>{u.value=e,f.value=!0},downloadResult:e=>{l.downloadConvertedFile(e.id)},deleteResult:async e=>{try{await l.deleteResult(e.id),r(`"${e.fileName}" wurde gelöscht`,"info")}catch(i){r(`Fehler beim Löschen: ${i.message}`,"error")}},clearAllResults:async()=>{try{await l.clearAllResults(),r("Alle Konvertierungsergebnisse wurden gelöscht","info")}catch(e){r(`Fehler beim Löschen aller Ergebnisse: ${e.message}`,"error")}},closePreviewModal:()=>{f.value=!1,u.value=null}}}const te={class:"doc-converter-view"},ne={class:"main-content"},oe={key:1,class:"conversion-panel"},re={class:"panel-section"},le={key:0,class:"selected-files"},ie={class:"subsection-title"},ae={class:"panel-section"},ce={class:"panel-section"},ue={class:"action-buttons"},de=["disabled"],ve=["disabled"],me={key:2,class:"results-panel"},fe={__name:"DocConverterView",setup(l){const r=j(),{showToast:t}=N(),{selectedFiles:o,isConverting:c,conversionProgress:d,currentProcessingFile:v,conversionError:f,conversionOptions:u,showPreviewModal:p,previewData:b,conversionResults:h,acceptedFormats:D,maxFileSize:F,handleFilesSelected:R,removeFile:P,clearSelectedFiles:y,startConversion:_,cancelConversion:x,loadPreviousResults:z,viewResult:K,downloadResult:E,deleteResult:M,clearAllResults:B,closePreviewModal:V}=se();return Q(async()=>{if(!r.isAuthenticated){t("Bitte melden Sie sich an, um den Dokumentenkonverter zu nutzen","warning");return}if(!r.isAdmin){t("Sie benötigen Admin-Berechtigungen, um auf den Dokumentenkonverter zuzugreifen","error"),window.location.href="/";return}await z()}),(O,e)=>(m(),w("div",te,[e[9]||(e[9]=n("header",{class:"header"},[n("h1",{class:"title"},"nscale Dokumenten-Konverter"),n("p",{class:"subtitle"},"Konvertieren Sie Ihre Dokumente zu durchsuchbarem Text für das nscale DMS")],-1)),n("main",ne,[s(c)?(m(),I(U,{key:0,progress:s(d),"current-file":s(v),error:s(f),onCancel:s(x)},null,8,["progress","current-file","error","onCancel"])):(m(),w("div",oe,[n("div",re,[e[3]||(e[3]=n("h2",{class:"section-title"},"1. Dokumente hochladen",-1)),C(q,{"accepted-formats":s(D),"max-file-size":s(F),multiple:!0,onFilesSelected:s(R)},null,8,["accepted-formats","max-file-size","onFilesSelected"]),s(o).length>0?(m(),w("div",le,[n("h3",ie,"Ausgewählte Dateien ("+G(s(o).length)+")",1),C(H,{files:s(o),onRemoveFile:s(P)},null,8,["files","onRemoveFile"])])):A("",!0)]),n("div",ae,[e[4]||(e[4]=n("h2",{class:"section-title"},"2. Konvertierungsoptionen",-1)),C(Y,{options:s(u),"onUpdate:options":e[0]||(e[0]=i=>W(u)?u.value=i:null),disabled:s(o).length===0},null,8,["options","disabled"])]),n("div",ce,[e[7]||(e[7]=n("h2",{class:"section-title"},"3. Konvertierung starten",-1)),n("div",ue,[n("button",{class:"btn-primary",disabled:s(o).length===0||s(c),onClick:e[1]||(e[1]=(...i)=>s(_)&&s(_)(...i))},e[5]||(e[5]=[n("i",{class:"fas fa-sync-alt"},null,-1),L(" Konvertierung starten ")]),8,de),n("button",{class:"btn-secondary",disabled:s(o).length===0,onClick:e[2]||(e[2]=(...i)=>s(y)&&s(y)(...i))},e[6]||(e[6]=[n("i",{class:"fas fa-times"},null,-1),L(" Auswahl zurücksetzen ")]),8,ve)])])])),s(h).length>0?(m(),w("div",me,[e[8]||(e[8]=n("h2",{class:"section-title"},"Konvertierungsergebnisse",-1)),C(Z,{results:s(h),onViewResult:s(K),onDownloadResult:s(E),onDeleteResult:s(M),onClearAll:s(B)},null,8,["results","onViewResult","onDownloadResult","onDeleteResult","onClearAll"])])):A("",!0)]),s(p)?(m(),I(J,{key:0,"preview-data":s(b),onClose:s(V)},null,8,["preview-data","onClose"])):A("",!0)]))}},ge=$(fe,[["__scopeId","data-v-f21de0f2"]]);document.addEventListener("DOMContentLoaded",()=>{const l=["doc-converter-app","doc-converter-container","docConverterContainer",'[data-vue-component="doc-converter"]'];let r=null;for(const t of l){const o=t.startsWith("[")?document.querySelector(t):document.getElementById(t);if(o){r=o,console.log(`Mount-Element für DocConverter gefunden: ${t}`);break}}if(r)try{const t=X(ge),o=ee();t.use(o),t.component("FontAwesomeIcon",{props:["icon"],template:'<i :class="icon"></i>'}),t.mount(r),console.log("DocConverter wurde erfolgreich initialisiert"),window.vueDocConverterInitialized=!0}catch(t){console.error("Fehler bei der Initialisierung des Vue.js DocConverters:",t),typeof window.initializeClassicDocConverter=="function"&&(console.warn("Aktiviere klassische DocConverter-Implementierung als Fallback"),window.initializeClassicDocConverter())}else console.warn("Kein Mounting-Element für DocConverter gefunden, überprüfe diese Selektoren:",l)});
//# sourceMappingURL=doc-converter.bfc3c4e4.js.map
