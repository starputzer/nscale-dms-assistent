var e=Object.defineProperty,t=(t,r,s)=>((t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s)(t,"symbol"!=typeof r?r+"":r,s);import{r,a as s,b as n}from"./vendor-vue-D3L_ePxu.js";import"./vendor-BRQMajHQ.js";import"./services-api-BM0NYMcL.js";import{d as a}from"./vendor-pinia-DzTZc5iZ.js";import{u as o}from"./components-shared-Df4IIJnA.js";const i=a("featureToggles",(()=>{const e=r(2),t=s({}),a=s({}),o=s({uiComponentsDemo:{name:"UI Components Demo",description:"Demo der UI-Basiskomponenten mit interaktiven Beispielen",group:"uiFeatures",stable:!0,requiredRole:"developer",hasFallback:!1,dependencies:["useNewUIComponents"]},useSfcDocConverter:{name:"SFC Dokumentenkonverter",description:"Verwende die neue Vue 3 SFC-Implementierung des Dokumentenkonverters",group:"sfcMigration",stable:!1,requiredRole:"developer",hasFallback:!0,dependencies:["usePiniaAuth","usePiniaUI"]},useSfcAdmin:{name:"SFC Admin-Bereich",description:"Verwende die neue Vue 3 SFC-Implementierung des Admin-Bereichs",group:"sfcMigration",stable:!1,requiredRole:"developer",hasFallback:!0,dependencies:["usePiniaAuth","usePiniaUI"]},useSfcChat:{name:"SFC Chat-Interface",description:"Verwende die neue Vue 3 SFC-Implementierung des Chat-Interfaces",group:"sfcMigration",stable:!1,requiredRole:"developer",hasFallback:!0,dependencies:["usePiniaAuth","usePiniaUI"]},useSfcSettings:{name:"SFC Einstellungen",description:"Verwende die neue Vue 3 SFC-Implementierung der Einstellungen",group:"sfcMigration",stable:!1,requiredRole:"developer",hasFallback:!0,dependencies:["usePiniaAuth","usePiniaUI"]},useSfcUIButton:{name:"SFC Button-Komponente",description:"Verwende die neue Vue 3 SFC-Implementierung der Button-Komponente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents"]},useSfcUIInput:{name:"SFC Input-Komponente",description:"Verwende die neue Vue 3 SFC-Implementierung der Input-Komponente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents"]},useSfcUIBadge:{name:"SFC Badge-Komponente",description:"Verwende die neue Vue 3 SFC-Implementierung der Badge-Komponente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents"]},useSfcUITooltip:{name:"SFC Tooltip-Komponente",description:"Verwende die neue Vue 3 SFC-Implementierung der Tooltip-Komponente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents"]},useSfcUICard:{name:"SFC Card-Komponente",description:"Verwende die neue Vue 3 SFC-Implementierung der Card-Komponente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents"]},useSfcUIAlert:{name:"SFC Alert-Komponente",description:"Verwende die neue Vue 3 SFC-Implementierung der Alert-Komponente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents"]},useSfcUIToggle:{name:"SFC Toggle-Komponente",description:"Verwende die neue Vue 3 SFC-Implementierung der Toggle-Komponente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents"]},useSfcUITextArea:{name:"SFC TextArea-Komponente",description:"Verwende die neue Vue 3 SFC-Implementierung der TextArea-Komponente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents"]},useSfcUIProgressBar:{name:"SFC ProgressBar-Komponente",description:"Verwende die neue Vue 3 SFC-Implementierung der ProgressBar-Komponente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents"]},useSfcUICheckbox:{name:"SFC Checkbox-Komponente",description:"Verwende die neue Vue 3 SFC-Implementierung der Checkbox-Komponente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents"]},useSfcUIRadio:{name:"SFC Radio-Komponente",description:"Verwende die neue Vue 3 SFC-Implementierung der Radio-Komponente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents"]},useSfcUISelect:{name:"SFC Select-Komponente",description:"Verwende die neue Vue 3 SFC-Implementierung der Select-Komponente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents"]},useSfcUIModal:{name:"SFC Modal-Komponente",description:"Verwende die neue Vue 3 SFC-Implementierung der Modal-Komponente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents"]},useSfcChatMessageItem:{name:"SFC Chat-Nachricht",description:"Verwende die neue Vue 3 SFC-Implementierung der Nachrichten-Anzeigekomponente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents","useSfcUICard","useSfcUIButton"]},useSfcChatMessageList:{name:"SFC Chat-Nachrichtenliste",description:"Verwende die neue Vue 3 SFC-Implementierung der Nachrichtenliste",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcChatMessageItem"]},useSfcChatInput:{name:"SFC Chat-Eingabefeld",description:"Verwende die neue Vue 3 SFC-Implementierung des Chat-Eingabefelds",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents","useSfcUIInput","useSfcUIButton"]},useSfcChatMessageInput:{name:"SFC Chat-Nachrichteneingabe",description:"Verwende die neue Vue 3 SFC-Implementierung der Chat-Nachrichteneingabe",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcChatInput"]},useSfcSessionItem:{name:"SFC Session-Element",description:"Verwende die neue Vue 3 SFC-Implementierung der Session-Elemente",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents","useSfcUICard","useSfcUIButton"]},useSfcSessionList:{name:"SFC Session-Liste",description:"Verwende die neue Vue 3 SFC-Implementierung der Session-Liste",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcSessionItem"]},useSfcChatContainer:{name:"SFC Chat-Container",description:"Verwende die neue Vue 3 SFC-Implementierung des Chat-Containers",group:"sfcMigration",stable:!1,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcChatMessageList","useSfcChatMessageInput"]},useSfcEnhancedChatContainer:{name:"SFC Erweiterter Chat-Container",description:"Verwende die neue Vue 3 SFC-Implementierung des erweiterten Chat-Containers",group:"sfcMigration",stable:!1,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcChatContainer","useSfcSessionList"]},useSfcAdminPanel:{name:"SFC Admin-Panel",description:"Verwende die neue Vue 3 SFC-Implementierung des Admin-Bereichs Hauptpanels",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useNewUIComponents","useSfcAdmin","useSfcUICard"]},useSfcAdminUsers:{name:"SFC Admin-Benutzerverwaltung",description:"Verwende die neue Vue 3 SFC-Implementierung der Benutzerverwaltung",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcAdminPanel","useSfcUIButton","useSfcUITable"]},useSfcAdminFeedback:{name:"SFC Admin-Feedback",description:"Verwende die neue Vue 3 SFC-Implementierung der Feedback-Verwaltung",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcAdminPanel","useSfcUICard"]},useSfcAdminMotd:{name:"SFC Admin-Nachrichten",description:"Verwende die neue Vue 3 SFC-Implementierung der Nachrichtenverwaltung",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcAdminPanel","useSfcUIInput","useSfcUITextArea"]},useSfcAdminSystem:{name:"SFC Admin-System",description:"Verwende die neue Vue 3 SFC-Implementierung der Systemverwaltung",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcAdminPanel","useSfcUICard"]},useSfcAdminStatistics:{name:"SFC Admin-Statistiken",description:"Verwende die neue Vue 3 SFC-Implementierung der Statistikanzeige",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcAdminPanel","useSfcUICard"]},useSfcAdminSystemSettings:{name:"SFC Admin-Systemeinstellungen",description:"Verwende die neue Vue 3 SFC-Implementierung der Systemeinstellungen",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcAdminPanel","useSfcUIToggle","useSfcUIInput"]},useSfcAdminFeatureToggles:{name:"SFC Admin-Feature-Toggles",description:"Verwende die neue Vue 3 SFC-Implementierung der Feature-Toggle-Verwaltung",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcAdminPanel","useSfcUIToggle","useSfcUICard"]},useSfcAdminLogViewer:{name:"SFC Admin-Log-Viewer",description:"Verwende die neue Vue 3 SFC-Implementierung des Log-Betrachters",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcAdminPanel","useSfcUIInput","useSfcUISelect"]},useSfcDocConverterContainer:{name:"SFC Dokumentkonverter Container",description:"Verwende die neue Vue 3 SFC-Implementierung des Dokumentkonverter Containers",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcDocConverter","useSfcUICard"]},useSfcDocConverterFileUpload:{name:"SFC Datei-Upload",description:"Verwende die neue Vue 3 SFC-Implementierung des Datei-Uploads",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcDocConverterContainer","useSfcUIButton"]},useSfcDocConverterBatchUpload:{name:"SFC Batch-Upload",description:"Verwende die neue Vue 3 SFC-Implementierung des Batch-Uploads",group:"sfcMigration",stable:!1,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcDocConverterContainer","useSfcUIButton","useSfcUIProgressBar"]},useSfcDocConverterProgress:{name:"SFC Konvertierungsfortschritt",description:"Verwende die neue Vue 3 SFC-Implementierung der Fortschrittsanzeige",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcDocConverterContainer","useSfcUIProgressBar"]},useSfcDocConverterResult:{name:"SFC Konvertierungsergebnis",description:"Verwende die neue Vue 3 SFC-Implementierung der Ergebnisanzeige",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcDocConverterContainer","useSfcUICard"]},useSfcDocConverterList:{name:"SFC Dokumentenliste",description:"Verwende die neue Vue 3 SFC-Implementierung der Dokumentenliste",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcDocConverterContainer","useSfcUICard"]},useSfcDocConverterPreview:{name:"SFC Dokumentvorschau",description:"Verwende die neue Vue 3 SFC-Implementierung der Dokumentvorschau",group:"sfcMigration",stable:!1,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcDocConverterContainer","useSfcUICard"]},useSfcDocConverterStats:{name:"SFC Konvertierungsstatistiken",description:"Verwende die neue Vue 3 SFC-Implementierung der Statistiken",group:"sfcMigration",stable:!1,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcDocConverterContainer"]},useSfcDocConverterErrorDisplay:{name:"SFC Fehleranzeige",description:"Verwende die neue Vue 3 SFC-Implementierung der Fehleranzeige",group:"sfcMigration",stable:!0,requiredRole:"developer",hasFallback:!0,dependencies:["useSfcDocConverterContainer","useSfcUIAlert"]}}),i=r(!0),u=r(!0),c=r(!0),l=r(!0),d=r(!0),p=r(!0),h=r(!0),f=r(!0),v=r(!0),m=r(!0),g=r(!0),S=r(!0),C=r(!0),F=r(!0),b=r(!0),I=r(!0),k=r(!0),y=r(!0),w=r(!0),A=r(!0),U=r(!0),E=r(!0),R=r(!0),V=r(!0),T=r(!0),D=r(!0),M=r(!0),x=r(!0),P=r(!0),L=r(!0),q=r(!0),j=r(!0),B=r(!0),N=r(!0),W=r(!0),K=r(!0),O=r(!0),H=r(!0),z=r(!0),$=r(!0),_=r(!0),J=r(!0),G=r(!0),Q=r(!0),X=r(!0),Y=r(!0),Z=r(!0),ee=r(!0),te=r(!0),re=r(!0),se=r(!0),ne=r(!0),ae=r(!0),oe=r(!0),ie=r(!0),ue=r(!0),ce=r(!0),le=n((()=>i.value&&u.value&&c.value&&l.value)),de=n((()=>!(i.value&&u.value&&c.value&&d.value))),pe=n((()=>b.value&&I.value&&k.value&&y.value));function he(e){const r=Ce(e),s=o[e],n=t[e]||[],i=a[e]||!1;return{isActive:r,isStable:(null==s?void 0:s.stable)||!1,hasFallback:(null==s?void 0:s.hasFallback)||!1,isFallbackActive:i,errors:n}}const fe=n((()=>{const e={};return Object.entries(o).forEach((([t,r])=>{e[t]={...r,status:he(t)}})),e}));function ve(e){const t=o[e];return!t||!t.dependencies||0===t.dependencies.length||t.dependencies.every((e=>Ce(e)))}function me(e,s,n,a=!0){var i;t[e]||(t[e]=[]);const u={feature:e,message:s,timestamp:new Date,details:n,fallbackActive:a};t[e].push(u),a&&(null==(i=o[e])?void 0:i.hasFallback)&&(ge(e,!0),e in r&&(r[e]=!1))}function ge(e,t){var r;(null==(r=o[e])?void 0:r.hasFallback)&&(a[e]=t)}function Se(e){t[e]&&(t[e]=[])}function Ce(e){const t=r[e];return void 0!==t&&"boolean"==typeof t&&t}function Fe(e,t){var s,n;const a=r[e];if(void 0!==a&&"boolean"==typeof a){if(t&&!ve(e))return void me(e,"Erforderliche Abhängigkeiten sind nicht aktiviert",{dependencies:null==(s=o[e])?void 0:s.dependencies},!1);r[e]=t,!t&&(null==(n=o[e])?void 0:n.hasFallback)&&(ge(e,!1),Se(e))}}function be(){b.value=!0,I.value=!0,k.value=!0,y.value=!0,ke(),Ie(),Ae(),K.value=!0,O.value=!0,H.value=!0,z.value=!0,$.value=!0,_.value=!0,J.value=!0,G.value=!0,Q.value=!0,b.value=!0,ke(),i.value=!0,c.value=!0}function Ie(){w.value=!0,A.value=!0,U.value=!0,E.value=!0,R.value=!0,V.value=!0,T.value=!0,D.value=!0,k.value=!0,ke()}function ke(){X.value=!0,Y.value=!0,Z.value=!0,ee.value=!0,te.value=!0,re.value=!0,se.value=!0,ne.value=!0,ae.value=!0,oe.value=!0,ie.value=!0,ue.value=!0,ce.value=!0,d.value=!0}function ye(){X.value=!1,Y.value=!1,Z.value=!1,ee.value=!1,te.value=!1,re.value=!1,se.value=!1,ne.value=!1,ae.value=!1,oe.value=!1,ie.value=!1,ue.value=!1,ce.value=!1,Object.keys(a).forEach((e=>{e.startsWith("useSfcUI")&&(a[e]=!1)})),Object.keys(t).forEach((e=>{e.startsWith("useSfcUI")&&(t[e]=[])}))}function we(){w.value=!1,A.value=!1,U.value=!1,E.value=!1,R.value=!1,V.value=!1,T.value=!1,D.value=!1,k.value=!1,Object.keys(a).forEach((e=>{(e.startsWith("useSfcChat")||"useSfcChat"===e||e.startsWith("useSfcSession")||"useSfcSession"===e)&&(a[e]=!1)})),Object.keys(t).forEach((e=>{(e.startsWith("useSfcChat")||"useSfcChat"===e||e.startsWith("useSfcSession")||"useSfcSession"===e)&&(t[e]=[])}))}function Ae(){M.value=!0,x.value=!0,P.value=!0,L.value=!0,q.value=!0,j.value=!0,B.value=!0,N.value=!0,W.value=!0,I.value=!0,ke()}function Ue(){M.value=!1,x.value=!1,P.value=!1,L.value=!1,q.value=!1,j.value=!1,B.value=!1,N.value=!1,W.value=!1,I.value=!1,Object.keys(a).forEach((e=>{(e.startsWith("useSfcAdmin")||"useSfcAdmin"===e)&&(a[e]=!1)})),Object.keys(t).forEach((e=>{(e.startsWith("useSfcAdmin")||"useSfcAdmin"===e)&&(t[e]=[])}))}function Ee(){b.value=!1,I.value=!1,k.value=!1,y.value=!1,ye(),we(),Ue(),K.value=!1,O.value=!1,H.value=!1,z.value=!1,$.value=!1,_.value=!1,J.value=!1,G.value=!1,Q.value=!1,b.value=!1,Object.keys(a).forEach((e=>{(e.startsWith("useSfcDocConverter")||"useSfcDocConverter"===e)&&(a[e]=!1)})),Object.keys(t).forEach((e=>{(e.startsWith("useSfcDocConverter")||"useSfcDocConverter"===e)&&(t[e]=[])})),Object.keys(a).forEach((e=>{!e.startsWith("useSfc")||e.startsWith("useSfcUI")||e.startsWith("useSfcChat")||e.startsWith("useSfcSession")||e.startsWith("useSfcAdmin")||e.startsWith("useSfcDocConverter")||(a[e]=!1)})),Object.keys(t).forEach((e=>{!e.startsWith("useSfc")||e.startsWith("useSfcUI")||e.startsWith("useSfcChat")||e.startsWith("useSfcSession")||e.startsWith("useSfcAdmin")||e.startsWith("useSfcDocConverter")||(t[e]=[])}))}async function Re(){try{return!0}catch(e){return!1}}const Ve=r(!1);return{version:e,usePiniaAuth:i,usePiniaSessions:u,usePiniaUI:c,usePiniaSettings:l,useNewUIComponents:d,useToastNotifications:p,useModernSidebar:h,useNewAdminPanel:f,uiComponentsDemo:v,useDarkMode:m,useThemeCustomization:g,useLegacyBridge:S,migrateLocalStorage:C,useModernDocConverter:F,isLoaded:Ve,useSfcDocConverter:b,useSfcAdmin:I,useSfcChat:k,useSfcSettings:y,useSfcUIButton:X,useSfcUIInput:Y,useSfcUIBadge:Z,useSfcUITooltip:ee,useSfcUICard:te,useSfcUIAlert:re,useSfcUIToggle:se,useSfcUITextArea:ne,useSfcUIProgressBar:ae,useSfcUICheckbox:oe,useSfcUIRadio:ie,useSfcUISelect:ue,useSfcUIModal:ce,useSfcChatMessageItem:w,useSfcChatMessageList:A,useSfcChatInput:U,useSfcChatMessageInput:E,useSfcSessionItem:R,useSfcSessionList:V,useSfcChatContainer:T,useSfcEnhancedChatContainer:D,errors:t,activeFallbacks:a,featureConfigs:o,areAllStoresEnabled:le,isLegacyModeActive:de,areSfcFeaturesEnabled:pe,getFeatureStatus:he,allFeatureConfigs:fe,reportFeatureError:me,clearFeatureErrors:Se,isFallbackActive:function(e){return a[e]||!1},setFallbackMode:ge,isFeatureAvailableForRole:function(e,t){const r=o[e];if(!r)return!0;const s={guest:0,user:1,developer:2,admin:3};return s[t]>=s[r.requiredRole]},areDependenciesSatisfied:ve,toggleFeature:function(e){var t,s;const n=r[e];return void 0!==n&&"boolean"==typeof n&&(n||ve(e)?(r[e]=!n,n&&(null==(s=o[e])?void 0:s.hasFallback)&&ge(e,!1),r[e]):(me(e,"Erforderliche Abhängigkeiten sind nicht aktiviert",{dependencies:null==(t=o[e])?void 0:t.dependencies},!1),!1))},isEnabled:Ce,isFeatureEnabled:function(e){return Ce(e)},setFeature:Fe,enableFeature:function e(t){var r;if(!ve(t)){((null==(r=o[t])?void 0:r.dependencies)||[]).forEach((t=>{Ce(t)||e(t)}))}Fe(t,!0)},disableFeature:function(e){Fe(e,!1)},configureFeatures:function(e){Object.entries(e).forEach((([e,t])=>{Fe(e,t)}))},loadFeatureToggles:Re,refreshFeatures:async function(){return Re()},setFallbackFeatures:function(){i.value=!0,u.value=!0,c.value=!0,l.value=!0,d.value=!0,p.value=!0,S.value=!0,I.value=!0},getFeatureFallbackRoute:function(e){return{useSfcChat:"/",useSfcDocConverter:"/documents-legacy",useSfcAdmin:"/admin-legacy",useSfcSettings:"/settings-legacy"}[e]||null},enableAllFeatures:function(){i.value=!0,u.value=!0,c.value=!0,l.value=!0,d.value=!0,p.value=!0,h.value=!0,f.value=!0,m.value=!0,g.value=!0,S.value=!0,F.value=!0,be()},enableCoreFeatures:function(){i.value=!0,u.value=!0,c.value=!0,l.value=!0,S.value=!0,d.value=!1,h.value=!1,f.value=!1,F.value=!1,Ee()},enableLegacyMode:function(){i.value=!1,u.value=!1,c.value=!1,l.value=!1,d.value=!1,h.value=!1,f.value=!1,F.value=!1,Ee(),S.value=!0},enableAllSfcFeatures:be,disableAllSfcFeatures:Ee,enableAllUIBaseComponents:ke,disableAllUIBaseComponents:ye,enableAllChatComponents:Ie,disableAllChatComponents:we,enableAllAdminComponents:Ae,disableAllAdminComponents:Ue}}),{persist:{storage:localStorage,paths:["version","usePiniaAuth","usePiniaSessions","usePiniaUI","usePiniaSettings","useNewUIComponents","useToastNotifications","useModernSidebar","useNewAdminPanel","uiComponentsDemo","useDarkMode","useThemeCustomization","useLegacyBridge","migrateLocalStorage","useModernDocConverter","useSfcDocConverter","useSfcAdmin","useSfcChat","useSfcSettings","useSfcUIButton","useSfcUIInput","useSfcUIBadge","useSfcUITooltip","useSfcUICard","useSfcUIAlert","useSfcUIToggle","useSfcUITextArea","useSfcUIProgressBar","useSfcUICheckbox","useSfcUIRadio","useSfcUISelect","useSfcUIModal","useSfcChatMessageItem","useSfcChatMessageList","useSfcChatInput","useSfcChatMessageInput","useSfcSessionItem","useSfcSessionList","useSfcChatContainer","useSfcEnhancedChatContainer","useSfcAdminPanel","useSfcAdminUsers","useSfcAdminFeedback","useSfcAdminMotd","useSfcAdminSystem","useSfcAdminStatistics","useSfcAdminSystemSettings","useSfcAdminFeatureToggles","useSfcAdminLogViewer","useSfcDocConverterContainer","useSfcDocConverterFileUpload","useSfcDocConverterBatchUpload","useSfcDocConverterProgress","useSfcDocConverterResult","useSfcDocConverterList","useSfcDocConverterPreview","useSfcDocConverterStats","useSfcDocConverterErrorDisplay","activeFallbacks"],beforeRestore:e=>{var t;try{if(parseInt((null==(t=localStorage.getItem("featureToggles"))?void 0:t.version)||"0")<2)return!1}catch(r){return!1}return!0},afterRestore:e=>{Object.entries(e.store.featureConfigs).filter((([e])=>e.startsWith("useSfc"))).forEach((([t,r])=>{e.store.isEnabled(t)&&!e.store.areDependenciesSatisfied(t)&&(e.store[t]=!1)}))}}}),u={useSfcDocConverter:{strategy:"threshold",errorThreshold:3,autoRecovery:!0,recoveryTimeout:36e5,maxRecoveryAttempts:3,priority:100},useSfcAdmin:{strategy:"threshold",errorThreshold:2,autoRecovery:!0,recoveryTimeout:72e5,maxRecoveryAttempts:2,priority:90},useSfcChat:{strategy:"immediate",autoRecovery:!0,recoveryTimeout:18e5,maxRecoveryAttempts:5,priority:110},useSfcSettings:{strategy:"progressive",errorThreshold:3,autoRecovery:!0,recoveryTimeout:36e5,maxRecoveryAttempts:3,priority:80}};let c=null;class l{constructor(e={}){t(this,"featureConfigs",new Map),t(this,"featureStates",s(new Map)),t(this,"eventHistory",s([])),t(this,"options"),t(this,"recoveryTimers",new Map),t(this,"statusCheckTimerId",null),t(this,"store",i()),this.options={defaultStrategy:e.defaultStrategy||"threshold",defaultThreshold:e.defaultThreshold||3,defaultRecoveryTimeout:e.defaultRecoveryTimeout||36e5,maxErrorsPerFeature:e.maxErrorsPerFeature||20,errorWindowTime:e.errorWindowTime||3e5,statusCheckInterval:e.statusCheckInterval||6e4,onEvent:e.onEvent||(()=>{})},this.initializeDefaultConfigs(),this.startStatusCheck(),this.monitorStoreChanges()}initializeDefaultConfigs(){Object.entries(u).forEach((([e,t])=>{this.configureFeature(e,t)}))}startStatusCheck(){null!==this.statusCheckTimerId&&window.clearInterval(this.statusCheckTimerId),this.statusCheckTimerId=window.setInterval((()=>{this.checkAllFeatureStatus()}),this.options.statusCheckInterval)}monitorStoreChanges(){}addEvent(e,t,r){const s={type:e,feature:t,timestamp:new Date,data:r};if(this.eventHistory.unshift(s),this.eventHistory.length>100&&this.eventHistory.pop(),this.options.onEvent)try{this.options.onEvent(s)}catch(n){}}checkAllFeatureStatus(){for(const[e,t]of this.featureConfigs.entries()){const r=this.getFeatureState(e);"active"===r.status&&t.autoRecovery&&r.recoveryAttempts<t.maxRecoveryAttempts&&r.nextRecoveryAttempt&&r.nextRecoveryAttempt.getTime()<=Date.now()&&this.attemptRecovery(e),this.pruneOldErrors(e)}this.syncWithStore()}pruneOldErrors(e){const t=this.getFeatureState(e),r=Date.now()-this.options.errorWindowTime;t.errors=t.errors.filter((e=>e.timestamp.getTime()>=r)),t.errorCount=t.errors.length}syncWithStore(){for(const[e,t]of this.featureStates.entries()){const r=this.store.isFallbackActive(e);("active"===t.status&&!r||"active"!==t.status&&r)&&("active"===t.status?this.store.setFallbackMode(e,!0):this.store.setFallbackMode(e,!1))}for(const e in this.store.activeFallbacks)if(this.store.activeFallbacks[e]&&!this.featureStates.has(e)){this.configureFeature(e);const t=this.getFeatureState(e);t.status="active",t.phase="active",t.activatedAt=new Date,this.addEvent("activation",e,{source:"external",automatic:!1})}}attemptRecovery(e){const t=this.getFeatureState(e),r=this.getFeatureConfig(e);this.addEvent("recoveryAttempt",e,{attempt:t.recoveryAttempts+1,maxAttempts:r.maxRecoveryAttempts}),t.status="recovering",t.phase="recovery",t.lastRecoveryAttempt=new Date,t.recoveryAttempts++,t.recoveryAttempts<r.maxRecoveryAttempts?t.nextRecoveryAttempt=new Date(Date.now()+r.recoveryTimeout):t.nextRecoveryAttempt=void 0,this.store.setFallbackMode(e,!1)}getFeatureConfig(e){if(!this.featureConfigs.has(e)){const t={feature:e,strategy:this.options.defaultStrategy,errorThreshold:this.options.defaultThreshold,autoRecovery:!0,recoveryTimeout:this.options.defaultRecoveryTimeout,maxRecoveryAttempts:3,minSeverity:"medium",useProgressiveFallback:!1,priority:50};this.featureConfigs.set(e,t)}return this.featureConfigs.get(e)}getFeatureState(e){if(!this.featureStates.has(e)){const t=this.store.isFallbackActive(e),r={feature:e,status:t?"active":"disabled",phase:t?"active":"disabled",errors:[],errorCount:0,recoveryAttempts:0,level:t?1:0,maxLevel:1};t&&(r.activatedAt=new Date),this.featureStates.set(e,r)}return this.featureStates.get(e)}configureFeature(e,t={}){const r={...this.featureConfigs.has(e)?this.featureConfigs.get(e):{feature:e,strategy:this.options.defaultStrategy,errorThreshold:this.options.defaultThreshold,autoRecovery:!0,recoveryTimeout:this.options.defaultRecoveryTimeout,maxRecoveryAttempts:3,minSeverity:"medium",useProgressiveFallback:!1,priority:50},...t,feature:e};this.featureConfigs.set(e,r),this.getFeatureState(e),this.addEvent("configChange",e,{config:r})}reportError(e,t){this.getFeatureConfig(e);const r=this.getFeatureState(e),s={...t,feature:e,timestamp:new Date};r.errors.unshift(s),r.errors.length>this.options.maxErrorsPerFeature&&r.errors.pop(),r.errorCount++,this.addEvent("error",e,{error:s});return!!this.shouldActivateFallback(e,s)&&(this.activateFallback(e,s),!0)}shouldActivateFallback(e,t){const r=this.getFeatureConfig(e),s=this.getFeatureState(e);if("active"===s.status||"recovering"===s.status)return!1;const n={low:1,medium:2,high:3,critical:4};if(n[t.severity]<n[r.minSeverity])return!1;switch(r.strategy){case"immediate":return!0;case"threshold":return s.errorCount>=r.errorThreshold;case"progressive":return"critical"===t.severity||("high"===t.severity&&s.errorCount>=Math.ceil(r.errorThreshold/2)||s.errorCount>=r.errorThreshold);default:return!1}}activateFallback(e,t){const r=this.getFeatureState(e);if("active"===r.status)return;r.status="active",r.phase="active",r.activatedAt=new Date,r.level=1,this.store.setFallbackMode(e,!0);const s=this.getFeatureConfig(e);s.autoRecovery&&(r.nextRecoveryAttempt=new Date(Date.now()+s.recoveryTimeout)),this.addEvent("activation",e,{error:t,automatic:!!t})}deactivateFallback(e,t=!1){const r=this.getFeatureState(e);("disabled"!==r.status||t)&&(r.status="disabled",r.phase="disabled",t&&(r.errors=[],r.errorCount=0,r.recoveryAttempts=0,r.level=0,r.activatedAt=void 0,r.lastRecoveryAttempt=void 0,r.nextRecoveryAttempt=void 0),this.store.setFallbackMode(e,!1),this.addEvent("deactivation",e,{resetState:t}))}setFallbackLevel(e,t){const r=this.getFeatureState(e);if(0===(t=Math.max(0,Math.min(t,r.maxLevel))))return void this.deactivateFallback(e);const s=r.level;r.level=t,"active"!==r.status&&(r.status="active",r.phase="active",r.activatedAt=new Date,this.store.setFallbackMode(e,!0)),this.addEvent("levelChange",e,{oldLevel:s,newLevel:t})}clearErrors(e){const t=this.getFeatureState(e);t.errors=[],t.errorCount=0,this.store.clearFeatureErrors(e)}getStatus(e){if(this.featureStates.has(e))return this.featureStates.get(e)}getAllStatus(){return this.featureStates}getEventHistory(e){return e?this.eventHistory.slice(0,e):this.eventHistory}dispose(){null!==this.statusCheckTimerId&&(window.clearInterval(this.statusCheckTimerId),this.statusCheckTimerId=null);for(const e of this.recoveryTimers.values())window.clearTimeout(e);this.recoveryTimers.clear()}static getInstance(e={}){return c||(c=new l(e)),c}}const d={captureUnhandledErrors:!0,captureUnhandledRejections:!0,enableRemoteReporting:!0,remoteEndpoint:"/api/error-reporting",maxStoredErrors:100,deduplicationWindow:3e5,integrateWithFallbackSystem:!0,consoleLogLevel:"error",userInfo:{userId:"anonymous",username:"anonymous",role:"user"},globalTags:{},onError:()=>{},privacy:{stripPII:!0,sensitiveFields:["password","token","apiKey","secret","credential","email","phone","address","name","credit","card"]}};let p=null;class h{constructor(e={}){t(this,"errors",s([])),t(this,"errorLookup",s({})),t(this,"options"),t(this,"initialized",r(!1)),t(this,"user",s(d.userInfo)),t(this,"fallbackManager",function(e={}){return l.getInstance(e)}()),t(this,"featureToggles",i()),t(this,"logger",o()),t(this,"unhandledErrorHandler",null),t(this,"unhandledRejectionHandler",null),this.options={...d,...e},e.userInfo&&(this.user={...this.user,...e.userInfo}),this.logger.setLevel(this.options.consoleLogLevel),this.options.captureUnhandledErrors&&this.setupUnhandledErrorCapture(),this.options.captureUnhandledRejections&&this.setupUnhandledRejectionCapture(),this.initialized.value=!0,this.logger.debug("[ErrorReportingService] Initialisiert")}setupUnhandledErrorCapture(){"undefined"!=typeof window&&(this.unhandledErrorHandler=e=>(this.captureError(e.error||new Error(e.message),{source:{type:"system",name:"window.onerror"},context:{lineNumber:e.lineno,columnNumber:e.colno,filename:e.filename}}),!1),window.addEventListener("error",this.unhandledErrorHandler))}setupUnhandledRejectionCapture(){"undefined"!=typeof window&&(this.unhandledRejectionHandler=e=>{const t=e.reason instanceof Error?e.reason:new Error(String(e.reason));return this.captureError(t,{source:{type:"system",name:"window.onunhandledrejection"},context:{promiseRejection:!0,originalReason:e.reason}}),!1},window.addEventListener("unhandledrejection",this.unhandledRejectionHandler))}stripPII(e){if(!this.options.privacy.stripPII)return e;if(!e||"object"!=typeof e)return e;const t={...e},r=this.options.privacy.sensitiveFields;return function e(t){for(const s in t){r.some((e=>s.toLowerCase().includes(e.toLowerCase())))?"string"==typeof t[s]?t[s]="[REDACTED]":"number"==typeof t[s]?t[s]=0:"object"==typeof t[s]&&null!==t[s]&&(t[s]=Array.isArray(t[s])?[]:{}):"object"==typeof t[s]&&null!==t[s]&&e(t[s])}}(t),t}generateErrorHash(e){const t=[e.source.type,e.source.name,e.message,e.feature||"",e.stackTrace?e.stackTrace.split("\n")[0]:""].join("|");let r=0;for(let s=0;s<t.length;s++){r=(r<<5)-r+t.charCodeAt(s),r|=0}return r.toString(16)}isDuplicate(e){var t;if(!(null==(t=e.meta)?void 0:t.hash))return{isDuplicate:!1};const r=e.meta.hash,s=Date.now()-this.options.deduplicationWindow;if(r in this.errorLookup){const e=this.errorLookup[r],t=this.errors[e];if(t&&t.timestamp.getTime()>=s)return{isDuplicate:!0,index:e}}return{isDuplicate:!1}}collectUIState(){var e,t,r,s,n;if("undefined"!=typeof window)try{const a=navigator.userAgent;let o="unknown",i="unknown";a.indexOf("Firefox")>-1?(o="Firefox",i=(null==(e=a.match(/Firefox\/([0-9.]+)/))?void 0:e[1])||"unknown"):a.indexOf("Chrome")>-1?(o="Chrome",i=(null==(t=a.match(/Chrome\/([0-9.]+)/))?void 0:t[1])||"unknown"):a.indexOf("Safari")>-1?(o="Safari",i=(null==(r=a.match(/Version\/([0-9.]+)/))?void 0:r[1])||"unknown"):(a.indexOf("Edge")>-1||a.indexOf("Edg/")>-1)&&(o="Edge",i=(null==(s=a.match(/Edge\/([0-9.]+)/))?void 0:s[1])||(null==(n=a.match(/Edg\/([0-9.]+)/))?void 0:n[1])||"unknown");const u={},c=Object.keys(this.featureToggles.$state).filter((e=>"boolean"==typeof this.featureToggles.$state[e]));for(const e of c)u[e]=this.featureToggles.$state[e];return{route:window.location.href,viewport:{width:window.innerWidth,height:window.innerHeight},browser:{name:o,version:i,language:navigator.language},featureFlags:u}}catch(a){return void this.logger.warn("[ErrorReportingService] Fehler beim Erfassen des UI-States",{error:a})}}createErrorReport(e,t={}){const r="string"==typeof e?new Error(e):e,s=r.message||String(r),n=t.source||{type:"unknown",name:"unknown"},a={id:`err_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,timestamp:new Date,source:n,message:s,originalError:r,stackTrace:r.stack,severity:t.severity||"medium",feature:t.feature,uiState:this.collectUIState(),context:t.context||{},handled:!1,reported:!1,userFeedback:t.userFeedback,meta:{devMode:!1,occurrences:1}};return Object.keys(this.options.globalTags).length>0&&(a.context={...a.context,globalTags:this.options.globalTags}),a.meta.hash=this.generateErrorHash(a),this.stripPII(a)}captureError(e,t={}){var r,s;const n=this.createErrorReport(e,t),{isDuplicate:a,index:o}=this.isDuplicate(n);if(a&&void 0!==o){const e=this.errors[o];return e.meta&&e.meta.occurrences&&e.meta.occurrences++,e.id}if(this.errors.unshift(n),this.errors.length>this.options.maxStoredErrors&&this.errors.pop(),(null==(r=n.meta)?void 0:r.hash)&&(this.errorLookup[n.meta.hash]=0),"none"!==this.options.consoleLogLevel){const e="critical"===n.severity||"high"===n.severity?"error":"medium"===n.severity?"warn":"debug";this.logger[e](`[ErrorReportingService] ${n.message}`,{source:n.source,feature:n.feature,stack:null==(s=n.stackTrace)?void 0:s.split("\n").slice(0,3).join("\n"),context:n.context})}if(this.options.enableRemoteReporting&&this.reportToRemoteService(n),this.options.integrateWithFallbackSystem&&n.feature&&this.notifyFallbackSystem(n),this.options.onError)try{this.options.onError(n)}catch(i){this.logger.error("[ErrorReportingService] Fehler im onError-Callback",{error:i})}return n.id}reportToRemoteService(e){this.options.remoteEndpoint&&(e.reported=!0,fetch(this.options.remoteEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),keepalive:!0}).catch((e=>{this.logger.warn("[ErrorReportingService] Fehler beim Senden des Berichts",{error:e})})))}notifyFallbackSystem(e){if(!e.feature)return;const t=e.feature;e.handled=!0;const r={message:e.message,error:e.originalError,stack:e.stackTrace,severity:e.severity,context:{source:e.source,reportId:e.id,...e.context}};this.fallbackManager.reportError(t,r)}captureSourceError(e,t,r,s={}){return this.captureError(r,{...s,source:{type:e,name:t}})}captureComponentError(e,t,r={}){return this.captureSourceError("component",e,t,r)}captureApiError(e,t,r={}){return this.captureSourceError("api",e,t,r)}captureStoreError(e,t,r={}){return this.captureSourceError("store",e,t,r)}dismissError(e){var t;const r=this.errors.findIndex((t=>t.id===e));if(-1===r)return!1;const s=this.errors[r];return(null==(t=s.meta)?void 0:t.hash)&&this.errorLookup[s.meta.hash]===r&&delete this.errorLookup[s.meta.hash],this.errors.splice(r,1),!0}setUserInfo(e){this.user={...this.user,...e}}clearAllErrors(){this.errors.splice(0,this.errors.length),Object.keys(this.errorLookup).forEach((e=>{delete this.errorLookup[e]}))}getErrors(e){return e&&e>0?this.errors.slice(0,e):this.errors}getErrorById(e){return this.errors.find((t=>t.id===e))}dispose(){"undefined"!=typeof window&&(this.unhandledErrorHandler&&window.removeEventListener("error",this.unhandledErrorHandler),this.unhandledRejectionHandler&&window.removeEventListener("unhandledrejection",this.unhandledRejectionHandler)),this.clearAllErrors(),this.initialized.value=!1,this.logger.debug("[ErrorReportingService] Beendet")}static getInstance(e={}){return p||(p=new h(e)),p}}"undefined"!=typeof window&&(window.errorReportingService=h.getInstance()),r(!1),r({auth:"idle",featureToggles:"idle",sessions:"idle",settings:"idle",ui:"idle",documentConverter:"idle",monitoring:"idle",statistics:"idle",admin:"idle",adminLogs:"idle"});
