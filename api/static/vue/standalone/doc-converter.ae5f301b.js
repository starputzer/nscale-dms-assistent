import{N as T,b as i,c as S,G as N,_ as $,e as j,o as Q,g as m,j as w,t as o,u as s,A as I,O as U,k as C,P as q,B as G,Q as H,y as P,$ as W,R as Y,v as L,S as Z,T as J,Y as X,Z as ee}from"../ResultPreviewModal-75307a12.js";function se(){const r=T(),{showToast:l}=N(),t=i([]),n=i(!1),c=i(0),d=i(""),v=i(null),p=i(!1),u=i(null),f=i({outputFormat:"markdown",splitSections:!0,extractImages:!0,imageQuality:"medium",metadataHandling:"extract",advancedParsing:!0,tableDetection:"auto",ocrLevel:"basic",formatDetection:!0}),b=S(()=>r.resultsByDate),h=S(()=>r.hasResults),F=S(()=>r.isLoading),R=[".pdf",".docx",".doc",".xlsx",".xls",".pptx",".ppt",".html",".txt"],D=50*1024*1024;return{selectedFiles:t,isConverting:n,conversionProgress:c,currentProcessingFile:d,conversionError:v,conversionOptions:f,showPreviewModal:p,previewData:u,conversionResults:b,hasResults:h,isLoading:F,acceptedFormats:R,maxFileSize:D,handleFilesSelected:e=>{t.value=[...t.value,...e]},removeFile:e=>{t.value=t.value.filter(a=>a!==e)},clearSelectedFiles:()=>{t.value=[]},startConversion:async()=>{if(t.value.length!==0)try{n.value=!0,v.value=null,c.value=0;const e=new FormData;t.value.forEach(g=>{e.append("files",g)}),Object.entries(f.value).forEach(([g,k])=>{e.append(g,k)});const a=await r.convertDocuments(e,(g,k)=>{c.value=g,d.value=k});l("Konvertierung erfolgreich abgeschlossen","success")}catch(e){console.error("Konvertierungsfehler:",e),v.value=e.message||"Bei der Konvertierung ist ein Fehler aufgetreten.",l("Konvertierungsfehler: "+v.value,"error")}finally{n.value=!1,d.value=""}},cancelConversion:async()=>{try{await r.cancelConversion(),n.value=!1,c.value=0,d.value="",l("Konvertierung abgebrochen","info")}catch(e){console.error("Fehler beim Abbrechen der Konvertierung:",e)}},loadPreviousResults:async()=>{try{await r.loadPreviousResults()}catch(e){console.error("Fehler beim Laden vorheriger Ergebnisse:",e)}},viewResult:e=>{u.value=e,p.value=!0},downloadResult:e=>{r.downloadConvertedFile(e.id)},deleteResult:async e=>{try{await r.deleteResult(e.id),l(`"${e.fileName}" wurde gelöscht`,"info")}catch(a){l(`Fehler beim Löschen: ${a.message}`,"error")}},clearAllResults:async()=>{try{await r.clearAllResults(),l("Alle Konvertierungsergebnisse wurden gelöscht","info")}catch(e){l(`Fehler beim Löschen aller Ergebnisse: ${e.message}`,"error")}},closePreviewModal:()=>{p.value=!1,u.value=null}}}const te={class:"doc-converter-view"},oe={class:"main-content"},ne={key:1,class:"conversion-panel"},re={class:"panel-section"},le={key:0,class:"selected-files"},ae={class:"subsection-title"},ie={class:"panel-section"},ce={class:"panel-section"},ue={class:"action-buttons"},de=["disabled"],ve=["disabled"],me={key:2,class:"results-panel"},pe={__name:"DocConverterView",setup(r){const l=j(),{showToast:t}=N(),{selectedFiles:n,isConverting:c,conversionProgress:d,currentProcessingFile:v,conversionError:p,conversionOptions:u,showPreviewModal:f,previewData:b,conversionResults:h,acceptedFormats:F,maxFileSize:R,handleFilesSelected:D,removeFile:x,clearSelectedFiles:y,startConversion:_,cancelConversion:A,loadPreviousResults:K,viewResult:E,downloadResult:z,deleteResult:M,clearAllResults:V,closePreviewModal:B}=se();return Q(async()=>{if(!l.isAuthenticated){t("Bitte melden Sie sich an, um den Dokumentenkonverter zu nutzen","warning");return}await K()}),(O,e)=>(m(),w("div",te,[e[9]||(e[9]=o("header",{class:"header"},[o("h1",{class:"title"},"nscale Dokumenten-Konverter"),o("p",{class:"subtitle"},"Konvertieren Sie Ihre Dokumente zu durchsuchbarem Text für das nscale DMS")],-1)),o("main",oe,[s(c)?(m(),I(U,{key:0,progress:s(d),"current-file":s(v),error:s(p),onCancel:s(A)},null,8,["progress","current-file","error","onCancel"])):(m(),w("div",ne,[o("div",re,[e[3]||(e[3]=o("h2",{class:"section-title"},"1. Dokumente hochladen",-1)),C(q,{"accepted-formats":s(F),"max-file-size":s(R),multiple:!0,onFilesSelected:s(D)},null,8,["accepted-formats","max-file-size","onFilesSelected"]),s(n).length>0?(m(),w("div",le,[o("h3",ae,"Ausgewählte Dateien ("+G(s(n).length)+")",1),C(H,{files:s(n),onRemoveFile:s(x)},null,8,["files","onRemoveFile"])])):P("",!0)]),o("div",ie,[e[4]||(e[4]=o("h2",{class:"section-title"},"2. Konvertierungsoptionen",-1)),C(Y,{options:s(u),"onUpdate:options":e[0]||(e[0]=a=>W(u)?u.value=a:null),disabled:s(n).length===0},null,8,["options","disabled"])]),o("div",ce,[e[7]||(e[7]=o("h2",{class:"section-title"},"3. Konvertierung starten",-1)),o("div",ue,[o("button",{class:"btn-primary",disabled:s(n).length===0||s(c),onClick:e[1]||(e[1]=(...a)=>s(_)&&s(_)(...a))},e[5]||(e[5]=[o("i",{class:"fas fa-sync-alt"},null,-1),L(" Konvertierung starten ")]),8,de),o("button",{class:"btn-secondary",disabled:s(n).length===0,onClick:e[2]||(e[2]=(...a)=>s(y)&&s(y)(...a))},e[6]||(e[6]=[o("i",{class:"fas fa-times"},null,-1),L(" Auswahl zurücksetzen ")]),8,ve)])])])),s(h).length>0?(m(),w("div",me,[e[8]||(e[8]=o("h2",{class:"section-title"},"Konvertierungsergebnisse",-1)),C(Z,{results:s(h),onViewResult:s(E),onDownloadResult:s(z),onDeleteResult:s(M),onClearAll:s(V)},null,8,["results","onViewResult","onDownloadResult","onDeleteResult","onClearAll"])])):P("",!0)]),s(f)?(m(),I(J,{key:0,"preview-data":s(b),onClose:s(B)},null,8,["preview-data","onClose"])):P("",!0)]))}},ge=$(pe,[["__scopeId","data-v-3961bc03"]]);document.addEventListener("DOMContentLoaded",()=>{const r=["doc-converter-app","doc-converter-container","docConverterContainer",'[data-vue-component="doc-converter"]'];let l=null;for(const t of r){const n=t.startsWith("[")?document.querySelector(t):document.getElementById(t);if(n){l=n,console.log(`Mount-Element für DocConverter gefunden: ${t}`);break}}if(l)try{const t=X(ge),n=ee();t.use(n),t.component("FontAwesomeIcon",{props:["icon"],template:'<i :class="icon"></i>'}),t.mount(l),console.log("DocConverter wurde erfolgreich initialisiert"),window.vueDocConverterInitialized=!0}catch(t){console.error("Fehler bei der Initialisierung des Vue.js DocConverters:",t),typeof window.initializeClassicDocConverter=="function"&&(console.warn("Aktiviere klassische DocConverter-Implementierung als Fallback"),window.initializeClassicDocConverter())}else console.warn("Kein Mounting-Element für DocConverter gefunden, überprüfe diese Selektoren:",r)});
//# sourceMappingURL=doc-converter.ae5f301b.js.map
