<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>nscale DMS Assistent - Admin Direct</title>

  <!-- CSS Dependencies -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css?v=20250508214949" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css?v=20250508214949">
  
  <!-- App CSS mit Cache-Busting -->
  <link href="/css/main.css?v=20250508214949" rel="stylesheet">
  <link href="/css/themes.css?v=20250508214949" rel="stylesheet">
  <link href="/css/improved-ui.css?v=20250508214949" rel="stylesheet">
  <link href="/css/admin.css?v=20250508214949" rel="stylesheet">
  <link href="/css/feedback.css?v=20250508214949" rel="stylesheet">
  <link href="/css/message-actions.css?v=20250508214949" rel="stylesheet">
  <link href="/css/settings.css?v=20250508214949" rel="stylesheet">
  <link href="/css/source-references.css?v=20250508214949" rel="stylesheet">
  <link href="/frontend/css/admin-panel.css?v=20250508214949" rel="stylesheet">
  
  <!-- Inline CSS-Root-Variablen zur Sicherheit -->
  <style>
    /* Admin-Bereich Styling */
    body {
      background-color: #f5f7fa;
      color: #333;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
    }
    
    .admin-panel {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    
    .admin-panel__header {
      background-color: #00a550;
      color: white;
      padding: 1rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .admin-panel__title {
      margin: 0;
      font-weight: 600;
    }
    
    .admin-panel__main {
      display: flex;
      flex: 1;
    }
    
    .admin-panel__sidebar {
      width: 250px;
      background-color: white;
      border-right: 1px solid #e5e5e5;
    }
    
    .admin-panel__nav {
      padding: 1rem 0.5rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .admin-panel__nav-item {
      display: flex;
      align-items: center;
      padding: 0.75rem 1rem;
      border-radius: 4px;
      cursor: pointer;
      background: transparent;
      border: none;
      text-align: left;
      transition: all 0.2s;
    }
    
    .admin-panel__nav-item:hover {
      background-color: #f5f5f5;
    }
    
    .admin-panel__nav-item--active {
      background-color: #00a550;
      color: white;
    }
    
    .admin-panel__nav-icon {
      margin-right: 0.75rem;
    }
    
    .admin-panel__content {
      flex: 1;
      padding: 1.5rem;
      background-color: white;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      margin: 1rem;
      border-radius: 4px;
    }
    
    /* Stat Cards */
    .admin-stat-card {
      padding: 1.5rem;
      border-radius: 4px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    .admin-stat-card--blue {
      background-color: #e6f7ff;
      border: 1px solid #91d5ff;
      color: #1890ff;
    }
    
    .admin-stat-card--green {
      background-color: #f6ffed;
      border: 1px solid #b7eb8f;
      color: #52c41a;
    }
    
    .admin-stat-card--purple {
      background-color: #f9f0ff;
      border: 1px solid #d3adf7;
      color: #722ed1;
    }
    
    .admin-stat-title {
      margin-top: 0;
      font-size: 1rem;
      font-weight: 500;
    }
    
    .admin-stat-value {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0;
    }
    
    .admin-status-panel {
      padding: 1.5rem;
      border-radius: 4px;
      background-color: white;
      border: 1px solid #e5e5e5;
    }
    
    /* User Role Badge */
    .admin-panel__role {
      background-color: rgba(0, 165, 80, 0.2);
      padding: 0.25rem 0.5rem;
      border-radius: 9999px;
      font-size: 0.875rem;
    }
    
    .admin-panel__role--admin {
      background-color: rgba(0, 165, 80, 0.3);
    }
  </style>
  
  <!-- Vue and dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/vue@3.2.47/dist/vue.global.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@vueuse/shared@9.13.0/index.iife.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@vueuse/core@9.13.0/index.iife.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue-demi@0.13.11/lib/index.iife.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pinia@2.0.33/dist/pinia.iife.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  
</head>
<body>
  <!-- Vue Mounting Element -->
  <div id="admin-direct-app" class="h-screen flex flex-col">
    <!-- Will be replaced by Vue app -->
    <div class="flex items-center justify-center h-screen">
      <div class="text-center p-8 bg-white rounded-lg shadow-md">
        <div class="animate-spin mb-4 mx-auto h-12 w-12 border-4 border-indigo-500 border-t-transparent rounded-full"></div>
        <p class="text-lg">Loading Admin Panel...</p>
      </div>
    </div>
  </div>

  <!-- Main Vue App Script -->
  <script>
    // Import Vue components from global variables - this is for direct access without bundler
    const { createApp, ref, computed, onMounted } = Vue;
    const { createPinia, defineStore } = Pinia;
    
    // Create app with Pinia
    const app = createApp({
      setup() {
        // Simple state for demonstration
        const activeTab = ref('dashboard');
        const isLoading = ref(true);
        const authUser = ref({ 
          role: 'admin',
          email: 'admin@example.com',
          id: 1
        });
        
        onMounted(() => {
          console.log('Admin Direct App mounted');
          // Simulate loading
          setTimeout(() => {
            isLoading.value = false;
          }, 1000);
        });
        
        // Change tab handler
        const setActiveTab = (tabId) => {
          activeTab.value = tabId;
          console.log(`Switched to tab: ${tabId}`);
        };
        
        return {
          activeTab,
          isLoading,
          authUser,
          setActiveTab
        };
      },
      template: `
        <div class="admin-panel h-full">
          <header class="admin-panel__header">
            <div class="container mx-auto flex justify-between items-center">
              <h1 class="admin-panel__title">nscale DMS Assistent - Admin Panel</h1>
              <div class="admin-panel__user-info">
                <span class="admin-panel__user-email">{{ authUser.email }}</span>
                <span class="admin-panel__role" :class="\`admin-panel__role--\${authUser.role}\`">
                  {{ authUser.role }}
                </span>
              </div>
            </div>
          </header>
          
          <main class="admin-panel__main">
            <!-- Sidebar -->
            <aside class="admin-panel__sidebar">
              <nav class="admin-panel__nav">
                <button 
                  v-for="tab in tabs" 
                  :key="tab.id"
                  @click="setActiveTab(tab.id)"
                  class="admin-panel__nav-item"
                  :class="{ 'admin-panel__nav-item--active': activeTab === tab.id }"
                >
                  <i :class="['admin-panel__nav-icon', tab.icon]"></i>
                  <span class="admin-panel__nav-label">{{ tab.label }}</span>
                </button>
              </nav>
            </aside>
            
            <!-- Content -->
            <div class="admin-panel__content">
              <div v-if="isLoading" class="flex items-center justify-center h-full">
                <div class="animate-spin h-8 w-8 border-4 border-indigo-500 border-t-transparent rounded-full"></div>
              </div>
              
              <div v-else>
                <!-- Dashboard -->
                <div v-if="activeTab === 'dashboard'" class="space-y-6">
                  <h2 class="text-2xl font-bold mb-4">Admin Dashboard</h2>
                  
                  <div class="grid grid-cols-3 gap-4">
                    <div class="admin-stat-card admin-stat-card--blue">
                      <h3 class="admin-stat-title">Users</h3>
                      <p class="admin-stat-value">3</p>
                    </div>
                    
                    <div class="admin-stat-card admin-stat-card--green">
                      <h3 class="admin-stat-title">Documents</h3>
                      <p class="admin-stat-value">42</p>
                    </div>
                    
                    <div class="admin-stat-card admin-stat-card--purple">
                      <h3 class="admin-stat-title">Sessions</h3>
                      <p class="admin-stat-value">128</p>
                    </div>
                  </div>
                  
                  <div class="admin-status-panel">
                    <h3 class="font-semibold mb-2">System Status</h3>
                    <div class="space-y-2">
                      <div class="flex justify-between">
                        <span>CPU Usage</span>
                        <span class="text-green-600">12%</span>
                      </div>
                      <div class="flex justify-between">
                        <span>Memory Usage</span>
                        <span class="text-green-600">28%</span>
                      </div>
                      <div class="flex justify-between">
                        <span>Disk Usage</span>
                        <span class="text-yellow-600">62%</span>
                      </div>
                      <div class="flex justify-between">
                        <span>API Status</span>
                        <span class="text-green-600">Online</span>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Users -->
                <div v-else-if="activeTab === 'users'" class="space-y-6">
                  <h2 class="text-2xl font-bold mb-4">User Management</h2>
                  
                  <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                      <thead class="bg-gray-50">
                        <tr>
                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Role</th>
                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                        </tr>
                      </thead>
                      <tbody class="bg-white divide-y divide-gray-200">
                        <tr>
                          <td class="px-6 py-4 whitespace-nowrap">1</td>
                          <td class="px-6 py-4 whitespace-nowrap">admin@example.com</td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs rounded-full bg-indigo-100 text-indigo-800">Admin</span>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">Active</span>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <button class="text-indigo-600 hover:text-indigo-900 mr-2">
                              <i class="fas fa-edit"></i>
                            </button>
                            <button class="text-red-600 hover:text-red-900">
                              <i class="fas fa-trash"></i>
                            </button>
                          </td>
                        </tr>
                        <tr>
                          <td class="px-6 py-4 whitespace-nowrap">2</td>
                          <td class="px-6 py-4 whitespace-nowrap">user@example.com</td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800">User</span>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">Active</span>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <button class="text-indigo-600 hover:text-indigo-900 mr-2">
                              <i class="fas fa-edit"></i>
                            </button>
                            <button class="text-red-600 hover:text-red-900">
                              <i class="fas fa-trash"></i>
                            </button>
                          </td>
                        </tr>
                        <tr>
                          <td class="px-6 py-4 whitespace-nowrap">3</td>
                          <td class="px-6 py-4 whitespace-nowrap">guest@example.com</td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800">Guest</span>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800">Inactive</span>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <button class="text-indigo-600 hover:text-indigo-900 mr-2">
                              <i class="fas fa-edit"></i>
                            </button>
                            <button class="text-red-600 hover:text-red-900">
                              <i class="fas fa-trash"></i>
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                
                <!-- Feature Toggles -->
                <div v-else-if="activeTab === 'featureToggles'" class="space-y-6">
                  <h2 class="text-2xl font-bold mb-4">Feature Toggles</h2>
                  
                  <div class="bg-blue-50 p-4 rounded-lg border border-blue-200 mb-6">
                    <p class="text-blue-800">
                      <i class="fas fa-info-circle mr-2"></i>
                      Manage feature toggles and migration settings. Changes take effect immediately.
                    </p>
                  </div>
                  
                  <div class="space-y-6">
                    <div class="border border-gray-200 rounded-lg overflow-hidden">
                      <div class="bg-gray-50 px-4 py-2 font-medium">SFC Migration Features</div>
                      <div class="p-4 space-y-4">
                        <div class="flex items-center justify-between">
                          <div>
                            <div class="font-medium">Admin Panel (SFC)</div>
                            <div class="text-sm text-gray-600">Use Vue 3 SFC implementation for admin panel</div>
                          </div>
                          <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" checked class="sr-only peer">
                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                          </label>
                        </div>
                        
                        <div class="flex items-center justify-between">
                          <div>
                            <div class="font-medium">Doc Converter (SFC)</div>
                            <div class="text-sm text-gray-600">Use Vue 3 SFC implementation for document converter</div>
                          </div>
                          <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" class="sr-only peer">
                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                          </label>
                        </div>
                        
                        <div class="flex items-center justify-between">
                          <div>
                            <div class="font-medium">Chat Interface (SFC)</div>
                            <div class="text-sm text-gray-600">Use Vue 3 SFC implementation for chat interface</div>
                          </div>
                          <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" class="sr-only peer">
                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                          </label>
                        </div>
                      </div>
                    </div>
                    
                    <div class="border border-gray-200 rounded-lg overflow-hidden">
                      <div class="bg-gray-50 px-4 py-2 font-medium">Core Features</div>
                      <div class="p-4 space-y-4">
                        <div class="flex items-center justify-between">
                          <div>
                            <div class="font-medium">Pinia Auth</div>
                            <div class="text-sm text-gray-600">Use Pinia store for authentication</div>
                          </div>
                          <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" checked class="sr-only peer">
                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                          </label>
                        </div>
                        
                        <div class="flex items-center justify-between">
                          <div>
                            <div class="font-medium">Pinia UI</div>
                            <div class="text-sm text-gray-600">Use Pinia store for UI state</div>
                          </div>
                          <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" checked class="sr-only peer">
                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Fallback content for other tabs -->
                <div v-else>
                  <h2 class="text-2xl font-bold mb-4">{{ getTabTitle(activeTab) }}</h2>
                  <p class="text-gray-600">
                    This tab content is being implemented. The content for this section is coming soon.
                  </p>
                </div>
              </div>
            </div>
          </main>
        </div>
      `,
      computed: {
        tabs() {
          return [
            { id: 'dashboard', label: 'Dashboard', icon: 'fas fa-tachometer-alt' },
            { id: 'users', label: 'Users', icon: 'fas fa-users' },
            { id: 'feedback', label: 'Feedback', icon: 'fas fa-comment' },
            { id: 'motd', label: 'MOTD', icon: 'fas fa-bullhorn' },
            { id: 'system', label: 'System', icon: 'fas fa-cogs' },
            { id: 'featureToggles', label: 'Feature Toggles', icon: 'fas fa-toggle-on' }
          ];
        }
      },
      methods: {
        getTabTitle(tabId) {
          const tabMap = {
            'dashboard': 'Dashboard',
            'users': 'User Management',
            'feedback': 'Feedback Analysis',
            'motd': 'Message of the Day',
            'system': 'System Monitoring',
            'featureToggles': 'Feature Toggles'
          };
          
          return tabMap[tabId] || 'Unknown Tab';
        }
      }
    });
    
    // Use Pinia
    const pinia = createPinia();
    app.use(pinia);
    
    // Mount the app
    app.mount('#admin-direct-app');
  </script>
  
  <!-- Fallback for JavaScript disabled -->
  <noscript>
    <div class="flex items-center justify-center h-screen bg-gray-100">
      <div class="text-center max-w-md mx-auto p-6 bg-white rounded-lg shadow-md">
        <div class="text-red-600 text-4xl mb-4">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <h1 class="text-xl font-bold mb-2">JavaScript erforderlich</h1>
        <p class="text-gray-600">
          Um die Admin-Oberfläche nutzen zu können, muss JavaScript aktiviert sein.
          Bitte aktivieren Sie JavaScript in Ihrem Browser und laden Sie die Seite neu.
        </p>
      </div>
    </div>
  </noscript>
</body>
</html>