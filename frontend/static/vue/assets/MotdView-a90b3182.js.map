{"version":3,"file":"MotdView-a90b3182.js","sources":["../../src/components/admin/motd/MotdEditor.vue","../../src/components/admin/motd/MotdPreview.vue","../../src/views/admin/MotdView.vue"],"sourcesContent":["<template>\n  <div class=\"motd-editor\">\n    <div class=\"card\">\n      <div class=\"card-header\">\n        <h3 class=\"card-title\">MOTD-Editor</h3>\n        <div class=\"action-buttons\">\n          <button \n            @click=\"reloadMotd\" \n            class=\"action-button reload-button\" \n            :disabled=\"loading\"\n            title=\"MOTD neu vom Server laden\">\n            <i class=\"fas fa-sync-alt\" :class=\"{ 'fa-spin': loading }\"></i>\n          </button>\n        </div>\n      </div>\n      \n      <div class=\"card-body\">\n        <div v-if=\"error\" class=\"error-message\">\n          <i class=\"fas fa-exclamation-triangle\"></i> {{ error }}\n        </div>\n        \n        <!-- Hauptschalter -->\n        <div class=\"form-group switch-container\">\n          <label class=\"switch-label\">MOTD aktivieren</label>\n          <div class=\"toggle-switch\">\n            <label class=\"switch\">\n              <input type=\"checkbox\" v-model=\"motdConfig.enabled\">\n              <span class=\"slider round\"></span>\n            </label>\n            <span class=\"status-text\">{{ motdConfig.enabled ? 'Aktiviert' : 'Deaktiviert' }}</span>\n          </div>\n        </div>\n        \n        <!-- Text-Editor -->\n        <div class=\"form-group\">\n          <label for=\"motdContent\">MOTD-Inhalt (Markdown)</label>\n          <div class=\"editor-wrapper\">\n            <div class=\"toolbar\">\n              <button type=\"button\" @click=\"insertMarkdown('**', '**')\" title=\"Fett\">\n                <i class=\"fas fa-bold\"></i>\n              </button>\n              <button type=\"button\" @click=\"insertMarkdown('*', '*')\" title=\"Kursiv\">\n                <i class=\"fas fa-italic\"></i>\n              </button>\n              <button type=\"button\" @click=\"insertMarkdown('## ', '')\" title=\"√úberschrift\">\n                <i class=\"fas fa-heading\"></i>\n              </button>\n              <button type=\"button\" @click=\"insertMarkdown('- ', '')\" title=\"Liste\">\n                <i class=\"fas fa-list-ul\"></i>\n              </button>\n              <button type=\"button\" @click=\"insertMarkdown('[', '](URL)')\" title=\"Link\">\n                <i class=\"fas fa-link\"></i>\n              </button>\n              <button type=\"button\" @click=\"insertMarkdown('> ', '')\" title=\"Zitat\">\n                <i class=\"fas fa-quote-right\"></i>\n              </button>\n              <button type=\"button\" @click=\"insertEmoji('üõ†Ô∏è')\" title=\"Tool-Emoji\">\n                <span>üõ†Ô∏è</span>\n              </button>\n              <button type=\"button\" @click=\"insertEmoji('‚ö†Ô∏è')\" title=\"Warnung-Emoji\">\n                <span>‚ö†Ô∏è</span>\n              </button>\n              <button type=\"button\" @click=\"insertEmoji('‚ÑπÔ∏è')\" title=\"Info-Emoji\">\n                <span>‚ÑπÔ∏è</span>\n              </button>\n              <button type=\"button\" @click=\"insertEmoji('üîí')\" title=\"Sicherheit-Emoji\">\n                <span>üîí</span>\n              </button>\n            </div>\n            <textarea \n              id=\"motdContent\" \n              v-model=\"motdConfig.content\" \n              rows=\"8\" \n              class=\"form-control\"\n              ref=\"contentEditor\"\n              @keydown.tab.prevent=\"handleTab\">\n            </textarea>\n          </div>\n          <div class=\"character-count\" :class=\"{ 'warning': contentLength > 800 }\">\n            {{ contentLength }} / 1000 Zeichen\n          </div>\n        </div>\n        \n        <!-- Farbauswahl -->\n        <div class=\"form-group\">\n          <label>Farbschema</label>\n          <div class=\"color-themes\">\n            <button \n              v-for=\"(colors, theme) in colorThemes\" \n              :key=\"theme\"\n              class=\"color-theme-button\" \n              :class=\"{ active: selectedTheme === theme }\"\n              :style=\"{ \n                'background-color': colors.backgroundColor, \n                'border-color': colors.borderColor,\n                'color': colors.textColor \n              }\"\n              @click=\"applyTheme(theme)\">\n              {{ getThemeName(theme) }}\n            </button>\n          </div>\n        </div>\n        \n        <!-- Icon-Auswahl -->\n        <div class=\"form-group\">\n          <label>Icon</label>\n          <div class=\"icon-selector\">\n            <button \n              v-for=\"icon in availableIcons\" \n              :key=\"icon\"\n              class=\"icon-button\"\n              :class=\"{ active: motdConfig.style.iconClass === icon }\"\n              @click=\"motdConfig.style.iconClass = icon\">\n              <i :class=\"['fas', `fa-${icon}`]\"></i>\n            </button>\n          </div>\n        </div>\n        \n        <!-- Anzeigeoptionen -->\n        <div class=\"form-group\">\n          <label>Anzeigeoptionen</label>\n          <div class=\"display-options\">\n            <div class=\"option\">\n              <label class=\"checkbox-container\">\n                <input type=\"checkbox\" v-model=\"motdConfig.display.dismissible\">\n                <span class=\"checkmark\"></span>\n                Schlie√üen erlauben\n              </label>\n            </div>\n            <div class=\"option\">\n              <label class=\"checkbox-container\">\n                <input type=\"checkbox\" v-model=\"motdConfig.display.showOnStartup\">\n                <span class=\"checkmark\"></span>\n                Bei Start anzeigen\n              </label>\n            </div>\n            <div class=\"option\">\n              <label class=\"checkbox-container\">\n                <input type=\"checkbox\" v-model=\"motdConfig.display.showInChat\">\n                <span class=\"checkmark\"></span>\n                Im Chat anzeigen\n              </label>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"card-footer\">\n        <button \n          @click=\"saveMotd\" \n          class=\"btn-primary save-button\" \n          :disabled=\"loading || !isValid\">\n          <i class=\"fas fa-save\"></i> Speichern\n        </button>\n        <button \n          @click=\"resetToDefaults\" \n          class=\"btn-secondary reset-button\" \n          :disabled=\"loading\">\n          <i class=\"fas fa-undo\"></i> Zur√ºcksetzen\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, watch } from 'vue';\nimport { useMotdStore } from '@/stores/motdStore';\n\nconst motdStore = useMotdStore();\n\n// Lokale Referenzen zum Store\nconst motdConfig = ref({ ...motdStore.adminEdit });\nconst loading = computed(() => motdStore.loading);\nconst error = computed(() => motdStore.error);\nconst colorThemes = computed(() => motdStore.colorThemes);\nconst selectedTheme = ref(motdStore.selectedColorTheme);\nconst contentEditor = ref(null);\n\n// Verf√ºgbare Icons\nconst availableIcons = [\n  'info-circle', \n  'exclamation-triangle', \n  'exclamation-circle',\n  'bell', \n  'bullhorn', \n  'comment', \n  'envelope',\n  'flag',\n  'lightbulb',\n  'shield-alt'\n];\n\n// Zeichenz√§hler\nconst contentLength = computed(() => motdConfig.value.content.length);\n\n// Validierung\nconst isValid = computed(() => \n  motdConfig.value.content.trim().length > 0 && \n  motdConfig.value.content.length <= 1000\n);\n\n// Namen f√ºr die Farbschemata\nconst getThemeName = (theme) => {\n  const names = {\n    warning: 'Warnung',\n    info: 'Info',\n    success: 'Erfolg',\n    danger: 'Wichtig',\n    neutral: 'Neutral'\n  };\n  return names[theme] || theme;\n};\n\n// Initialisierung\nonMounted(async () => {\n  await motdStore.loadMotdForEditing();\n  motdConfig.value = { ...motdStore.adminEdit };\n  selectedTheme.value = motdStore.selectedColorTheme;\n});\n\n// Synchronisiere mit dem Store, wenn sich Werte √§ndern\nwatch(() => motdStore.adminEdit, (newValue) => {\n  motdConfig.value = { ...newValue };\n}, { deep: true });\n\nwatch(() => motdStore.selectedColorTheme, (newValue) => {\n  selectedTheme.value = newValue;\n});\n\n// Methoden\nconst applyTheme = (theme) => {\n  selectedTheme.value = theme;\n  motdStore.applyColorTheme(theme);\n  motdConfig.value.style = { ...motdStore.adminEdit.style };\n};\n\nconst saveMotd = async () => {\n  try {\n    // √úbertrage die √Ñnderungen in den Store\n    motdStore.adminEdit = { ...motdConfig.value };\n    \n    // Speichern\n    await motdStore.saveMotd();\n  } catch (error) {\n    console.error('Fehler beim Speichern der MOTD:', error);\n  }\n};\n\nconst resetToDefaults = () => {\n  motdStore.resetMotdToDefaults();\n  motdConfig.value = { ...motdStore.adminEdit };\n  selectedTheme.value = motdStore.selectedColorTheme;\n};\n\nconst reloadMotd = async () => {\n  try {\n    await motdStore.loadMotdForEditing();\n    motdConfig.value = { ...motdStore.adminEdit };\n    selectedTheme.value = motdStore.selectedColorTheme;\n  } catch (error) {\n    console.error('Fehler beim Neuladen der MOTD:', error);\n  }\n};\n\n// Markdown-Editorfunktionen\nconst insertMarkdown = (prefix, suffix) => {\n  const textarea = contentEditor.value;\n  if (!textarea) return;\n  \n  const start = textarea.selectionStart;\n  const end = textarea.selectionEnd;\n  const selectedText = motdConfig.value.content.substring(start, end);\n  const beforeText = motdConfig.value.content.substring(0, start);\n  const afterText = motdConfig.value.content.substring(end);\n  \n  motdConfig.value.content = beforeText + prefix + selectedText + suffix + afterText;\n  \n  // Position des Cursors neu setzen\n  setTimeout(() => {\n    textarea.focus();\n    textarea.selectionStart = start + prefix.length;\n    textarea.selectionEnd = start + prefix.length + selectedText.length;\n  }, 0);\n};\n\nconst insertEmoji = (emoji) => {\n  const textarea = contentEditor.value;\n  if (!textarea) return;\n  \n  const start = textarea.selectionStart;\n  const beforeText = motdConfig.value.content.substring(0, start);\n  const afterText = motdConfig.value.content.substring(start);\n  \n  motdConfig.value.content = beforeText + emoji + ' ' + afterText;\n  \n  // Position des Cursors nach dem Emoji setzen\n  setTimeout(() => {\n    textarea.focus();\n    textarea.selectionStart = textarea.selectionEnd = start + emoji.length + 1;\n  }, 0);\n};\n\nconst handleTab = (e) => {\n  const textarea = contentEditor.value;\n  if (!textarea) return;\n  \n  const start = textarea.selectionStart;\n  const end = textarea.selectionEnd;\n  \n  // F√ºge zwei Leerzeichen ein\n  motdConfig.value.content = motdConfig.value.content.substring(0, start) + '  ' + motdConfig.value.content.substring(end);\n  \n  // Position des Cursors nach den eingef√ºgten Leerzeichen setzen\n  setTimeout(() => {\n    textarea.focus();\n    textarea.selectionStart = textarea.selectionEnd = start + 2;\n  }, 0);\n};\n</script>\n\n<style scoped>\n.motd-editor {\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n.card {\n  background-color: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  margin-bottom: 2rem;\n  overflow: hidden;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  background-color: #f9f9f9;\n}\n\n.card-title {\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 600;\n}\n\n.card-body {\n  padding: 1.5rem;\n}\n\n.card-footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  padding: 1rem 1.5rem;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  background-color: #f9f9f9;\n}\n\n.action-buttons {\n  display: flex;\n  gap: 0.5rem;\n}\n\n.action-button {\n  background: none;\n  border: none;\n  color: #555;\n  font-size: 1rem;\n  cursor: pointer;\n  width: 36px;\n  height: 36px;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.action-button:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n  color: #333;\n}\n\n.action-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.reload-button {\n  color: #2d6da3;\n}\n\n.form-group {\n  margin-bottom: 1.5rem;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 0.5rem;\n  font-weight: 600;\n  color: #444;\n}\n\n.form-control {\n  width: 100%;\n  padding: 0.75rem;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font-family: monospace;\n  font-size: 0.9rem;\n  line-height: 1.5;\n  resize: vertical;\n}\n\n.switch-container {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.5rem 0;\n}\n\n.switch-label {\n  font-weight: 600;\n  margin-bottom: 0;\n}\n\n.toggle-switch {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n.switch {\n  position: relative;\n  display: inline-block;\n  width: 50px;\n  height: 24px;\n}\n\n.switch input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #ccc;\n  transition: .4s;\n}\n\n.slider:before {\n  position: absolute;\n  content: \"\";\n  height: 16px;\n  width: 16px;\n  left: 4px;\n  bottom: 4px;\n  background-color: white;\n  transition: .4s;\n}\n\ninput:checked + .slider {\n  background-color: #2d6da3;\n}\n\ninput:focus + .slider {\n  box-shadow: 0 0 1px #2d6da3;\n}\n\ninput:checked + .slider:before {\n  transform: translateX(26px);\n}\n\n.slider.round {\n  border-radius: 24px;\n}\n\n.slider.round:before {\n  border-radius: 50%;\n}\n\n.status-text {\n  font-size: 0.9rem;\n  color: #666;\n  width: 5rem;\n}\n\n.editor-wrapper {\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.toolbar {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 2px;\n  padding: 4px;\n  background-color: #f5f5f5;\n  border-bottom: 1px solid #ddd;\n}\n\n.toolbar button {\n  width: 32px;\n  height: 32px;\n  background: none;\n  border: none;\n  border-radius: 3px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #555;\n}\n\n.toolbar button:hover {\n  background-color: #e0e0e0;\n  color: #333;\n}\n\n.character-count {\n  text-align: right;\n  margin-top: 4px;\n  font-size: 0.8rem;\n  color: #666;\n}\n\n.character-count.warning {\n  color: #e65100;\n}\n\n.color-themes {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-top: 10px;\n}\n\n.color-theme-button {\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 500;\n  border-width: 2px;\n  border-style: solid;\n  transition: transform 0.2s;\n}\n\n.color-theme-button:hover {\n  transform: translateY(-2px);\n}\n\n.color-theme-button.active {\n  box-shadow: 0 0 0 2px #2d6da3;\n}\n\n.icon-selector {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-top: 10px;\n}\n\n.icon-button {\n  width: 40px;\n  height: 40px;\n  background-color: #f5f5f5;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.2rem;\n  color: #555;\n  transition: all 0.2s;\n}\n\n.icon-button:hover {\n  background-color: #e0e0e0;\n  transform: scale(1.05);\n}\n\n.icon-button.active {\n  background-color: #e3f2fd;\n  color: #1976d2;\n  border-color: #90caf9;\n}\n\n.display-options {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-top: 10px;\n}\n\n.option {\n  display: flex;\n  align-items: center;\n}\n\n.checkbox-container {\n  display: flex;\n  align-items: center;\n  position: relative;\n  padding-left: 30px;\n  cursor: pointer;\n  user-select: none;\n}\n\n.checkbox-container input {\n  position: absolute;\n  opacity: 0;\n  cursor: pointer;\n  height: 0;\n  width: 0;\n}\n\n.checkmark {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 20px;\n  width: 20px;\n  background-color: #f5f5f5;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n}\n\n.checkbox-container:hover input ~ .checkmark {\n  background-color: #e0e0e0;\n}\n\n.checkbox-container input:checked ~ .checkmark {\n  background-color: #2d6da3;\n  border-color: #2d6da3;\n}\n\n.checkmark:after {\n  content: \"\";\n  position: absolute;\n  display: none;\n}\n\n.checkbox-container input:checked ~ .checkmark:after {\n  display: block;\n}\n\n.checkbox-container .checkmark:after {\n  left: 7px;\n  top: 3px;\n  width: 5px;\n  height: 10px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n}\n\n.btn-primary, .btn-secondary {\n  padding: 0.75rem 1.5rem;\n  border: none;\n  border-radius: 4px;\n  font-weight: 600;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: background-color 0.2s;\n}\n\n.btn-primary {\n  background-color: #2d6da3;\n  color: white;\n}\n\n.btn-primary:hover {\n  background-color: #295f8d;\n}\n\n.btn-secondary {\n  background-color: #f5f5f5;\n  color: #555;\n}\n\n.btn-secondary:hover {\n  background-color: #e0e0e0;\n}\n\n.btn-primary:disabled, .btn-secondary:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.error-message {\n  padding: 0.75rem;\n  margin-bottom: 1rem;\n  background-color: #fee;\n  border-left: 4px solid #d32f2f;\n  color: #d32f2f;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n/* Dark Mode Support */\n:global(.theme-dark) .card {\n  background-color: #2a2a2a;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);\n}\n\n:global(.theme-dark) .card-header,\n:global(.theme-dark) .card-footer {\n  background-color: #222;\n  border-color: #444;\n}\n\n:global(.theme-dark) .card-title {\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .form-group label {\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .form-control {\n  background-color: #333;\n  border-color: #555;\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .toolbar {\n  background-color: #333;\n  border-color: #444;\n}\n\n:global(.theme-dark) .toolbar button {\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .toolbar button:hover {\n  background-color: #444;\n}\n\n:global(.theme-dark) .icon-button {\n  background-color: #333;\n  border-color: #555;\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .icon-button:hover {\n  background-color: #444;\n}\n\n:global(.theme-dark) .icon-button.active {\n  background-color: #1a3f5f;\n  color: #90caf9;\n  border-color: #1976d2;\n}\n\n:global(.theme-dark) .btn-secondary {\n  background-color: #333;\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .btn-secondary:hover {\n  background-color: #444;\n}\n\n:global(.theme-dark) .status-text {\n  color: #bbb;\n}\n\n:global(.theme-dark) .slider {\n  background-color: #444;\n}\n\n:global(.theme-dark) .checkmark {\n  background-color: #333;\n  border-color: #555;\n}\n\n:global(.theme-dark) .checkbox-container:hover input ~ .checkmark {\n  background-color: #444;\n}\n</style>","<template>\n  <div class=\"motd-preview\">\n    <div class=\"preview-header\">\n      <h3 class=\"preview-title\">Vorschau</h3>\n      <div class=\"preview-controls\">\n        <div class=\"preview-toggle\">\n          <label>\n            <input type=\"checkbox\" v-model=\"showAsMobile\">\n            <span>Mobile Ansicht</span>\n          </label>\n        </div>\n      </div>\n    </div>\n    \n    <div class=\"preview-container\" :class=\"{ 'mobile-view': showAsMobile }\">\n      <div \n        v-if=\"motdConfig.enabled\" \n        class=\"motd-message\"\n        :class=\"{'dismissible': motdConfig.display.dismissible}\"\n        :style=\"{\n          backgroundColor: motdConfig.style.backgroundColor,\n          borderColor: motdConfig.style.borderColor,\n          color: motdConfig.style.textColor\n        }\"\n      >\n        <div class=\"motd-inner\">\n          <div class=\"motd-icon\" v-if=\"motdConfig.style.iconClass\">\n            <i :class=\"['fas', `fa-${motdConfig.style.iconClass}`]\"></i>\n          </div>\n          <div class=\"motd-content\" v-html=\"renderedContent\"></div>\n          <div v-if=\"motdConfig.display.dismissible\" class=\"motd-close\">\n            <button class=\"close-button\" title=\"Schlie√üen\">\n              <i class=\"fas fa-times\"></i>\n            </button>\n          </div>\n        </div>\n      </div>\n      <div v-else class=\"motd-disabled\">\n        <i class=\"fas fa-eye-slash\"></i>\n        <p>MOTD ist deaktiviert und wird Benutzern nicht angezeigt.</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue';\nimport { marked } from 'marked';\nimport DOMPurify from 'dompurify';\n\nconst props = defineProps({\n  motdConfig: {\n    type: Object,\n    required: true\n  }\n});\n\nconst showAsMobile = ref(false);\n\n// Markdown in HTML umwandeln mit DOMPurify zur Sicherheit\nconst renderedContent = computed(() => {\n  if (!props.motdConfig.content) return '';\n  \n  try {\n    // Markdown in HTML konvertieren\n    const rawHtml = marked.parse(props.motdConfig.content);\n    \n    // HTML bereinigen (XSS-Schutz)\n    return DOMPurify.sanitize(rawHtml);\n  } catch (error) {\n    console.error('Fehler beim Rendern des Markdown-Inhalts:', error);\n    return `<p class=\"error\">Fehler beim Rendern des Inhalts</p>`;\n  }\n});\n</script>\n\n<style scoped>\n.motd-preview {\n  margin-top: 2rem;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.preview-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem 1.5rem;\n  background-color: #f9f9f9;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n.preview-title {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n}\n\n.preview-controls {\n  display: flex;\n  align-items: center;\n}\n\n.preview-toggle {\n  display: flex;\n  align-items: center;\n}\n\n.preview-toggle label {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  font-size: 0.9rem;\n  color: #666;\n}\n\n.preview-toggle input {\n  margin-right: 8px;\n}\n\n.preview-container {\n  padding: 1.5rem;\n  transition: all 0.3s ease;\n  background-color: #f5f5f5;\n  min-height: 200px;\n  max-height: 600px;\n  overflow: auto;\n}\n\n.preview-container.mobile-view {\n  max-width: 400px;\n  margin: 0 auto;\n  border: 10px solid #333;\n  border-radius: 20px;\n  padding: 0.75rem;\n}\n\n.motd-message {\n  border-radius: 8px;\n  padding: 1rem;\n  border-width: 1px;\n  border-style: solid;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n  margin-bottom: 1rem;\n  position: relative;\n}\n\n.motd-message.dismissible {\n  padding-right: 2.5rem;\n}\n\n.motd-inner {\n  display: flex;\n}\n\n.motd-icon {\n  flex-shrink: 0;\n  margin-right: 1rem;\n  font-size: 1.5rem;\n  height: 1.5rem;\n  display: flex;\n  align-items: flex-start;\n}\n\n.motd-content {\n  flex-grow: 1;\n  font-size: 0.95rem;\n}\n\n.motd-content :deep(p) {\n  margin-top: 0;\n  margin-bottom: 0.75rem;\n}\n\n.motd-content :deep(p:last-child) {\n  margin-bottom: 0;\n}\n\n.motd-content :deep(ul), .motd-content :deep(ol) {\n  margin-top: 0.5rem;\n  margin-bottom: 0.75rem;\n  padding-left: 1.5rem;\n}\n\n.motd-content :deep(a) {\n  color: inherit;\n  text-decoration: underline;\n}\n\n.motd-content :deep(h1), .motd-content :deep(h2), .motd-content :deep(h3) {\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n  font-weight: 600;\n}\n\n.motd-content :deep(h1) {\n  font-size: 1.25rem;\n}\n\n.motd-content :deep(h2) {\n  font-size: 1.15rem;\n}\n\n.motd-content :deep(h3) {\n  font-size: 1.05rem;\n}\n\n.motd-close {\n  position: absolute;\n  top: 0.75rem;\n  right: 0.75rem;\n}\n\n.close-button {\n  background: none;\n  border: none;\n  color: inherit;\n  opacity: 0.6;\n  cursor: pointer;\n  font-size: 1rem;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n}\n\n.close-button:hover {\n  opacity: 1;\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.motd-disabled {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  padding: 2rem;\n  color: #888;\n  background-color: #f0f0f0;\n  border-radius: 8px;\n  border: 1px dashed #ccc;\n}\n\n.motd-disabled i {\n  font-size: 2rem;\n  margin-bottom: 1rem;\n  opacity: 0.7;\n}\n\n.motd-disabled p {\n  margin: 0;\n}\n\n/* Dark Mode Support */\n:global(.theme-dark) .preview-header {\n  background-color: #222;\n  border-color: #444;\n}\n\n:global(.theme-dark) .preview-title {\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .preview-toggle label {\n  color: #bbb;\n}\n\n:global(.theme-dark) .preview-container {\n  background-color: #333;\n}\n\n:global(.theme-dark) .preview-container.mobile-view {\n  border-color: #111;\n}\n\n:global(.theme-dark) .motd-disabled {\n  background-color: #222;\n  border-color: #444;\n  color: #aaa;\n}\n\n/* Kontrast-Modus Anpassungen */\n:global(.theme-contrast) .preview-header {\n  background-color: #000;\n  border-color: #ffeb3b;\n}\n\n:global(.theme-contrast) .preview-title {\n  color: #ffeb3b;\n}\n\n:global(.theme-contrast) .preview-container {\n  background-color: #111;\n}\n\n:global(.theme-contrast) .motd-disabled {\n  background-color: #000;\n  border: 2px solid #ffeb3b;\n  color: #ffeb3b;\n}\n</style>","<template>\n  <div class=\"admin-sub-view\">\n    <h1>{{ viewTitle }}</h1>\n    <p>Hier k√∂nnen Sie die systeminterne Nachricht des Tages (MOTD) konfigurieren, die allen Benutzern angezeigt wird.</p>\n    \n    <div v-if=\"isLoading\" class=\"loading-indicator\">\n      <i class=\"fas fa-spinner fa-spin\"></i>\n      <span>Lade MOTD-Konfiguration...</span>\n    </div>\n    \n    <div v-else-if=\"errorMessage\" class=\"error-message\">\n      <i class=\"fas fa-exclamation-triangle\"></i>\n      <span>{{ errorMessage }}</span>\n      <button @click=\"loadMotdData\" class=\"retry-button\">\n        <i class=\"fas fa-sync-alt\"></i> Erneut versuchen\n      </button>\n    </div>\n    \n    <div v-else class=\"motd-management-container\">\n      <!-- MOTD Editor und Preview in einem Grid Layout -->\n      <div class=\"motd-grid\">\n        <div class=\"editor-area\">\n          <MotdEditor :key=\"editorKey\" />\n        </div>\n        <div class=\"preview-area\">\n          <MotdPreview :motd-config=\"motdConfig\" />\n        </div>\n      </div>\n      \n      <!-- Zus√§tzliche Hinweise -->\n      <div class=\"motd-help\">\n        <h3>\n          <i class=\"fas fa-info-circle\"></i>\n          Hinweise zur MOTD-Konfiguration\n        </h3>\n        <ul>\n          <li>Die MOTD wird allen Benutzern im System angezeigt.</li>\n          <li>Sie k√∂nnen Markdown-Formatierung verwenden, um den Text zu gestalten.</li>\n          <li>Ein guter MOTD enth√§lt wichtige aktuelle Systeminformationen, Wartungshinweise oder Neuigkeiten.</li>\n          <li>Beim Speichern wird die MOTD sofort f√ºr alle Benutzer sichtbar.</li>\n          <li>Achten Sie auf eine angemessene L√§nge - die Nachricht sollte kurz und pr√§gnant sein.</li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted } from 'vue';\nimport { useMotdStore } from '@/stores/motdStore';\nimport MotdEditor from '@/components/admin/motd/MotdEditor.vue';\nimport MotdPreview from '@/components/admin/motd/MotdPreview.vue';\n\n// Store-Referenz\nconst motdStore = useMotdStore();\n\n// Lokale Zust√§nde\nconst isLoading = ref(true);\nconst errorMessage = ref('');\nconst editorKey = ref(0); // Wird verwendet, um den Editor neu zu mounten\n\n// Titel f√ºr diese Ansicht\nconst viewTitle = 'MOTD-Konfiguration';\n\n// Aktuelle MOTD-Konfiguration\nconst motdConfig = computed(() => motdStore.adminEdit);\n\n// MOTD-Daten laden\nconst loadMotdData = async () => {\n  isLoading.value = true;\n  errorMessage.value = '';\n  \n  try {\n    await motdStore.loadMotdForEditing();\n    editorKey.value++; // Editor neu mounten\n  } catch (error) {\n    console.error('Fehler beim Laden der MOTD-Daten:', error);\n    errorMessage.value = 'Die MOTD-Konfiguration konnte nicht geladen werden. Bitte versuchen Sie es sp√§ter erneut.';\n  } finally {\n    isLoading.value = false;\n  }\n};\n\n// Watcher f√ºr Store-√Ñnderungen\nlet unsubscribe = null;\n\nonMounted(() => {\n  // MOTD-Daten laden\n  loadMotdData();\n  \n  // Auf Store-√Ñnderungen reagieren (z.B. wenn gespeichert wird)\n  unsubscribe = motdStore.$subscribe((mutation, state) => {\n    if (mutation.type === 'direct' && mutation.events.key === 'adminEdit') {\n      // MOTD wurde im Store aktualisiert\n      console.log('MOTD-Konfiguration wurde aktualisiert');\n    }\n  });\n});\n\nonUnmounted(() => {\n  // Store-Subscription aufr√§umen\n  if (unsubscribe) {\n    unsubscribe();\n  }\n});\n</script>\n\n<style scoped>\n.admin-sub-view {\n  padding: 1.5rem;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.loading-indicator {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem;\n  background-color: var(--nscale-gray-light, #f8f9fa);\n  border-radius: 8px;\n  border: 1px solid var(--nscale-gray-medium, #e0e3e8);\n  color: var(--nscale-gray-dark, #4a5568);\n  gap: 1rem;\n}\n\n.loading-indicator i {\n  font-size: 1.5rem;\n  color: #2d6da3;\n}\n\n.error-message {\n  display: flex;\n  align-items: center;\n  padding: 1.5rem;\n  background-color: #fee;\n  border-left: 4px solid #d32f2f;\n  color: #d32f2f;\n  border-radius: 4px;\n  margin: 1.5rem 0;\n  gap: 1rem;\n}\n\n.error-message i {\n  font-size: 1.5rem;\n}\n\n.retry-button {\n  margin-left: auto;\n  padding: 0.5rem 1rem;\n  background-color: #f5f5f5;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: #555;\n  transition: background-color 0.2s;\n}\n\n.retry-button:hover {\n  background-color: #e0e0e0;\n}\n\n.motd-management-container {\n  margin-top: 1.5rem;\n}\n\n.motd-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1.5rem;\n  margin-bottom: 2rem;\n}\n\n@media (max-width: 1024px) {\n  .motd-grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n.motd-help {\n  background-color: #e8f4fd;\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-top: 2rem;\n  border-left: 4px solid #2d6da3;\n}\n\n.motd-help h3 {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-top: 0;\n  color: #2d6da3;\n  font-size: 1.1rem;\n}\n\n.motd-help ul {\n  margin-top: 1rem;\n  padding-left: 1.5rem;\n}\n\n.motd-help li {\n  margin-bottom: 0.5rem;\n}\n\n.motd-help li:last-child {\n  margin-bottom: 0;\n}\n\n/* Dark Mode Anpassungen */\n:global(.theme-dark) .loading-indicator {\n  background-color: #2a2a2a;\n  border-color: #444;\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .retry-button {\n  background-color: #333;\n  border-color: #555;\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .retry-button:hover {\n  background-color: #444;\n}\n\n:global(.theme-dark) .motd-help {\n  background-color: #1a3f5f;\n  border-left-color: #2d6da3;\n  color: #e0e0e0;\n}\n\n:global(.theme-dark) .motd-help h3 {\n  color: #90caf9;\n}\n\n/* Kontrast-Modus Anpassungen */\n:global(.theme-contrast) .loading-indicator {\n  background-color: #000;\n  border: 2px solid #ffeb3b;\n  color: #ffeb3b;\n}\n\n:global(.theme-contrast) .loading-indicator i {\n  color: #ffeb3b;\n}\n\n:global(.theme-contrast) .retry-button {\n  background-color: #000;\n  border-color: #ffeb3b;\n  color: #ffeb3b;\n}\n\n:global(.theme-contrast) .retry-button:hover {\n  background-color: #333;\n}\n\n:global(.theme-contrast) .motd-help {\n  background-color: #000;\n  border: 2px solid #ffeb3b;\n  color: #ffeb3b;\n}\n\n:global(.theme-contrast) .motd-help h3 {\n  color: #ffeb3b;\n}\n</style>\n"],"names":["motdStore","useMotdStore","motdConfig","ref","loading","computed","error","colorThemes","selectedTheme","contentEditor","availableIcons","contentLength","isValid","getThemeName","theme","onMounted","watch","newValue","applyTheme","saveMotd","resetToDefaults","reloadMotd","insertMarkdown","prefix","suffix","textarea","start","end","selectedText","beforeText","afterText","insertEmoji","emoji","handleTab","e","props","__props","showAsMobile","renderedContent","rawHtml","marked","DOMPurify","viewTitle","isLoading","errorMessage","editorKey","loadMotdData","unsubscribe","mutation","state","onUnmounted"],"mappings":"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"}