import{e as l}from"./_plugin-vue_export-helper.89064427.js";const n=l("featureToggle",{state:()=>{const e=localStorage.getItem("vue_migration_complete")==="true";return{useNewUI:e?!0:localStorage.getItem("useNewUI")==="true",features:(s=>e?{...s,vueDocConverter:!0,vueChat:!0,vueAdmin:!0,vueSettings:!0}:s)({vueDocConverter:e?!0:localStorage.getItem("feature_vueDocConverter")==="true",vueChat:e?!0:localStorage.getItem("feature_vueChat")==="true",vueAdmin:e?!0:localStorage.getItem("feature_vueAdmin")==="true",vueSettings:e?!0:localStorage.getItem("feature_vueSettings")==="true",darkMode:localStorage.getItem("feature_darkMode")==="true"||!1,advancedSearch:localStorage.getItem("feature_advancedSearch")==="true"||!1,experimentalUI:localStorage.getItem("feature_experimentalUI")==="true"||!1}),devMode:localStorage.getItem("devMode")==="true"||!1,migrationComplete:e}},getters:{isFeatureEnabled:e=>t=>e.migrationComplete&&["vueDocConverter","vueChat","vueAdmin","vueSettings"].includes(t)?!0:e.features[t]||!1,activeFeatures:e=>Object.entries(e.features).filter(([t,r])=>r).map(([t])=>t)},actions:{init(){this.migrationComplete&&(this.useNewUI=!0,this.features.vueDocConverter=!0,this.features.vueChat=!0,this.features.vueAdmin=!0,this.features.vueSettings=!0,localStorage.setItem("useNewUI","true"),localStorage.setItem("feature_useNewUI","true"),localStorage.setItem("feature_vueDocConverter","true"),localStorage.setItem("feature_vueChat","true"),localStorage.setItem("feature_vueAdmin","true"),localStorage.setItem("feature_vueSettings","true"),localStorage.removeItem("useOldUI"),localStorage.removeItem("disableVue"),localStorage.removeItem("forceClassicDocConverter")),this.loadAdminCSS()},loadAdminCSS(){const e=["admin.css","admin-styles.css","vue-fix.css"],t=["/css/","/frontend/css/","/static/css/","/nscale-vue/src/assets/css/"];e.forEach(r=>{if(document.querySelector(`link[href$="/${r}"]`))return;let s=!1;t.forEach(o=>{if(s)return;const a=`${o}${r}`;try{const u=document.createElement("link");u.rel="stylesheet",u.href=a,u.onload=()=>{s=!0},document.head.appendChild(u)}catch(u){console.error(`[FeatureToggleStore] Fehler beim Laden von CSS ${a}:`,u)}})})},toggleFeature(e,t){if(this.migrationComplete&&["vueDocConverter","vueChat","vueAdmin","vueSettings"].includes(e)){console.warn(`${e} ist eine Kernfunktion und kann nicht deaktiviert werden.`);return}this.features.hasOwnProperty(e)&&(this.features[e]=t,localStorage.setItem(`feature_${e}`,t.toString()))},toggleDevMode(e){this.devMode=e,localStorage.setItem("devMode",e.toString())},enableAllOptionalFeatures(){Object.keys(this.features).filter(t=>!["vueDocConverter","vueChat","vueAdmin","vueSettings"].includes(t)).forEach(t=>{this.features[t]=!0,localStorage.setItem(`feature_${t}`,"true")})},disableAllOptionalFeatures(){Object.keys(this.features).filter(t=>!["vueDocConverter","vueChat","vueAdmin","vueSettings"].includes(t)).forEach(t=>{this.features[t]=!1,localStorage.setItem(`feature_${t}`,"false")})},resetAllSettings(e=!1){const t=this.migrationComplete;t&&console.log("[FeatureToggleStore] Migration abgeschlossen - Kernfunktionen werden beim Reset beibehalten"),localStorage.removeItem("featureSettings"),Object.keys(this.features).forEach(r=>{t&&["vueDocConverter","vueChat","vueAdmin","vueSettings"].includes(r)?(this.features[r]=!0,localStorage.setItem(`feature_${r}`,"true")):(localStorage.removeItem(`feature_${r}`),this.features[r]=!1)}),t?(this.useNewUI=!0,localStorage.setItem("useNewUI","true"),localStorage.setItem("feature_useNewUI","true"),localStorage.setItem("vue_migration_complete","true")):(this.useNewUI=!1,localStorage.removeItem("useNewUI"),localStorage.removeItem("feature_useNewUI")),localStorage.removeItem("useOldUI"),localStorage.removeItem("disableVue"),localStorage.removeItem("forceClassicDocConverter"),!e&&!t&&(console.log("[FeatureToggleStore] Einstellungen zurückgesetzt, Seite wird neu geladen"),window.location.reload())},setConfig(e,t=!1){const r=[];e.hasOwnProperty("useNewUI")&&!this.migrationComplete&&e.useNewUI!==this.useNewUI&&(this.useNewUI=e.useNewUI,localStorage.setItem("useNewUI",e.useNewUI.toString()),r.push("useNewUI")),e.features&&Object.entries(e.features).forEach(([o,a])=>{if(this.migrationComplete&&["vueDocConverter","vueChat","vueAdmin","vueSettings"].includes(o)){a||console.warn(`[FeatureToggleStore] ${o} ist eine Kernfunktion und kann nicht deaktiviert werden.`);return}this.features.hasOwnProperty(o)&&this.features[o]!==a&&(this.features[o]=a,localStorage.setItem(`feature_${o}`,a.toString()),r.push(o))}),e.hasOwnProperty("devMode")&&e.devMode!==this.devMode&&(this.devMode=e.devMode,localStorage.setItem("devMode",e.devMode.toString())),!t&&r.length>0?(console.log(`[FeatureToggleStore] Konfiguration aktualisiert (${r.join(", ")}), Seite wird neu geladen`),window.location.reload()):r.length>0&&console.log(`[FeatureToggleStore] Konfiguration aktualisiert (${r.join(", ")}), kein Reload durchgeführt`)}}});export{n as u};
//# sourceMappingURL=featureToggleStore.30aa4d67.js.map
