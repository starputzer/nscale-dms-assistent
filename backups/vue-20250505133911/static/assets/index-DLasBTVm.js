const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./HomeView-DhdpqIGU.js","./vue-vendor-CBOooRdR.js","./_plugin-vue_export-helper-DlAUqK2U.js","./HomeView-CqQTh5R2.css","./LoginView-CJ-OBmzF.js","./http-xsH4HHeE.js","./LoginView-CoEQjVGO.css","./AdminView-9bSIl8V7.js","./AdminView-CEOCTH3j.css","./ChatView-IJ1n2LqA.js","./ChatView-C4U9WdMw.css","./DocConverterView-Brcab3I9.js","./DocConverterView-BIp_CUZI.css","./SettingsView--j6C6dlW.js","./SettingsView-DRZ2X8Rz.css","./NotFoundView-X-2kCSCB.js","./NotFoundView-9X5DSU9W.css"])))=>i.map(i=>d[i]);
import{d as P,c as O,u as T,o as $,a as R,b as I,e as g,f as A,g as p,h as b,w as d,r as D,i as q,j as S,k as E,T as F,l as B,m as M,n as j,p as U,q as z}from"./vue-vendor-CBOooRdR.js";import{a as f}from"./http-xsH4HHeE.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function s(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(o){if(o.ep)return;o.ep=!0;const t=s(o);fetch(o.href,t)}})();const H=P("auth",{state:()=>({token:localStorage.getItem("token")||"",user:null,userRole:localStorage.getItem("userRole")||"user",loading:!1,error:null}),getters:{isAuthenticated:e=>!!e.token,isAdmin:e=>e.userRole==="admin"},actions:{async login(e,r){var s,a;this.loading=!0,this.error=null;try{const o=await f.post("/api/auth/login",{email:e,password:r});return this.token=o.data.token,this.userRole=o.data.user_role||"user",localStorage.setItem("token",this.token),localStorage.setItem("userRole",this.userRole),f.defaults.headers.common.Authorization=`Bearer ${this.token}`,!0}catch(o){return this.error=((a=(s=o.response)==null?void 0:s.data)==null?void 0:a.detail)||"Login fehlgeschlagen",!1}finally{this.loading=!1}},async logout(){this.token="",this.userRole="user",this.user=null,localStorage.removeItem("token"),localStorage.removeItem("userRole"),delete f.defaults.headers.common.Authorization},async loadUserData(){var e;if(this.token)try{const r=await f.get("/api/auth/user");this.user=r.data,this.userRole=r.data.role||"user",localStorage.setItem("userRole",this.userRole)}catch(r){((e=r.response)==null?void 0:e.status)===401&&this.logout()}},initAuth(){const e=localStorage.getItem("token"),r=localStorage.getItem("userRole");e&&(this.token=e,this.userRole=r||"user",f.defaults.headers.common.Authorization=`Bearer ${e}`,this.loadUserData())}}}),x=P("featureToggle",{state:()=>({features:{vueDocConverter:localStorage.getItem("feature_vueDocConverter")==="true"||!1,vueAdmin:localStorage.getItem("feature_vueAdmin")==="true"||!1,vueSettings:localStorage.getItem("feature_vueSettings")==="true"||!1,vueChat:localStorage.getItem("feature_vueChat")==="true"||!1},isDevelopmentMode:!1}),getters:{isDocConverterEnabled:e=>e.features.vueDocConverter,isAdminEnabled:e=>e.features.vueAdmin,isSettingsEnabled:e=>e.features.vueSettings,isChatEnabled:e=>e.features.vueChat},actions:{toggleFeature(e){e in this.features&&(this.features[e]=!this.features[e],localStorage.setItem(`feature_${e}`,this.features[e]))},enableFeature(e){e in this.features&&(this.features[e]=!0,localStorage.setItem(`feature_${e}`,"true"))},disableFeature(e){e in this.features&&(this.features[e]=!1,localStorage.setItem(`feature_${e}`,"false"))},enableAllFeatures(){Object.keys(this.features).forEach(e=>{this.features[e]=!0,localStorage.setItem(`feature_${e}`,"true")})},disableAllFeatures(){Object.keys(this.features).forEach(e=>{this.features[e]=!1,localStorage.setItem(`feature_${e}`,"false")})},detectDevelopmentMode(){this.isDevelopmentMode=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",this.isDevelopmentMode&&this.enableAllFeatures()},initFeatures(){this.detectDevelopmentMode(),Object.keys(this.features).forEach(e=>{const r=localStorage.getItem(`feature_${e}`);r!==null&&(this.features[e]=r==="true")})}}}),W={class:"app-container"},K={key:0,class:"main-header"},G={class:"main-nav"},J={class:"user-actions"},Q={class:"main-content"},X={key:1,class:"main-footer"},Y={__name:"App",setup(e){q();const r=T(),s=H(),a=x();return O(()=>r.name==="settings"),$(()=>{s.initAuth(),a.initFeatures()}),(o,t)=>{const n=D("router-link"),i=D("router-view");return S(),R("div",W,[A(s).isAuthenticated?(S(),R("header",K,[t[6]||(t[6]=g("div",{class:"logo"},"nscale DMS Assistent",-1)),g("nav",G,[p(n,{to:"/",class:"nav-item"},{default:d(()=>t[1]||(t[1]=[E("Home")])),_:1}),p(n,{to:"/chat",class:"nav-item"},{default:d(()=>t[2]||(t[2]=[E("Chat")])),_:1}),p(n,{to:"/doc-converter",class:"nav-item"},{default:d(()=>t[3]||(t[3]=[E("Dokumentenkonverter")])),_:1}),A(s).isAdmin?(S(),b(n,{key:0,to:"/admin",class:"nav-item"},{default:d(()=>t[4]||(t[4]=[E("Admin")])),_:1})):I("",!0)]),g("div",J,[p(n,{to:"/settings",class:"nav-item"},{default:d(()=>t[5]||(t[5]=[E("Einstellungen")])),_:1}),g("button",{onClick:t[0]||(t[0]=(...u)=>A(s).logout&&A(s).logout(...u)),class:"logout-btn"},"Abmelden")])])):I("",!0),g("main",Q,[p(i,null,{default:d(({Component:u})=>[p(F,{name:"fade",mode:"out-in"},{default:d(()=>[(S(),b(B(u)))]),_:2},1024)]),_:1})]),A(s).isAuthenticated?(S(),R("footer",X,t[7]||(t[7]=[g("div",null,"Â© 2025 nscale DMS Assistent",-1)]))):I("",!0)])}}},Z="modulepreload",N=function(e,r){return new URL(e,r).href},C={},h=function(r,s,a){let o=Promise.resolve();if(s&&s.length>0){let n=function(l){return Promise.all(l.map(m=>Promise.resolve(m).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};const i=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),w=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=n(s.map(l=>{if(l=N(l,a),l in C)return;C[l]=!0;const m=l.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(!!a)for(let _=i.length-1;_>=0;_--){const k=i[_];if(k.href===l&&(!m||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${v}`))return;const c=document.createElement("link");if(c.rel=m?"stylesheet":Z,m||(c.as="script"),c.crossOrigin="",c.href=l,w&&c.setAttribute("nonce",w),document.head.appendChild(c),m)return new Promise((_,k)=>{c.addEventListener("load",_),c.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${l}`)))})}))}function t(n){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=n,window.dispatchEvent(i),!i.defaultPrevented)throw n}return o.then(n=>{for(const i of n||[])i.status==="rejected"&&t(i.reason);return r().catch(t)})},ee=()=>h(()=>import("./HomeView-DhdpqIGU.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),te=()=>h(()=>import("./LoginView-CJ-OBmzF.js"),__vite__mapDeps([4,1,2,5,6]),import.meta.url),oe=()=>h(()=>import("./AdminView-9bSIl8V7.js"),__vite__mapDeps([7,2,1,8]),import.meta.url),re=()=>h(()=>import("./ChatView-IJ1n2LqA.js"),__vite__mapDeps([9,1,2,10]),import.meta.url),se=()=>h(()=>import("./DocConverterView-Brcab3I9.js"),__vite__mapDeps([11,2,1,5,12]),import.meta.url),ne=()=>h(()=>import("./SettingsView--j6C6dlW.js"),__vite__mapDeps([13,1,2,14]),import.meta.url),ae=()=>h(()=>import("./NotFoundView-X-2kCSCB.js"),__vite__mapDeps([15,1,2,16]),import.meta.url),ie=[{path:"/",name:"home",component:ee,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:te,meta:{requiresAuth:!1}},{path:"/admin",name:"admin",component:oe,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/chat",name:"chat",component:re,meta:{requiresAuth:!0}},{path:"/doc-converter",name:"doc-converter",component:se,meta:{requiresAuth:!0}},{path:"/settings",name:"settings",component:ne,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:ae}],V=M({history:j("./"),routes:ie});V.beforeEach((e,r,s)=>{const a=localStorage.getItem("token"),o=localStorage.getItem("userRole")||"user";e.meta.requiresAuth&&!a?s({name:"login"}):e.meta.requiresAdmin&&o!=="admin"?s({name:"home"}):e.name==="login"&&a?s({name:"home"}):s()});const le=U(),y=z(Y);f.defaults.baseURL=window.location.origin;const L=localStorage.getItem("token");L&&(f.defaults.headers.common.Authorization=`Bearer ${L}`);y.config.errorHandler=(e,r,s)=>{console.error(`Error: ${e.toString()}
Info: ${s}`)};y.use(le);y.use(V);y.mount("#app");export{x as a,H as u};
//# sourceMappingURL=index-DLasBTVm.js.map
