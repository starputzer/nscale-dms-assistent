{"version":3,"file":"featureToggleStore.da5f2fca.js","sources":["../../../src/stores/featureToggleStore.js"],"sourcesContent":["// stores/featureToggleStore.js\nimport { defineStore } from 'pinia';\n\n/**\n * Store zur Verwaltung der Feature-Toggles\n * Ermöglicht den Wechsel zwischen altem und neuem UI sowie das Aktivieren/Deaktivieren bestimmter Features\n */\nexport const useFeatureToggleStore = defineStore('featureToggle', {\n  state: () => ({\n    // Vue.js ist jetzt immer aktiviert - vorherige Zustände werden ignoriert\n    useNewUI: true,\n    \n    // Feature-Flags nur noch für neue Funktionen, nicht mehr für die Migration\n    // Alle Vue.js-Komponenten sind jetzt dauerhaft aktiviert\n    features: {\n      // Dokumentenkonverter in Vue.js\n      vueDocConverter: true,\n      \n      // Chat-Komponente in Vue.js\n      vueChat: true,\n      \n      // Admin-Panel in Vue.js\n      vueAdmin: true,\n      \n      // Einstellungskomponente in Vue.js\n      vueSettings: true,\n      \n      // Neue Features können hier hinzugefügt werden - diese sind optional\n      darkMode: localStorage.getItem('feature_darkMode') === 'true' || false,\n      advancedSearch: localStorage.getItem('feature_advancedSearch') === 'true' || false,\n      experimentalUI: localStorage.getItem('feature_experimentalUI') === 'true' || false,\n    },\n    \n    // Entwicklungsmodus aktivieren (zeigt z.B. den Toggle-Schalter an)\n    devMode: localStorage.getItem('devMode') === 'true' || false\n  }),\n  \n  getters: {\n    /**\n     * Prüft, ob ein bestimmtes Feature aktiviert ist\n     * @param {string} featureName - Name des Features\n     * @returns {boolean} - true, wenn Feature aktiviert ist\n     */\n    isFeatureEnabled: (state) => (featureName) => {\n      // Die Hauptkomponenten sind immer aktiviert\n      if (['vueDocConverter', 'vueChat', 'vueAdmin', 'vueSettings'].includes(featureName)) {\n        return true;\n      }\n      \n      // Für andere optionale Features prüfe den Feature-Toggle\n      return state.features[featureName] || false;\n    },\n    \n    /**\n     * Liste aller aktivierten Features\n     */\n    activeFeatures: (state) => {\n      return Object.entries(state.features)\n        .filter(([_, value]) => value)\n        .map(([key]) => key);\n    }\n  },\n  \n  actions: {\n    /**\n     * Aktiviert oder deaktiviert ein optionales Feature\n     * Kernfunktionen wie vueDocConverter können nicht mehr deaktiviert werden\n     * @param {string} featureName - Name des Features\n     * @param {boolean} value - Neuer Wert (true = aktiviert, false = deaktiviert)\n     */\n    toggleFeature(featureName, value) {\n      // Verhindere das Deaktivieren von Kernfunktionen\n      if (['vueDocConverter', 'vueChat', 'vueAdmin', 'vueSettings'].includes(featureName)) {\n        console.warn(`${featureName} ist eine Kernfunktion und kann nicht deaktiviert werden.`);\n        return;\n      }\n      \n      // Nur optionale Features können umgeschaltet werden\n      if (this.features.hasOwnProperty(featureName)) {\n        this.features[featureName] = value;\n        localStorage.setItem(`feature_${featureName}`, value.toString());\n      }\n    },\n    \n    /**\n     * Entwicklermodus umschalten\n     * @param {boolean} value - Neuer Wert (true = aktiviert, false = deaktiviert)\n     */\n    toggleDevMode(value) {\n      this.devMode = value;\n      localStorage.setItem('devMode', value.toString());\n    },\n    \n    /**\n     * Alle optionalen Feature-Toggles aktivieren\n     */\n    enableAllOptionalFeatures() {\n      // Nur optionale Features ein/ausschalten\n      const optionalFeatures = Object.keys(this.features).filter(\n        key => !['vueDocConverter', 'vueChat', 'vueAdmin', 'vueSettings'].includes(key)\n      );\n      \n      optionalFeatures.forEach(key => {\n        this.features[key] = true;\n        localStorage.setItem(`feature_${key}`, 'true');\n      });\n    },\n    \n    /**\n     * Alle optionalen Feature-Toggles deaktivieren\n     */\n    disableAllOptionalFeatures() {\n      // Nur optionale Features ein/ausschalten\n      const optionalFeatures = Object.keys(this.features).filter(\n        key => !['vueDocConverter', 'vueChat', 'vueAdmin', 'vueSettings'].includes(key)\n      );\n      \n      optionalFeatures.forEach(key => {\n        this.features[key] = false;\n        localStorage.setItem(`feature_${key}`, 'false');\n      });\n    },\n    \n    /**\n     * Alle gespeicherten Feature-Einstellungen zurücksetzen\n     */\n    resetAllSettings() {\n      localStorage.removeItem('featureSettings');\n      \n      // Entferne alle Feature-Toggle-Einstellungen aus dem LocalStorage\n      Object.keys(this.features).forEach(key => {\n        localStorage.removeItem(`feature_${key}`);\n      });\n      \n      // Lade die Seite neu, um die Änderungen anzuwenden\n      window.location.reload();\n    }\n  }\n});"],"names":["useFeatureToggleStore","defineStore","state","featureName","_","value","key"],"mappings":"4DAOY,MAACA,EAAwBC,EAAY,gBAAiB,CAChE,MAAO,KAAO,CAEZ,SAAU,GAIV,SAAU,CAER,gBAAiB,GAGjB,QAAS,GAGT,SAAU,GAGV,YAAa,GAGb,SAAU,aAAa,QAAQ,kBAAkB,IAAM,QAAU,GACjE,eAAgB,aAAa,QAAQ,wBAAwB,IAAM,QAAU,GAC7E,eAAgB,aAAa,QAAQ,wBAAwB,IAAM,QAAU,EAC9E,EAGD,QAAS,aAAa,QAAQ,SAAS,IAAM,QAAU,EAC3D,GAEE,QAAS,CAMP,iBAAmBC,GAAWC,GAExB,CAAC,kBAAmB,UAAW,WAAY,aAAa,EAAE,SAASA,CAAW,EACzE,GAIFD,EAAM,SAASC,CAAW,GAAK,GAMxC,eAAiBD,GACR,OAAO,QAAQA,EAAM,QAAQ,EACjC,OAAO,CAAC,CAACE,EAAGC,CAAK,IAAMA,CAAK,EAC5B,IAAI,CAAC,CAACC,CAAG,IAAMA,CAAG,CAExB,EAED,QAAS,CAOP,cAAcH,EAAaE,EAAO,CAEhC,GAAI,CAAC,kBAAmB,UAAW,WAAY,aAAa,EAAE,SAASF,CAAW,EAAG,CACnF,QAAQ,KAAK,GAAGA,CAAW,2DAA2D,EACtF,MACD,CAGG,KAAK,SAAS,eAAeA,CAAW,IAC1C,KAAK,SAASA,CAAW,EAAIE,EAC7B,aAAa,QAAQ,WAAWF,CAAW,GAAIE,EAAM,SAAQ,CAAE,EAElE,EAMD,cAAcA,EAAO,CACnB,KAAK,QAAUA,EACf,aAAa,QAAQ,UAAWA,EAAM,SAAU,CAAA,CACjD,EAKD,2BAA4B,CAED,OAAO,KAAK,KAAK,QAAQ,EAAE,OAClDC,GAAO,CAAC,CAAC,kBAAmB,UAAW,WAAY,aAAa,EAAE,SAASA,CAAG,CACtF,EAEuB,QAAQA,GAAO,CAC9B,KAAK,SAASA,CAAG,EAAI,GACrB,aAAa,QAAQ,WAAWA,CAAG,GAAI,MAAM,CACrD,CAAO,CACF,EAKD,4BAA6B,CAEF,OAAO,KAAK,KAAK,QAAQ,EAAE,OAClDA,GAAO,CAAC,CAAC,kBAAmB,UAAW,WAAY,aAAa,EAAE,SAASA,CAAG,CACtF,EAEuB,QAAQA,GAAO,CAC9B,KAAK,SAASA,CAAG,EAAI,GACrB,aAAa,QAAQ,WAAWA,CAAG,GAAI,OAAO,CACtD,CAAO,CACF,EAKD,kBAAmB,CACjB,aAAa,WAAW,iBAAiB,EAGzC,OAAO,KAAK,KAAK,QAAQ,EAAE,QAAQA,GAAO,CACxC,aAAa,WAAW,WAAWA,CAAG,EAAE,CAChD,CAAO,EAGD,OAAO,SAAS,QACjB,CACF,CACH,CAAC"}