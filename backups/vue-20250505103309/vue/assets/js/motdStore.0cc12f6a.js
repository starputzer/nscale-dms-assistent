import{e as d}from"./_plugin-vue_export-helper.89064427.js";import{u as i,a as n}from"./authStore.ca6a9c68.js";const c=d("motd",{state:()=>({motd:null,dismissed:localStorage.getItem("motdDismissed")==="true"||!1,defaultMotd:{enabled:!0,format:"markdown",content:`üõ†Ô∏è **BETA-VERSION: Lokaler KI-Assistent f√ºr nscale**

Dieser Assistent beantwortet Fragen zur Nutzung der nscale DMS-Software auf Basis interner Informationen.

üîí **Wichtige Hinweise:**
- Alle Datenverarbeitungen erfolgen **ausschlie√ülich lokal im Landesnetz Berlin**.
- Es besteht **keine Verbindung zum Internet** ‚Äì Ihre Eingaben verlassen niemals das System.
- **Niemand au√üer Ihnen** hat Zugriff auf Ihre Eingaben oder Fragen.
- Die Antworten werden von einer KI generiert ‚Äì **Fehlinformationen sind m√∂glich**.
- Bitte geben Sie **keine sensiblen oder personenbezogenen Daten** ein.

üß† Der Assistent befindet sich in der Erprobung und wird stetig weiterentwickelt.`,style:{backgroundColor:"#fff3cd",borderColor:"#ffeeba",textColor:"#856404",iconClass:"info-circle"},display:{position:"top",dismissible:!0,showOnStartup:!1,showInChat:!0}},adminEdit:{enabled:!0,format:"markdown",content:"",style:{backgroundColor:"#fff3cd",borderColor:"#ffeeba",textColor:"#856404",iconClass:"info-circle"},display:{position:"top",dismissible:!0,showOnStartup:!1,showInChat:!0}},colorThemes:{warning:{backgroundColor:"#fff3cd",borderColor:"#ffeeba",textColor:"#856404"},info:{backgroundColor:"#e1ecf8",borderColor:"#bee5eb",textColor:"#0c5460"},success:{backgroundColor:"#e0f5ea",borderColor:"#c3e6cb",textColor:"#155724"},danger:{backgroundColor:"#f8d7da",borderColor:"#f5c6cb",textColor:"#721c24"},neutral:{backgroundColor:"#f8f9fa",borderColor:"#dee2e6",textColor:"#495057"}},selectedColorTheme:"warning",loading:!1,error:null}),getters:{shouldShowMotd:t=>t.motd&&t.motd.enabled&&!t.dismissed,motdContent:t=>{var e;return((e=t.motd)==null?void 0:e.content)||""},isAdminEditMode:(t,e,o,r)=>i().isAdmin},actions:{async loadMotd(){var t,e;this.loading=!0,this.error=null;try{const o=await n.get("/api/motd");if(this.motd=o.data,this.motd&&this.motd.style){let r=!1;for(const[s,a]of Object.entries(this.colorThemes))if(a.backgroundColor===this.motd.style.backgroundColor){this.selectedColorTheme=s,r=!0;break}r||(this.selectedColorTheme="custom")}console.log("MOTD geladen:",this.motd)}catch(o){console.error("Fehler beim Laden der MOTD:",o),this.error=((e=(t=o.response)==null?void 0:t.data)==null?void 0:e.detail)||"MOTD konnte nicht geladen werden",this.motd={...this.defaultMotd}}finally{this.loading=!1}},setDismissed(t=!0){this.dismissed=t,localStorage.setItem("motdDismissed",t.toString())},resetDismissed(){this.dismissed=!1,localStorage.removeItem("motdDismissed")},async loadMotdForEditing(){if(i().isAdmin){this.loading=!0;try{const e=await n.get("/api/motd");this.adminEdit=JSON.parse(JSON.stringify(e.data));let o=!1;for(const[r,s]of Object.entries(this.colorThemes))if(s.backgroundColor===this.adminEdit.style.backgroundColor){this.selectedColorTheme=r,o=!0;break}o||(this.selectedColorTheme="custom")}catch(e){console.error("Fehler beim Laden der MOTD f√ºr die Bearbeitung:",e),this.adminEdit={...this.defaultMotd}}finally{this.loading=!1}}},async saveMotd(){if(i().isAdmin){this.loading=!0,this.error=null;try{if(!this.adminEdit.content.trim())throw new Error("Der MOTD-Inhalt darf nicht leer sein.");return await n.post("/api/admin/update-motd",this.adminEdit),this.motd=JSON.parse(JSON.stringify(this.adminEdit)),this.resetDismissed(),!0}catch(e){throw console.error("Fehler beim Speichern der MOTD:",e),this.error=e.message||"MOTD konnte nicht gespeichert werden",e}finally{this.loading=!1}}},resetMotdToDefaults(){this.adminEdit={...this.defaultMotd},this.selectedColorTheme="warning"},async reloadMotd(){var e,o;if(i().isAdmin){this.loading=!0;try{return await n.post("/api/admin/reload-motd"),await this.loadMotd(),this.resetDismissed(),!0}catch(r){throw console.error("Fehler beim Neuladen der MOTD:",r),this.error=((o=(e=r.response)==null?void 0:e.data)==null?void 0:o.detail)||"MOTD konnte nicht neu geladen werden",r}finally{this.loading=!1}}},applyColorTheme(t){if(t!=="custom"&&this.colorThemes[t]){const e=this.colorThemes[t];this.adminEdit.style.backgroundColor=e.backgroundColor,this.adminEdit.style.borderColor=e.borderColor,this.adminEdit.style.textColor=e.textColor}this.selectedColorTheme=t}}});export{c as u};
//# sourceMappingURL=motdStore.0cc12f6a.js.map
